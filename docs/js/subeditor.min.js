(()=>{var sn=Object.create;var le=Object.defineProperty;var ln=Object.getOwnPropertyDescriptor;var dn=Object.getOwnPropertyNames;var cn=Object.getPrototypeOf,un=Object.prototype.hasOwnProperty;var pn=e=>le(e,"__esModule",{value:!0});var U=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var mn=(e,n,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of dn(n))!un.call(e,r)&&r!=="default"&&le(e,r,{get:()=>n[r],enumerable:!(t=ln(n,r))||t.enumerable});return e},q=e=>mn(pn(le(e!=null?sn(cn(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Fe=U((wr,qe)=>{var O=-1,k=1,N=0;function z(e,n,t,r){if(e===n)return e?[[N,e]]:[];if(t!=null){var o=vn(e,n,t);if(o)return o}var a=de(e,n),l=e.substring(0,a);e=e.substring(a),n=n.substring(a),a=ce(e,n);var s=e.substring(e.length-a);e=e.substring(0,e.length-a),n=n.substring(0,n.length-a);var d=fn(e,n);return l&&d.unshift([N,l]),s&&d.push([N,s]),Re(d,r),d}function fn(e,n){var t;if(!e)return[[k,n]];if(!n)return[[O,e]];var r=e.length>n.length?e:n,o=e.length>n.length?n:e,a=r.indexOf(o);if(a!==-1)return t=[[k,r.substring(0,a)],[N,o],[k,r.substring(a+o.length)]],e.length>n.length&&(t[0][0]=t[2][0]=O),t;if(o.length===1)return[[O,e],[k,n]];var l=bn(e,n);if(l){var s=l[0],d=l[1],i=l[2],c=l[3],u=l[4],m=z(s,i),p=z(d,c);return m.concat([[N,u]],p)}return hn(e,n)}function hn(e,n){for(var t=e.length,r=n.length,o=Math.ceil((t+r)/2),a=o,l=2*o,s=new Array(l),d=new Array(l),i=0;i<l;i++)s[i]=-1,d[i]=-1;s[a+1]=0,d[a+1]=0;for(var c=t-r,u=c%2!=0,m=0,p=0,f=0,g=0,E=0;E<o;E++){for(var h=-E+m;h<=E-p;h+=2){var b=a+h,v;h===-E||h!==E&&s[b-1]<s[b+1]?v=s[b+1]:v=s[b-1]+1;for(var y=v-h;v<t&&y<r&&e.charAt(v)===n.charAt(y);)v++,y++;if(s[b]=v,v>t)p+=2;else if(y>r)m+=2;else if(u){var w=a+c-h;if(w>=0&&w<l&&d[w]!==-1){var T=t-d[w];if(v>=T)return Oe(e,n,v,y)}}}for(var S=-E+f;S<=E-g;S+=2){var w=a+S,T;S===-E||S!==E&&d[w-1]<d[w+1]?T=d[w+1]:T=d[w-1]+1;for(var x=T-S;T<t&&x<r&&e.charAt(t-T-1)===n.charAt(r-x-1);)T++,x++;if(d[w]=T,T>t)g+=2;else if(x>r)f+=2;else if(!u){var b=a+c-S;if(b>=0&&b<l&&s[b]!==-1){var v=s[b],y=a+v-b;if(T=t-T,v>=T)return Oe(e,n,v,y)}}}}return[[O,e],[k,n]]}function Oe(e,n,t,r){var o=e.substring(0,t),a=n.substring(0,r),l=e.substring(t),s=n.substring(r),d=z(o,a),i=z(l,s);return d.concat(i)}function de(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var t=0,r=Math.min(e.length,n.length),o=r,a=0;t<o;)e.substring(a,o)==n.substring(a,o)?(t=o,a=t):r=o,o=Math.floor((r-t)/2+t);return De(e.charCodeAt(o-1))&&o--,o}function ce(e,n){if(!e||!n||e.slice(-1)!==n.slice(-1))return 0;for(var t=0,r=Math.min(e.length,n.length),o=r,a=0;t<o;)e.substring(e.length-o,e.length-a)==n.substring(n.length-o,n.length-a)?(t=o,a=t):r=o,o=Math.floor((r-t)/2+t);return Pe(e.charCodeAt(e.length-o))&&o--,o}function bn(e,n){var t=e.length>n.length?e:n,r=e.length>n.length?n:e;if(t.length<4||r.length*2<t.length)return null;function o(p,f,g){for(var E=p.substring(g,g+Math.floor(p.length/4)),h=-1,b="",v,y,w,T;(h=f.indexOf(E,h+1))!==-1;){var S=de(p.substring(g),f.substring(h)),x=ce(p.substring(0,g),f.substring(0,h));b.length<x+S&&(b=f.substring(h-x,h)+f.substring(h,h+S),v=p.substring(0,g-x),y=p.substring(g+S),w=f.substring(0,h-x),T=f.substring(h+S))}return b.length*2>=p.length?[v,y,w,T,b]:null}var a=o(t,r,Math.ceil(t.length/4)),l=o(t,r,Math.ceil(t.length/2)),s;if(!a&&!l)return null;l?a?s=a[4].length>l[4].length?a:l:s=l:s=a;var d,i,c,u;e.length>n.length?(d=s[0],i=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],d=s[2],i=s[3]);var m=s[4];return[d,i,c,u,m]}function Re(e,n){e.push([N,""]);for(var t=0,r=0,o=0,a="",l="",s;t<e.length;){if(t<e.length-1&&!e[t][1]){e.splice(t,1);continue}switch(e[t][0]){case k:o++,l+=e[t][1],t++;break;case O:r++,a+=e[t][1],t++;break;case N:var d=t-o-r-1;if(n){if(d>=0&&Be(e[d][1])){var i=e[d][1].slice(-1);if(e[d][1]=e[d][1].slice(0,-1),a=i+a,l=i+l,!e[d][1]){e.splice(d,1),t--;var c=d-1;e[c]&&e[c][0]===k&&(o++,l=e[c][1]+l,c--),e[c]&&e[c][0]===O&&(r++,a=e[c][1]+a,c--),d=c}}if(Ve(e[t][1])){var i=e[t][1].charAt(0);e[t][1]=e[t][1].slice(1),a+=i,l+=i}}if(t<e.length-1&&!e[t][1]){e.splice(t,1);break}if(a.length>0||l.length>0){a.length>0&&l.length>0&&(s=de(l,a),s!==0&&(d>=0?e[d][1]+=l.substring(0,s):(e.splice(0,0,[N,l.substring(0,s)]),t++),l=l.substring(s),a=a.substring(s)),s=ce(l,a),s!==0&&(e[t][1]=l.substring(l.length-s)+e[t][1],l=l.substring(0,l.length-s),a=a.substring(0,a.length-s)));var u=o+r;a.length===0&&l.length===0?(e.splice(t-u,u),t=t-u):a.length===0?(e.splice(t-u,u,[k,l]),t=t-u+1):l.length===0?(e.splice(t-u,u,[O,a]),t=t-u+1):(e.splice(t-u,u,[O,a],[k,l]),t=t-u+2)}t!==0&&e[t-1][0]===N?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,o=0,r=0,a="",l="";break}}e[e.length-1][1]===""&&e.pop();var m=!1;for(t=1;t<e.length-1;)e[t-1][0]===N&&e[t+1][0]===N&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)===e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),m=!0):e[t][1].substring(0,e[t+1][1].length)==e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),m=!0)),t++;m&&Re(e,n)}function De(e){return e>=55296&&e<=56319}function Pe(e){return e>=56320&&e<=57343}function Ve(e){return Pe(e.charCodeAt(0))}function Be(e){return De(e.charCodeAt(e.length-1))}function En(e){for(var n=[],t=0;t<e.length;t++)e[t][1].length>0&&n.push(e[t]);return n}function ue(e,n,t,r){return Be(e)||Ve(r)?null:En([[N,e],[O,n],[k,t],[N,r]])}function vn(e,n,t){var r=typeof t=="number"?{index:t,length:0}:t.oldRange,o=typeof t=="number"?null:t.newRange,a=e.length,l=n.length;if(r.length===0&&(o===null||o.length===0)){var s=r.index,d=e.slice(0,s),i=e.slice(s),c=o?o.index:null;e:{var u=s+l-a;if(c!==null&&c!==u||u<0||u>l)break e;var m=n.slice(0,u),p=n.slice(u);if(p!==i)break e;var f=Math.min(s,u),g=d.slice(0,f),E=m.slice(0,f);if(g!==E)break e;var h=d.slice(f),b=m.slice(f);return ue(g,h,b,i)}e:{if(c!==null&&c!==s)break e;var v=s,m=n.slice(0,v),p=n.slice(v);if(m!==d)break e;var y=Math.min(a-v,l-v),w=i.slice(i.length-y),T=p.slice(p.length-y);if(w!==T)break e;var h=i.slice(0,i.length-y),b=p.slice(0,p.length-y);return ue(d,h,b,w)}}if(r.length>0&&o&&o.length===0){e:{var g=e.slice(0,r.index),w=e.slice(r.index+r.length),f=g.length,y=w.length;if(l<f+y)break e;var E=n.slice(0,f),T=n.slice(l-y);if(g!==E||w!==T)break e;var h=e.slice(f,a-y),b=n.slice(f,l-y);return ue(g,h,b,w)}}return null}function $(e,n,t){return z(e,n,t,!0)}$.INSERT=k;$.DELETE=O;$.EQUAL=N;qe.exports=$});var Ze=U((Tr,_e)=>{"use strict";var yn=Fe();_e.exports=function(e,n){for(var t=yn(e,n),r=0;r<t.length;r++){var o=t[r];o[0]<1&&(o[1]=o[1].length)}return t}});var Ue=U((Sr,Ge)=>{"use strict";Ge.exports=function(e,n){for(var t="",r=0,o=0;o<n.length;o++){var a=n[o],l=a[0],s=a[1];l==-1?r+=s:l==0?t+=e.slice(r,r+=s):t+=s}return t}});var ge=U(me=>{"use strict";me.__esModule=!0;function ze(e,n){for(var t=[];n!==e&&n.parentNode;)t.push(Array.from(n.parentNode.childNodes).indexOf(n)),n=n.parentNode;return t}function Ke(e){return pe(e,!0)}function pe(e,n){n===void 0&&(n=!1);var t=window.getSelection();if(!t||t.rangeCount===0)return n?{s:[],so:0,e:[],eo:0,d:"n"}:{startContainer:[],startOffset:0,endContainer:[],endOffset:0,direction:"none"};var r=t.getRangeAt(0);if(r.intersectsNode(e)){if(e.contains(r.startContainer)||r.setStart(e.childNodes.length===0?e:e.childNodes[0],0),!e.contains(r.endContainer))if(!e.childNodes.length)r.setEnd(e,0);else{var o=e.childNodes[e.childNodes.length-1];o.nodeType===3?r.setEnd(o,(o.textContent||"").length):r.setEnd(o,o.childNodes.length)}}else if(!e.contains(r.startContainer)||!e.contains(r.endContainer)){if(r.setStart(e.childNodes.length===0?e:e.childNodes[0],0),!e.childNodes.length)r.setEnd(e,0);else{var o=e.childNodes[e.childNodes.length-1];o.nodeType===3?r.setEnd(o,(o.textContent||"").length):r.setEnd(o,o.childNodes.length)}r.collapse(!1)}var a=ze(e,r.startContainer),l=r.startOffset,s=r.startContainer===r.endContainer?a:ze(e,r.endContainer),d=r.endOffset,i="none";return!t.isCollapsed&&t.anchorNode!==t.focusNode&&t.anchorNode&&t.focusNode&&(t.anchorNode.compareDocumentPosition(t.focusNode)&Node.DOCUMENT_POSITION_FOLLOWING?i="forward":t.anchorNode.compareDocumentPosition(t.focusNode)&Node.DOCUMENT_POSITION_PRECEDING&&(i="backward")),n?{s:a,so:l,e:s,eo:d,d:i.substring(0,1)}:{startContainer:a,startOffset:l,endContainer:s,endOffset:d,direction:i}}function je(e,n){var t=window.getSelection();t==null||t.removeAllRanges();for(var r=n.hasOwnProperty("direction")?n:{startContainer:n.s,startOffset:n.so,endContainer:n.e,endOffset:n.eo,direction:n.d},o=e,a=r.startContainer.length-1;a>=0;a--)o.childNodes&&o.childNodes.length>r.startContainer[a]&&o.childNodes[r.startContainer[a]]&&(o=o.childNodes[r.startContainer[a]]);o.nodeType===Node.TEXT_NODE&&o.textContent.length<r.startOffset?r.startOffset=o.textContent.length:o.childNodes.length>=1&&o.childNodes.length<r.startOffset&&(r.startOffset=o.childNodes.length-1);for(var l=e,a=r.endContainer.length-1;a>=0;a--)l.childNodes&&l.childNodes.length>r.endContainer[a]&&l.childNodes[r.endContainer[a]]&&(l=l.childNodes[r.endContainer[a]]);l.nodeType===Node.TEXT_NODE&&l.textContent.length<r.endOffset?r.endOffset=l.textContent.length:l.childNodes.length>=1&&l.childNodes.length<r.endOffset&&(r.endOffset=l.childNodes.length-1);var s=document.createRange();r.direction==="backward"||r.direction==="b"?(s.setStart(l,r.endOffset),s.setEnd(l,r.endOffset),t==null||t.addRange(s),t==null||t.extend(o,r.startOffset),s=t==null?void 0:t.getRangeAt(0)):(s.setStart(o,r.startOffset),s.setEnd(l,r.endOffset),t==null||t.addRange(s))}typeof window!="undefined"&&(window.SelectionSerializer={save:pe,saveSlim:Ke,restore:je});me.default={save:pe,saveSlim:Ke,restore:je}});var Ce=U(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var wn=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Ee={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Qe={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:wn?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},ve={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(K=1;K<20;K++)ve["f"+K]=111+K;var K;function te(e,n,t){n&&!("byKey"in n)&&(t=n,n=null),Array.isArray(e)||(e=[e]);var r=e.map(function(l){return Ye(l,n)}),o=function(s){return r.some(function(d){return Je(d,s)})},a=t==null?o:o(t);return a}function Tn(e,n){return te(e,n)}function Sn(e,n){return te(e,{byKey:!0},n)}function Ye(e,n){var t=n&&n.byKey,r={};e=e.replace("++","+add");var o=e.split("+"),a=o.length;for(var l in Ee)r[Ee[l]]=!1;var s=!0,d=!1,i=void 0;try{for(var c=o[Symbol.iterator](),u;!(s=(u=c.next()).done);s=!0){var m=u.value,p=m.endsWith("?")&&m.length>1;p&&(m=m.slice(0,-1));var f=ye(m),g=Ee[f];if(m.length>1&&!g&&!Qe[m]&&!ve[f])throw new TypeError('Unknown modifier: "'+m+'"');(a===1||!g)&&(t?r.key=f:r.which=$e(m)),g&&(r[g]=p?null:!0)}}catch(E){d=!0,i=E}finally{try{!s&&c.return&&c.return()}finally{if(d)throw i}}return r}function Je(e,n){for(var t in e){var r=e[t],o=void 0;if(r!=null&&(t==="key"&&n.key!=null?o=n.key.toLowerCase():t==="which"?o=r===91&&n.which===93?91:n.which:o=n[t],!(o==null&&r===!1)&&o!==r))return!1}return!0}function $e(e){e=ye(e);var n=ve[e]||e.toUpperCase().charCodeAt(0);return n}function ye(e){return e=e.toLowerCase(),e=Qe[e]||e,e}R.default=te;R.isHotkey=te;R.isCodeHotkey=Tn;R.isKeyHotkey=Sn;R.parseHotkey=Ye;R.compareHotkey=Je;R.toKeyCode=$e;R.toKeyName=ye});var Me={align_center:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5,6.3H19V8.37H5Zm0,9.33H19V17.7H5ZM7.33,11h9.34V13H7.33Z"></path></svg>',align_justify:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 6.3H19V8.4H5ZM5 15.6H19V17.7H5ZM5 11H19V13H5Z"></path></svg>',align_left:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 6.3H19V8.37H5ZM5 15.63H19V17.7H5ZM5 11H14.33V13H5Z"></path></svg>',align_right:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 6.3H19V8.37H5ZM5 15.63H19V17.7H5ZM9.67 11H19V13H9.67Z"></path></svg>',b:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 5v14h7A3.6 3.6 0 0017 16A3.6 3.6 0 0015 12A3.6 3.6 0 0017 8.5A3.6 3.6 0 0014 5h-7ZM9 7h4.5A2.1 2.1 0 0114.5 9A2.1 2.1 0 0113.5 11h-4.5v-4ZM9 13h4.5A2.1 2.1 0 0114.5 15.5A2.1 2.1 0 0113.5 17h-4.5v-4Z"></path></svg>',background_color:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6.85 17.5 11.08 6.5H12.65L17.15 17.5H15.49L14.21 14.17H9.61L8.4 17.5ZM10 13H13.73L12.58 10Q12.06 8.61 11.8 7.72A13.8 13.8 0 0111.2 9.82ZM19 5H5V19H19Z"></path></svg>',blockquote:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.7 5 17.7 5A14 14 0 0012.7 15.5A3.2 3.2 0 0016.2 19A3.5 3.5 0 0019.7 15.5A3 3 0 0015.4 13A14 14 0 0119.7 5ZM11.3 5 9.3 5A14 14 0 004.3 15.5A3.2 3.2 0 007.8 19A3.5 3.5 0 0011.3 15.5A3 3 0 007 13A14 14 0 0111.3 5Z"></path></svg>',character:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.72 17.38H8.72A7.33 7.33 0 015.87 11.55A7.34 7.34 0 016.62 8.2A5.78 5.78 0 018.74 5.86A6.12 6.12 0 0112 5A5.91 5.91 0 0115.18 5.79A6.11 6.11 0 0117.27 8.05A7 7 0 0118.09 11.55A7.33 7.33 0 0115.24 17.38H18.24V19H12.93V17.48A5.68 5.68 0 0016.27 11.84A5.88 5.88 0 0015.09 8.05A3.69 3.69 0 0012 6.56A3.74 3.74 0 008.89 8.06A5.76 5.76 0 007.73 11.74C7.73 14.5 8.83 16.41 11.05 17.48V19H5.72Z"></path></svg>',close:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 16.91 9.94 12 5 7.06 7.1 5 12 9.9 16.91 5 19 7.09 14.1 12 19 16.9 16.93 19 12 14.06 7.09 19Z"></path></svg>',code:`<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 8.11 7.79 L 9.04 8.72 L 5.76 12 L 9 15.28 L 8.07 16.21 L 4 12 ZM 15.89 7.79 L 15 8.72 L 18.24 12 L 15 15.28 L 15.93 16.21 L 20 12 Z
M 13 6.5 L 14 6.5 L 11 17 L 10 17  Z"></path></svg>`,download:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.44 10.47V15.92H6.56V10.47H5V17.47H19V10.47ZM11.24 6.53H12.8V12.22H14.33L12 15 9.67 12.22H11.24Z"></path></svg>',fullscreen:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 14H5V19H10V17H7ZM5 10H7V7H10V5H5ZM17 17H14V19H19V14H17ZM14 5V7H17V10H19V5Z"></path></svg>',fullscreen_close:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 16H8V19H10V14H5ZM8 8H5V10H10V5H8ZM14 19H16V16H19V14H14ZM16 8V5H14V10H19V8Z"></path></svg>',h1:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 17V7.08H6.31V11.14H11.44V7.08H12.75V17H11.44V12.3H6.31V17ZM19 17H17.79V9.23A6.35 6.35 0 0116.64 10.07A9.14 9.14 0 0115.36 10.69V9.52A7.2 7.2 0 0017.14 8.36A4.42 4.42 0 0018.22 7H19Z"></path></svg>',h2:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 16.39V7.64H6.16V11.24H10.71V7.64H11.86V16.39H10.71V12.27H6.16V16.39ZM19 15.36V16.36H13.22A1.83 1.83 0 0113.34 15.62A4 4 0 0114.05 14.45A10.47 10.47 0 0115.46 13.13A11.44 11.44 0 0017.38 11.27A2.15 2.15 0 0017.88 9.98A1.44 1.44 0 0017.43 8.91A1.62 1.62 0 0016.24 8.47A1.67 1.67 0 0015 9A1.79 1.79 0 0014.52 10.29L13.42 10.18A2.72 2.72 0 0114.27 8.3A2.89 2.89 0 0116.27 7.65A2.75 2.75 0 0118.27 8.35A2.28 2.28 0 0119 10A2.51 2.51 0 0118.78 11A4 4 0 0118.07 12.07A17.75 17.75 0 0116.41 13.61C15.77 14.15 15.41 14.51 15.17 14.71A3.36 3.36 0 0014.72 15.29Z"></path></svg>',h3:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 16.29V7.59H6.15V11.16H10.67V7.59H11.82V16.29H10.67V12.19H6.15V16.29ZM13.31 14 14.37 13.86A2.47 2.47 0 0015 15.16A1.57 1.57 0 0016.08 15.56A1.76 1.76 0 0017.35 15A1.8 1.8 0 0017.87 13.7A1.64 1.64 0 0017.39 12.49A1.66 1.66 0 0016.17 12.01A3 3 0 0015.41 12.13L15.53 11.2H15.7A2.17 2.17 0 0016.93 10.84A1.23 1.23 0 0017.48 9.74A1.32 1.32 0 0017.08 8.74A1.41 1.41 0 0016.08 8.36A1.44 1.44 0 0015.08 8.75A2 2 0 0014.48 10L13.41 9.81A2.75 2.75 0 0114.3 8.15A2.61 2.61 0 0116 7.56A2.9 2.9 0 0117.31 7.86A2.34 2.34 0 0118.23 8.7A2.13 2.13 0 0118.54 9.82A1.82 1.82 0 0118.24 10.82A2.05 2.05 0 0117.35 11.56A2 2 0 0118.54 12.3A2.2 2.2 0 0118.97 13.7A2.58 2.58 0 0118.14 15.63A2.9 2.9 0 0116.04 16.42A2.75 2.75 0 0114.14 15.74A2.65 2.65 0 0113.31 14Z"></path></svg>',h4:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 16.36V7.64H6.15V11.22H10.68V7.64H11.84V16.36H10.68V12.25H6.15V16.36ZM16.75 16.36V14.27H13V13.27L17 7.62H17.87V13.27H19V14.27H17.82V16.36ZM16.75 13.29V9.36L14 13.29Z"></path></svg>',h5:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 16.25V7.6H6.15V11.15H10.64V7.6H11.79V16.25H10.64V12.17H6.15V16.25ZM13.26 14 14.38 13.9A2 2 0 0015 15.12A1.61 1.61 0 0016.09 15.53A1.72 1.72 0 0017.39 14.95A2.17 2.17 0 0017.92 13.41A2 2 0 0017.36 12A1.77 1.77 0 0016 11.45A1.79 1.79 0 0015.07 11.69A1.71 1.71 0 0014.42 12.29L13.42 12.16 14.26 7.72H18.56V8.72H15.14L14.67 11.05A2.84 2.84 0 0116.31 10.51A2.6 2.6 0 0118.22 11.29A2.74 2.74 0 0119 13.29A3.19 3.19 0 0118.32 15.29A2.76 2.76 0 0116.04 16.29A2.78 2.78 0 0114.12 15.63A2.58 2.58 0 0113.26 14Z"></path></svg>',h6:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 16.29V7.6H6.15V11.17H10.67V7.6H11.82V16.29H10.67V12.19H6.15V16.29ZM18.85 9.73 17.78 9.81A2 2 0 0017.38 8.89A1.52 1.52 0 0015.38 8.72A2.51 2.51 0 0014.58 9.8A5.75 5.75 0 0014.28 11.8A2.43 2.43 0 0115.22 10.93A2.53 2.53 0 0116.39 10.64A2.41 2.41 0 0118.21 11.43A2.81 2.81 0 0118.96 13.43A3.43 3.43 0 0118.65 15A2.53 2.53 0 0116.28 16.45A2.75 2.75 0 0114.1 15.45A5 5 0 0113.26 12.21A5.78 5.78 0 0114.19 8.55A2.66 2.66 0 0116.38 7.55A2.34 2.34 0 0118.85 9.72ZM14.49 13.47A2.44 2.44 0 0014.72 14.53A1.73 1.73 0 0015.38 15.3A1.67 1.67 0 0016.26 15.56A1.5 1.5 0 0017.42 15A2.14 2.14 0 0017.91 13.51A2 2 0 0017.43 12.09A1.61 1.61 0 0016.22 11.57A1.69 1.69 0 0014.99 12.09A1.86 1.86 0 0014.49 13.47Z"></path></svg>',hr:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 11H19V13H5Z"></path></svg>',i:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9l-2 10h2l2-10Zm0.75-3a1 1 0 001 1a1 1 0 10-1-1Z"></path></svg>',image:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.3 7.1V17H4.7V7.1H19.3M21.3 5H2.7V19H21.3ZM7.2 8.4A1.2 1.2 0 108.4 9.5A1.2 1.2 0 007.2 8.4ZM6.8 15.7H13.8L10.3 11ZM12 12.1 14.3 9.9 18.3 15.7H14.6S11.9 12 12 12.1Z"></path></svg>',image_library:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 15.74 5.68 V 13.6 H 4.06 V 5.68 H 15.74 M 17.34 4 H 2.46 V 15.2 H 17.34 Z M 6.06 6.72 A 0.96 0.96 90 1 0 7.02 7.6 A 0.96 0.96 90 0 0 6.06 6.72 Z M 5.74 12.56 H 11.34 L 8.54 8.8 Z M 9.9 9.68 L 11.74 7.92 L 14.94 12.56 H 11.98 S 9.82 9.6 9.9 9.68 Z M 18.94 5.68 H 20.54 V 18.4 H 4.06 V 16.8 H 18.94 Z"></path></svg>',indent:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 9V15L7 12 4 9ZM4 19H20V17H4V19ZM4 7H20V5H4V7ZM9 11H20V9H9V11ZM9 15H20V13H9V15Z"></path></svg>',link:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 10.13 11.39 A 0.3 0.3 0 0 0 10.03 11.19 L 9.17 10.5 A 0.3 0.3 0 0 0 8.919 10.488 L 5.7 13.6 L 5.69 13.61 A 2.37 2.37 0 0 0 5.69 16.95 L 7.07 18.32 A 2.36 2.36 0 0 0 8.73 19 A 2.4 2.4 0 0 0 10.39 18.32 L 13.63 15 A 0.3 0.3 0 0 0 13.63 14.8 L 12.68 13.9 A 0.3 0.3 0 0 0 12.52 13.96 L 9.23 17.24 A 0.74 0.74 0 0 1 8.67 17.47 A 0.71 0.71 0 0 1 8.12 17.24 L 6.75 15.87 A 0.82 0.82 0 0 1 6.75 14.76 Z M 13.88 12.7 A 0.3 0.3 90 0 0 13.98 12.9 L 14.84 13.59 A 0.3 0.3 90 0 0 15.091 13.602 L 18.31 10.49 L 18.32 10.48 A 2.37 2.37 90 0 0 18.32 7.14 L 16.94 5.77 A 2.36 2.36 90 0 0 15.28 5.09 A 2.4 2.4 90 0 0 13.62 5.77 L 10.38 9.09 A 0.3 0.3 90 0 0 10.38 9.29 L 11.33 10.19 A 0.3 0.3 90 0 0 11.49 10.13 L 14.78 6.85 A 0.74 0.74 90 0 1 15.34 6.62 A 0.71 0.71 90 0 1 15.89 6.85 L 17.26 8.22 A 0.82 0.82 90 0 1 17.26 9.33 Z M 14.45 10.63 A 0.36 0.36 0 0 0 14.56 10.39 A 0.33 0.33 0 0 0 14.45 10.16 L 13.85 9.55 A 0.5 0.5 0 0 0 13.61 9.45 A 0.32 0.32 0 0 0 13.37 9.55 L 9.62 13.29 A 0.4 0.4 0 0 0 9.52 13.53 A 0.34 0.34 0 0 0 9.62 13.76 L 10.23 14.37 A 0.4 0.4 0 0 0 10.47 14.47 A 0.32 0.32 0 0 0 10.71 14.37 Z"></path></svg>',next:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 9.89 7.79 L 9 8.72 L 12.24 12 L 9 15.28 L 9.93 16.21 L 14 12 Z"></path></svg>',ol:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.55 6.21H19V8.31H9.55ZM9.55 15.66H19V17.76H9.55ZM9.55 10.94H19V13H9.55ZM6 8.31H5.62V6.84A1.34 1.34 0 015.12 7.14V6.78A1 1 0 005.45 6.59A.76.76 0 005.7 6.27H6ZM5 17.22 5.37 17.22A.3.3 0 005.47 17.44A.26.26 0 005.66 17.52A.28.28 0 005.86 17.43A.37.37 0 006 17.13A.36.36 0 005.92 16.9A.27.27 0 005.73 16.82L5.55 16.82 5.55 16.5A.33.33 0 005.79 16.44A.22.22 0 005.87 16.25A.24.24 0 005.81 16.08A.21.21 0 005.65 16.02A.24.24 0 005.49 16.09A.31.31 0 005.4 16.29L5.05 16.23A.7.7 0 015.16 16A.51.51 0 015.37 15.83A.73.73 0 015.67 15.77A.6.6 0 016.12 15.95A.49.49 0 016.26 16.28A.47.47 0 015.97 16.7A.48.48 0 016.25 16.87A.46.46 0 016.35 17.18A.58.58 0 016.16 17.63A.71.71 0 015.23 17.63A.63.63 0 015 17.22ZM6.35 12.66V13H5A1 1 0 015.13 12.61A3.18 3.18 0 015.57 12.12A2.38 2.38 0 005.9 11.79A.46.46 0 006 11.57A.32.32 0 005.93 11.37A.26.26 0 005.73 11.3A.29.29 0 005.54 11.37A.36.36 0 005.46 11.62L5.07 11.62A.63.63 0 015.28 11.16A.72.72 0 015.72 11A.68.68 0 016.2 11.16A.54.54 0 016.37 11.56A.81.81 0 016.37 11.83A1.08 1.08 0 016.21 12.09A2.59 2.59 0 015.96 12.35L5.72 12.57 5.64 12.68Z"></path></svg>',outdent:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 9V15L4 12 7 9ZM4 19H20V17H4V19ZM4 7H20V5H4V7ZM9 11H20V9H9V11ZM9 15H20V13H9V15Z"></path></svg>',p:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.53 19H10.71V11.16A3.21 3.21 0 018.53 10.24A3 3 0 017.76 8.1A3.44 3.44 0 018.07 6.66A2.7 2.7 0 018.9 5.66A3.21 3.21 0 0110.12 5.13A9.54 9.54 0 0111.76 5H16.24V7H15.39V19H13.62V7H12.53Z"></path></svg>',plus:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10.8 5 13.2 5 13.2 10.8 19 10.8 19 13.2 13.2 13.2 13.2 19 10.8 19 10.8 13.2 5 13.2 5 10.8 10.8 10.8Z"></path></svg>',previous:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 14.11 7.79 L 15.04 8.72 L 11.76 12 L 15 15.28 L 14.07 16.21 L 10 12 Z"></path></svg>',redo:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16.76 6.74 19 12.08 13.67 14.31 14.86 11.39A6.68 6.68 0 006.78 16.49A3.14 3.14 0 006.66 17.26L5 17.15A8.42 8.42 0 0111.41 9.8H11.41A8.22 8.22 0 0115.56 9.8Z"></path></svg>',remove_format:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.5,17v2h13V17ZM7,13.51,10.53,10,7,6.47,8.5,5,12,8.5,15.51,5,17,6.49,13.5,10,17,13.5,15.52,15,12,11.47,8.49,15Z"></path></svg>',remove_link:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10.13 11.35A.41.41 0 0010.03 11.14L9.17 10.45A.33.33 0 008.91 10.45L5.7 13.56H5.7A2.38 2.38 0 005.7 16.91L7.08 18.27A2.29 2.29 0 008.73 19A2.36 2.36 0 0010.39 18.32L13.63 15A.31.31 0 0013.63 14.81L12.63 13.9A.38.38 0 0012.47 13.96L9.23 17.19A.71.71 0 018.67 17.42A.68.68 0 018.12 17.19L6.75 15.82A.8.8 0 016.75 14.72ZM13.88 12.65A.26.26 0 0013.98 12.85L14.84 13.55A.31.31 0 0015.09 13.55L18.31 10.43H18.31A2.38 2.38 0 0018.31 7.09L16.94 5.72A2.39 2.39 0 0013.62 5.72L10.38 9.05A.21.21 0 0010.38 9.24L11.33 10.14A.33.33 0 0011.49 10.09L14.78 6.8A.75.75 0 0115.34 6.57A.78.78 0 0115.89 6.8L17.26 8.18A.83.83 0 0117.26 9.28ZM14.45 10.59A.44.44 0 0014.56 10.35A.41.41 0 0014.45 10.11L13.85 9.51A.58.58 0 0013.61 9.4A.3.3 0 0013.37 9.51L9.62 13.24A.39.39 0 009.52 13.48A.33.33 0 009.62 13.72L10.23 14.32A.41.41 0 0010.47 14.43A.34.34 0 0010.71 14.32ZM15 17.83 16.42 16.42 15 15 15.59 14.42 17 15.83 18.4 14.43 19 15 17.6 16.4 19 17.8 18.41 18.4 17 17 15.6 18.43Z"></path></svg>',remove_list:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 9.67 6.3 H 19 V 8.37 H 9.67 Z M 9.67 15.63 H 14 V 17.7 H 9.67 Z M 5 15.63 H 7.33 V 17.7 H 5 Z M 5 11 H 7.33 V 13 H 5 Z M 5 6.3 H 7.33 V 8.37 H 5 Z M 9.67 11 H 19 V 13 H 9.67 Z M 15 17.83 L 16.42 16.42 L 15 15 L 15.59 14.42 L 17 15.83 L 18.4 14.43 L 19 15 L 17.6 16.4 L 19 17.8 L 18.41 18.4 L 17 17 L 15.6 18.43 Z"></path></svg>',search:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 10.4 6.08 A 4.32 4.32 90 1 0 10.4 14.72 A 4.32 4.32 90 1 0 10.4 6.08 Z M 10.4 7.16 A 2.16 2.16 90 1 1 10.4 13.64 A 2.16 2.16 90 1 1 10.4 7.16 Z M 13.493 13.496 L 17.96 17.24 L 17.24 17.96 L 12.8015 14.033 Z"></path></svg>',strikethrough:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 3 11.3 H 21 v 1.5 H 3 Z M 16.63 13.7 A 3.51 3.51 0 0 1 17 15.29 A 3.25 3.25 0 0 1 15.67 18 a 5.56 5.56 0 0 1 -3.47 1 a 6.25 6.25 0 0 1 -2.62 -0.54 A 4.43 4.43 0 0 1 7.69 17 A 3.71 3.71 0 0 1 7 14.81 V 14.7 H 9 v 0.11 a 2.17 2.17 0 0 0 0.86 1.83 a 3.62 3.62 0 0 0 2.32 0.68 a 3.41 3.41 0 0 0 2.08 -0.54 a 1.76 1.76 0 0 0 0.7 -1.47 a 1.69 1.69 0 0 0 -0.65 -1.43 l -0.27 -0.18 Z M 16.34 7.06 a 4.19 4.19 0 0 0 -1.72 -1.51 A 5.71 5.71 0 0 0 12.11 5 A 5.16 5.16 0 0 0 8.75 6.07 a 3.34 3.34 0 0 0 -1.31 2.7 a 3.26 3.26 0 0 0 0.33 1.43 h 2.59 a 1.63 1.63 0 0 1 -0.65 -1.3 a 1.77 1.77 0 0 1 0.69 -1.51 a 3 3 0 0 1 2 -0.55 a 3.1 3.1 0 0 1 2.11 0.66 a 2.36 2.36 0 0 1 0.73 1.84 v 0.11 H 17 A 3.91 3.91 0 0 0 16.34 7.06 Z"></path></svg>',subscript:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.63 15.22 7.87 11 3.66 6.77 5.43 5 9.64 9.21 13.85 5 15.64 6.79 11.44 11 15.64 15.21 13.87 17 9.66 12.77 5.42 17ZM20.37 18.29V19H16.42A1.24 1.24 0 0116.5 18.49A2.83 2.83 0 0116.98 17.69A8.18 8.18 0 0117.98 16.79A8 8 0 0019.29 15.52A1.5 1.5 0 0019.64 14.64A1 1 0 0019.32 13.9A1.11 1.11 0 0018.51 13.6A1.16 1.16 0 0017.66 13.92A1.2 1.2 0 0017.34 14.8L16.58 14.72A1.86 1.86 0 0117.17 13.44A2 2 0 0118.5 13A1.9 1.9 0 0119.86 13.48A1.58 1.58 0 0120.36 14.66A1.78 1.78 0 0120.21 15.37A2.61 2.61 0 0119.73 16.1A11 11 0 0118.59 17.15A9 9 0 0017.75 17.91A2.12 2.12 0 0017.44 18.3Z"></path></svg>',superscript:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.63 17.21 7.87 13 3.66 8.76 5.43 7 9.64 11.2 13.85 7 15.64 8.8 11.44 13 15.64 17.21 13.87 19 9.66 14.76 5.42 19ZM20.37 10.3V11H16.42A1.3 1.3 0 0116.5 10.49A2.66 2.66 0 0117 9.7A8.15 8.15 0 0118 8.79A8 8 0 0019.31 7.53A1.55 1.55 0 0019.66 6.64A1 1 0 0019.34 5.91A1.11 1.11 0 0018.53 5.61A1.16 1.16 0 0017.68 5.92A1.22 1.22 0 0017.36 6.8L16.6 6.73A1.89 1.89 0 0117.19 5.44A2 2 0 0118.5 5A1.94 1.94 0 0119.86 5.47A1.6 1.6 0 0120.36 6.66A1.73 1.73 0 0120.21 7.36A2.48 2.48 0 0119.73 8.09A12.06 12.06 0 0118.59 9.15Q17.93 9.7 17.75 9.9A1.88 1.88 0 0017.44 10.3Z"></path></svg>',table:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 5H2V19H22ZM9.5 13.5V10.5H14.5V13.5ZM14.5 15V17.5H9.5V15ZM9.5 9V6.5H14.5V9ZM3.5 6.5H8V9H3.5ZM3.5 10.5H8V13.5H3.5ZM3.5 17.5V15H8V17.5ZM20.5 17.5H16V15H20.5ZM20.5 13.5H16V10.5H20.5ZM16 9V6.5H20.5V9Z"></path></svg>',text:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 3.905 17.1 L 8.747 4.5 H 10.547 L 15.704 17.1 H 13.796 L 12.329 13.284 H 7.1 L 5.678 17.1 Z M 7.505 11.925 H 11.771 L 10.493 8.433 C 10.097 7.38 9.8 6.507 9.593 5.823 A 16.479 16.479 90 0 1 8.9 8.226 Z M 17 5 a 1 1 0 1 1 2 0 a 1 1 0 1 1 -2 0 Z M 17 8 a 1 1 0 1 1 2 0 a 1 1 0 1 1 -2 0 Z M 17 11 a 1 1 0 1 1 2 0 a 1 1 0 1 1 -2 0 Z"></path></svg>',text_color:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 5.45 19 L 10.83 5 H 12.83 L 15.4 11.8 L 13 14.76 H 9 L 7.42 19 Z M 9.45 13.25 H 14.19 L 12.77 9.37 C 12.33 8.2 12 7.23 11.77 6.47 A 18.31 18.31 0 0 1 11 9.14 Z M 15.78 12.22 s -2.75 2.98 -2.75 4.82 a 2.79 2.79 90 0 0 5.58 0.08 v -0.08 C 18.61 15.21 15.78 12.22 15.78 12.22 Z"></path></svg>',u:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 3.5v8.5A6.5 6.5 0 0012.5 17.5A6.5 6.5 0 0019 12v-8.5h-2v8.5A4.5 4.5 0 0112.5 15.5A4.5 4.5 0 018 12v-8.5ZM6 18.5v2h13v-2Z"></path></svg>',ul:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.67 6.3H19V8.37H9.67ZM9.67 15.63H19V17.7H9.67ZM5 15.63H7.33V17.7H5ZM5 11H7.33V13H5ZM5 6.3H7.33V8.37H5ZM9.67 11H19V13H9.67Z"></path></svg>',undo:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.44 9.85A8.22 8.22 0 0112.59 9.85H12.59A8.42 8.42 0 0119 17.15L17.34 17.26A3.14 3.14 0 0017.22 16.49A6.68 6.68 0 009.14 11.39L10.33 14.31 5 12.08 7.24 6.74Z"></path></svg>',upload:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.44 10.47V15.92H6.56V10.47H5V17.47H19V10.47ZM12.76 15H11.2V9.25H9.67L12 6.53 14.33 9.25H12.76Z"></path></svg>',video:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.88 8.71V15.29H6.65V8.71H14.88M16.53 10.71V7.06H5V16.94H16.53V13.24L19 15.24V8.71Z"></path></svg>',view_source:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.11 7.79 10.04 8.72 6.76 12 10 15.28 9.07 16.21 5 12ZM14.89 7.79 14 8.72 17.24 12 14 15.28 14.93 16.21 19 12Z"></path></svg>'};var ke=".SubEditor, .SubEditor  * {box-sizing: border-box;}.SubEditor {border:1px solid #dbdbdb;background-color: #fff;position: relative;}.SubEditorContentContainer {overflow-y: auto;padding:10px;}.SubEditor.AutoGrow {height: auto;}.SubEditor.AutoGrow .SubEditorContentContainer{overflow-y: hidden;height: auto;}.SubEditorContent, .SubEditorSource {text-align: start;display:inline-block;min-height: 200px;width:100%;box-shadow: none;border:none;outline: none;}.SubEditorContent:focus, .SubEditorSource:focus{box-shadow: none;border:none;outline: none;}.SubEditorContent img {max-width: 100%;}.SubEditorTextarea {display:none;resize: none;width: 100%;min-height: 100px;padding:10px;overflow: hidden;box-sizing: border-box;}.SubEditor .SubEditorFooter {display: none;border-top: 1px solid #dbdbdb;}.SubEditor > .SubEditorTooltip{user-select: none;z-index: 9999;position: absolute;line-height: 1.2em;display: none;padding: 2px 10px;box-shadow:1px 1px 3px gray;border-radius:5px;background: #fff;white-space: nowrap;}.SubEditor .se-button {box-shadow:none}.SubEditorContent table {border: none;border-collapse: collapse;empty-cells: show;max-width: 100%;}.SubEditorContent table td,.SubEditorContent table th {min-width:20px;min-height: 20px;border: 1px solid #dedede;}.SubEditorContent table th {background-color: #efefef;}.SubEditorContent blockquote{border-left: solid 3px #dedede;margin: 5px;padding-left: 5px;color: #333;}.SubEditorContent h1,.SubEditorContent h2,.SubEditorContent h3,.SubEditorContent h4,.SubEditorContent h5,.SubEditorContent h6{font-size: revert;font-weight: revert;margin: revert;padding: revert;}.SubEditorContent ul, .SubEditorContent ol{display: block;margin-block-start: 1em;margin-block-end: 1em;margin-inline-start: 0px;margin-inline-end: 0px;padding-inline-start: 40px;}.SubEditorContent ul {list-style-type: disc;}.SubEditorContent ol{list-style-type: decimal;}.SubEditorContent p{margin: revert;padding: revert;}.SubEditorToolbar {margin:0;border-bottom:1px solid #dbdbdb;align-items: center;display: flex;flex-wrap: wrap;justify-content: flex-start;font-weight: 400;font-size: 1rem;line-height: 1.5;text-align: left;color: #363636;background-color: #fff;width:100%;position: relative;}.SubEditorToolbar, .SubEditorToolbar  * {user-select: none;}.SubEditorToolbar{ align-items: center;display: flex;flex-wrap: wrap;justify-content: flex-start;}.SubEditorToolbar .se-dropdown {display: inline-flex;position: relative;vertical-align: top;height: 2.25em;border-color: transparent; border-width: 1px; cursor: pointer; justify-content: center; padding: calc(0.375 em - 1 px)  0.75em;text-align: center;}    .SubEditorToolbar .se-dropdown-trigger{position: relative;}.SubEditorToolbar .se-button{margin: 0;align-items: center;border: 1px solid transparent;display: inline-flex;vertical-align: top;background-color: #fff;border-color: transparent;border-width: 1px;border-radius: 3px;cursor: pointer;justify-content: center;padding: calc(.375em - 1px) .75em;text-align: center;white-space: nowrap;position: relative;overflow: hidden;transform: translate3d(0,0,0);transition: box-shadow 280ms cubic-bezier(.4,0,.2,1),background-color 300ms ease;box-shadow: none;}.SubEditorToolbar .se-button .se-icon{margin:0 calc(-.375em - 1px);height: 24px;width: 24px;align-items: center; display: inline-flex;justify-content: center;}.SubEditorToolbar .se-button .se-icon svg {height: 24px;width: 24px;}.SubEditorToolbar .se-dropdown-trigger .se-button * {pointer-events: none;}.SubEditorToolbar .se-dropdown-menu{min-width: unset;left: 0;padding-top: 4px;position: absolute;top: 100%;z-index: 20;display: none;background-color: #fff;}.SubEditorToolbar .se-ToolbarItem.is-active .se-dropdown-menu {display:block}.SubEditorToolbar .se-dropdown-content{border-radius: 4px;box-shadow: 0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);padding: 0;transform-origin: top left;position:relative;background-color: #fff;}.SubEditorToolbar .se-dropdown-content .padding {padding: 15px;}.SubEditorToolbar .se-dropdown-content .se-dropdown-item {cursor: pointer;height:unset;margin-bottom:0;margin: 0;align-items: center;border: 1px solid transparent;display: inline-flex;vertical-align: top;justify-content: center;text-transform: uppercase;transition: box-shadow 280ms cubic-bezier(.4,0,.2,1),background-color 300ms ease;position: relative;overflow: hidden;transform: translate3d(0,0,0);white-space: nowrap;width: 100%;box-shadow: none;height: unset;margin-right: -1px;box-sizing: border-box;}.SubEditorToolbar .se-dropdown-content.se-control .se-dropdown-item {padding:10px 5px;}.SubEditorToolbar .se-dropdown-content .se-dropdown-item input {padding: calc(0.5em - 1px) calc(0.75em - 1px);transition: all 300ms;font-size: 1rem;height: 2.5em;line-height: 2.5em;border: solid 1px #ccc;width:200px;}.SubEditorToolbar .se-dropdown-content .se-button {height: 30px;line-height: 1;}.SubEditorToolbar .se-dropdown-content .se-button.close-dropdown {position: absolute;right:1px;top:1px;}.SubEditorToolbar .se-dropdown-content .se-button.alert {background-color: rgb(244,67,54,1);color: #fff;}.SubEditorToolbar .se-dropdown-content .se-button:hover {background-color: #dbdbdb;}.SubEditorToolbar .se-dropdown-content .se-button.alert:hover {background-color: rgb(244,67,54,0.7);}.SubEditorToolbar .se-dropdown-content .se-dropdown-item input:focus {border: solid 1px #2196f3;}.SubEditorToolbar .se-dropdown-content .se-dropdown-item input+label {position: absolute;top: -1px;left: 12px;padding:3px 2px;font-size: 0.8em;color: #333;transition: all 0.5s ease;z-index: 3;display: block;cursor: text;background-color: #fff;}.SubEditorToolbar .is-featured{border-color: transparent;color: #363636;background-color: #efefef;}.SubEditorToolbar .se-dropdown-content .se-dropdown-item > * {white-space:  nowrap;margin : 0}.SubEditorToolbar .se-dropdown-trigger{position: relative;}.SubEditorToolbar .se-dropdown-content.horizontal {display: flex;flex-wrap: nowrap;align-items: center;justify-content: flex-start;}.SubEditorToolbar > .se-button:hover, .SubEditorToolbar .se-dropdown-trigger .se-button:hover, .SubEditorToolbar .se-dropdown-content .se-dropdown-item.hover:hover,.SubEditorToolbar .se-dropdown-content .se-button.se-ToolbarItem:hover{background-color: #e0e0e0;}.SubEditorToolbar .se-dropdown-content .se-button.se-dropdown-item.borderbottom{border-bottom: 1px solid #dbdbdb;border-radius: 0px;}.SubEditorToolbar >.se-tips{z-index: 9999;position: absolute;top: -1.6em;left: 0px;line-height: 1.2em;display: none;padding: 2px 10px;border: 1px solid #dbdbdb;background: #fff;white-space: nowrap;pointer-events: none;user-select: none;}.SubEditorToolbar .se-Shadow {position:absolute;top:0;left:0;width:100%;height:100%;background-color: rgba(255,255,255,.6);z-index: 100;display: none;}.SubEditorToolbar.EnableShadow .se-Shadow{display: block;}.SubEditorToolbar .se-ToolbarItem.AboveShadow {z-index: 110;}.se-ToolbarItem.seperator {width:1px;height:100%;background-color: #dbdbdb;margin:0px;padding:0;border:none;cursor: default;transition: none;}.se-ToolbarItem.nextline {width:100%;height:1px;background-color: #dbdbdb;margin:0px;padding:0;border:none;cursor: default;transition: none;}.se-ToolbarItem.spacer {   cursor: default;transition: none;}.SubEditorToolbar > .se-button.se-ToolbarItem.spacer:hover{background-color: transparent;}.ToolbarTable td{padding-left: 5px;padding-right: 5px;width:10px; height:10px;border:1px solid #dbdbdb;margin:1px;}.ToolbarTable td.active,.ToolbarTable td:hover{background-color: #e0e0e0;}.ToolbarTable .title{text-align: center;font-size: 12px}.SubEditorDialog {box-sizing: border-box;align-items: center;display: none;flex-direction: column;justify-content: center;overflow: hidden;position: fixed;}.SubEditorDialog.is-active {display: flex;}.SubEditorDialog {z-index: 10000;}.SubEditorDialog .background {box-sizing: border-box;background-color: rgba(10,10,10,.6);}.background {bottom: 0;left: 0;position: absolute;right: 0;top: 0;}.SubEditorDialog .card {box-shadow: 0 7px 8px -4px rgba(0,0,0,.2), 0 13px 19px 2px rgba(0,0,0,.14), 0 5px 24px 4px rgba(0,0,0,.12);}.card {display: flex;flex-direction: column;max-height: calc(100vh - 40px);overflow: hidden;}.card, .content {box-sizing: border-box;margin: 0 20px;position: relative;width: 100%;}.card-title {color: #363636;flex-grow: 1;flex-shrink: 0;font-size: 1.5rem;line-height: 1;}.delete, .close {user-select: none;background-color: rgba(10,10,10,.2);border: 0;border-radius: 290486px;cursor: pointer;pointer-events: auto;display: inline-block;flex-grow: 0;flex-shrink: 0;font-size: 0;height: 20px;max-height: 20px;max-width: 20px;min-height: 20px;min-width: 20px;outline: 0;position: relative;vertical-align: top;width: 20px;}.card-head, .card-foot {box-sizing: border-box;border: none;background: #fff;}.card-head {border-top-left-radius: 6px;border-top-right-radius: 6px;}.card-foot, .card-head {align-items: center;display: flex;flex-shrink: 0;justify-content: flex-start;padding: 20px;position: relative;}.card-foot {justify-content: flex-end;border-bottom-left-radius: 6px;border-bottom-right-radius: 6px;}.card-body {background-color: #fff;flex-grow: 1;flex-shrink: 1;overflow: auto;padding: 20px;display: block;}.SubEditorDialog .button{user-select: none;align-items: center;border: 1px solid transparent;box-shadow: none;display: inline-flex;font-size: 1rem;height: 2.25em;justify-content: flex-start;line-height: 1.5;padding: calc(.375em - 1px) calc(.625em - 1px);position: relative;vertical-align: top;background-color: #fff;border-color: transparent;border-width: 1px;color: #363636;cursor: pointer;justify-content: center;text-align: center;white-space: nowrap;border-radius: 3px;text-transform: uppercase;font-weight: 400;box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);transition: box-shadow 280ms cubic-bezier(.4,0,.2,1),background-color 300ms ease;position: relative;overflow: hidden;transform: translate3d(0,0,0);}.button.is-info, .button.is-info.is-hovered, .button.is-info:hover {border-color: transparent;color: #fff;}.button.is-info {background-color: #29b6f6;}.card-foot .button:not(:last-child) {margin-right: 10px;}@media screen and (min-width: 769px), print {.card, .body {    margin: 0 auto;    max-height: calc(100vh - 40px);    width: 100vw - 40px;}}.SubEditorToolbar .se-dropdown-content .uploadcontainer{position: relative;border: dashed 2px #bdbdbd;border-radius: 3px;width:250px;min-height: 100px;text-align: center;}.SubEditorToolbar .se-dropdown-content .uploadcontainer strong{position:absolute;top:50%;transform: translateY(-50%);display: block;width: 100%;text-align: center;}.SubEditorToolbar .se-dropdown-content .uploadcontainer input{position: absolute;top:0;left:0;width: 100%;height: 100%;opacity: 0;}.FileTileImageGridContainer {max-height: calc(100vh - 140px);margin-bottom:0px;position:relative;overflow-y: auto;}.FileTileImageGridFooter {width: 100%;padding-top: 5px;border-top:#ccc 1px solid;}.FileTileImageGridPagination {justify-content: center;margin-bottom: 0;margin-top: 0;align-items: center;display: flex;text-align: center;border-bottom:none;}.FileTileImageGridPagination > * {padding: 0 0.75em;white-space: nowrap;border: #dbdbdb 1px solid;color: #363636;font-size: 1em;justify-content: center;margin: 1px 5px;text-align: center;-webkit-appearance: none;line-height: 28px;height: 28px; } .FileTileImageGridPagination span.total {border:none;padding: 0;margin-left: 0; } .FileTileImageGridPagination input.current {width: 2.5em;border: none;text-align: center; } .FileTileImageGridPagination input.keyword {width: 6em; } .FileTileImageGridPagination > .se-button {border-radius: 9999px;border: #dbdbdb 1px solid;width: 30px; }.FileTileImageGrid {margin-top:18px;display: flex;flex-wrap: wrap;width:100%;min-width: 640px;max-height: calc(100vh - 140px);overflow-y: visible;}.FileTileImageGrid button {display: inline-block;margin-bottom: 8px;width: calc(20% - 9px);text-decoration: none;margin-right: 8px;padding:5px;background: #ffffff;cursor: pointer;user-select: none;border: 1px solid #eee;min-width: 55px;}.FileTileImageGrid button.upload {position:relative;cursor: pointer;}.FileTileImageGrid button.upload input {position: absolute;width: 100%;height: 100%;top: 0;left: 0;opacity: 0;}/* 4 per row */.FileTileImageGrid a:nth-of-type(5n) {margin-right: 0;}.FileTileImageGrid button > figure {position: relative;width: 100%;padding-top: 100%;margin:0;}.FileTileImageGrid button > figure > figure {position:  absolute;top: 0;left: 0;bottom: 0;right: 0;margin:0;overflow:hidden;}.FileTileImageGrid img{position:absolute;top : 0;left:0;min-width:100%;min-height:100%;width:100%;max-height:100%;border:none;}.FileTileImageGrid figure .text{text-align: center;word-break: break-all;margin: 0;position: absolute;top: 50%;transform: translateY(-50%);display: block;width: 100%;}.FileTileImageGrid button:hover {border: 1px solid #ccc;}.FileTileImageGrid .caption {display:block;margin-top: 6px;max-height:2.2em;overflow: hidden;text-align: center;font-size: 0.7em;}@media screen and (max-width: 768px){.FileTileImageGrid {max-width: 320px;min-width: 320px;}.FileTileImageGrid button {width: calc(25% - 6px);}.FileTileImageGrid button:nth-of-type(2n) {margin-right: 8px;}.FileTileImageGrid button:nth-of-type(5n) {margin-right: 8px;}.FileTileImageGrid button:nth-of-type(4n) {margin-right: 0;}}#dropdown-menu-color .se-dropdown-content .padding > div,#dropdown-menu-background .se-dropdown-content .padding > div {display: flex;}#dropdown-menu-color .se-dropdown-content .padding > div > *,#dropdown-menu-background .se-dropdown-content .padding > div > * {flex-grow: 1;flex-shrink: 1;border-spacing: 0;}#dropdown-menu-color table,#dropdown-menu-background table {flex-grow: 1;flex-shrink: 1;border-spacing: 0;}#dropdown-menu-color table td div,#dropdown-menu-background table td div {cursor:pointer;width:16px;height:16px;padding: 2px;border: 1px solid #dbdbdb;}#dropdown-menu-color table td div:hover,#dropdown-menu-background table td div:hover{border-color:#999;}";var gn=(e,n=100)=>{let t;return(...o)=>{clearTimeout(t),t=setTimeout(()=>e(...o),n)}},Ie=gn;var We=q(Ze()),fe=q(Ue());function Cn(e,n){let t={},r=0,o=0,a;for(r=0,a=e.attributes,o=a.length;r<o;r++){let l=a[r].nodeName||a[r].name,s=a[r].value;!s||(t[l]=s,s!==n.getAttribute(l)&&n.setAttribute(l,s))}for(r=n.attributes.length-1,a=n.attributes;r>=0;r--){let l=a[r].nodeName||a[r].name;!a[r].value||typeof t[l]=="undefined"&&n.removeAttribute(l)}}function F(e,n,t=!0){if(e.nodeType===3&&n.nodeType===3){e.textContent!==n.textContent&&(n.textContent=e.textContent);return}if(e.nodeType!==n.nodeType||e.nodeName!==n.nodeName){n.replaceWith(e.cloneNode(!0));return}if(t||Cn(e,n),(!n.childNodes||n.childNodes.length===0)&&e.childNodes&&e.childNodes.length!==0){Array.from(e.childNodes).forEach(r=>{n.appendChild(r.cloneNode(!0))});return}for(Array.from(e.childNodes).forEach((r,o)=>{if(typeof n.childNodes[o]=="undefined"){n.appendChild(r.cloneNode(!0));return}if(r.nodeType!==n.childNodes[o].nodeType)n.childNodes[o].replaceWith(r.cloneNode(!0));else if(r.nodeType===3){n.childNodes[o].textContent!==r.textContent&&(n.childNodes[o].textContent=r.textContent);return}else F(r,n.childNodes[o],!1)});n.lastChild&&n.childNodes.length>e.childNodes.length;)n.removeChild(n.lastChild)}var ee=q(ge()),be=class{constructor(n){this.entryIndex=0;this.entryList=[];this.entryChangeList=[];this.lastContentStr=null;this.id=0;this.counter=-1;this.id=++be.HistoryInstanceCounter,this.contentContainer=n,this.lastContentDom=document.createElement(n.tagName)}KeyCounter(){return++this.counter}Undo(){if(this.entryList.length===0||this.entryIndex===0)return null;this.entryIndex=this.entryIndex-1;let n="";for(let t=0;t<=this.entryIndex;t++)n=(0,fe.default)(n,this.entryList[t].delta);return this.lastContentStr=n,this.lastContentDom.innerHTML=n,F(this.lastContentDom,this.contentContainer),ee.default.restore(this.contentContainer,this.entryList[this.entryIndex].selection),{key:this.KeyCounter(),change:this.entryList[this.entryIndex],content:n}}Redo(){if(this.entryIndex+1>=this.entryList.length)return null;this.entryIndex=this.entryIndex+1;let n=this.entryList[this.entryIndex],t="";for(let r=0;r<=this.entryIndex;r++)t=(0,fe.default)(t,this.entryList[r].delta);return this.lastContentStr=t,this.lastContentDom.innerHTML=t,F(this.lastContentDom,this.contentContainer),ee.default.restore(this.contentContainer,n.selection),{key:this.KeyCounter(),change:n,content:this.contentContainer.innerHTML}}Next(){if(!this.contentContainer||this.lastContentStr===this.contentContainer.innerHTML)return null;this.entryList.length>this.entryIndex+1&&this.entryList.splice(this.entryIndex+1,this.entryList.length-this.entryIndex-1);let n=(0,We.default)(this.lastContentStr||"",this.contentContainer.innerHTML||"");return this.entryList.push({delta:n,selection:ee.default.saveSlim(this.contentContainer)}),this.entryIndex=this.entryList.length-1,this.lastContentStr=this.contentContainer.innerHTML,F(this.contentContainer,this.lastContentDom),{key:this.KeyCounter(),change:this.entryList[this.entryList.length-1],content:this.contentContainer.innerHTML}}},he=be;he.HistoryInstanceCounter=0;var Xe=he;var et=q(Ce());var ne=class{constructor(n){this.events={onKeyDown:[],onKeyUp:[],onClick:[],onCommand:[],onFeatureChange:[],onPaste:[],onBlur:[],onBeforeChange:[],onFullscreenChange:[]};this.editor=n}getEvents(){return this.events}trigger(n,t,r){var o;if(typeof this.events[n]!="undefined"){r||(r=[]);for(let a=0,l=this.events[n].length;a<l;a++){if(["registerUI","registerSvg","registerLanguage"].indexOf(n)!==-1){C.presetSvg(this.events[n][a].callback(this.editor));continue}if(n==="registerCss"){C.pluginCSS=Object.assign(C.pluginCSS,this.events[n][a].callback(this.editor));continue}if(n==="registerToolbarItem"){(o=this.editor.toolbar)==null||o.registerPluginItem(this.events[n][a].callback(this.editor));continue}if((n==="onKeyDown"||n==="onKeyUp")&&this.events[n][a].target.length>0){let s=!1;if(this.events[n][a].target.forEach(d=>{(0,et.default)(d,r[1])&&(s=!0)}),!s)continue}else if(this.events[n][a].target&&this.events[n][a].target.length>0&&!this.events[n][a].target.includes(t))continue;n!=="onFeatureChange"&&this.editor.handleFeature(),this.events[n][a].callback.apply(this,r)}}}register(n){n.forEach(t=>{!t.callback||!t.event||(typeof this.events[t.event]=="undefined"&&(this.events[t.event]=[]),this.events[t.event].includes(t)||this.events[t.event].push(t))})}unregister(n){n.forEach(t=>{if(!(!t.callback||!t.event)){for(let r=this.events[t.event].length-1,o=0;r>=o;r--)if(this.events[t.event][r]===t){this.events[t.event].splice(r,1);break}}})}};var tt=class{constructor(){this.path=[];this.pathNode=[];this.node=void 0;this.nodeName="";this.formatEL="";this.color="";this.background="";this.indent="";this.align="";this.bold=!1;this.italic=!1;this.underline=!1;this.strikethrough=!1;this.subscript=!1;this.superscript=!1;this.a={href:"",target:"",node:void 0};this.img={src:"",width:"",height:"",node:void 0};this.video=void 0;this.audio=void 0}};function j(e,n){let t={};return!e||!e.style?t:((e.getAttribute("style")||"").split(";").forEach(o=>{if(!o.trim())return;let a=o.indexOf(":");if(a===-1)return;let l=[o.substring(0,a).trim(),(o.substring(a+1)||"").trim()];t[l[0]]=l[1],l[0]==="background"&&l[1].indexOf("url(")===0&&(t[l[0]]=e.style.background)}),n?t[n]||"":t)}function xn(e,n){let t=new tt;if(!e||!n)return t;let r={},o={};t.node=e.nodeType===Node.TEXT_NODE?e.parentElement:e,t.nodeName=t.node.nodeName;let a=t.node;for(;a&&a!==n;){t.path.push(a.nodeName),t.pathNode.push(a);let d=j(a);Object.keys(d).forEach(i=>{typeof r[i]=="undefined"&&(r[i]=d[i])}),a=a.parentElement}let l=["P","H1","H2","H3","H4","H5","H6","CODE","PRE"],s="";for(let d=0;d<t.path.length;d++)if(s===""&&l.indexOf(t.path[d])!==-1){s=t.path[d];break}if(s==="PRE"&&(s="CODE"),t.formatEL=s,t.bold=t.path.indexOf("STRONG")!==-1,t.italic=t.path.indexOf("EM")!==-1,t.underline=t.path.indexOf("U")!==-1,t.strikethrough=t.path.indexOf("STRIKE")!==-1,t.subscript=t.path.indexOf("SUB")!==-1,t.superscript=t.path.indexOf("SUP")!==-1,t.path.indexOf("A")!==-1){let d=t.pathNode[t.path.indexOf("A")];t.a={href:d.getAttribute("href")||"",target:d.getAttribute("target")||"",node:d}}if(t.path[0]==="IMG"){let d=t.pathNode[0],i=j(d);t.img={src:d.getAttribute("src")||"",width:i.width||"",height:i.height||"",node:d}}if(t.path[0]==="VIDEO"){let d=t.pathNode[0],i=j(d);t.video={controls:d.hasAttribute("controls"),autoplay:d.hasAttribute("autoplay"),width:i.width||"",height:i.height||"",node:d,sources:[]},d.querySelectorAll("source").forEach(c=>{var u;(u=t.video)==null||u.sources.push({src:c.getAttribute("src")||"",type:c.getAttribute("type")||""})})}if(t.path[0]==="AUDIO"){let d=t.pathNode[0],i=j(d);t.video={controls:d.hasAttribute("controls"),autoplay:d.hasAttribute("autoplay"),width:i.width||"",height:i.height||"",node:d,sources:[]},d.querySelectorAll("source").forEach(c=>{var u;(u=t.video)==null||u.sources.push({src:c.getAttribute("src")||"",type:c.getAttribute("type")||""})})}return t.node&&t.node!==n&&(o=j(t.node),t.color=o.color?o.color:"",t.background=o["background-color"]?o["background-color"]:"",t.indent=o["padding-left"]?o["padding-left"]:"",t.align=o["text-align"]?o["text-align"]:""),t}var nt=xn;function Ln(e){return parseInt(e.getAttribute("colspan")||"1",10)}function An(e){return parseInt(e.getAttribute("rowspan")||"1",10)}function rt(e){let n=0;return Array.from(e.childNodes).forEach(t=>n+=parseInt(t.getAttribute("colspan")||"1",10)),n}function ot(e){let n=0;return Array.from(e.querySelectorAll("tr")).forEach(t=>{let r=rt(t);r>n&&(n=r)}),n}function Nn(e,n=!0,t=!1){let r=ot(e),o=Array.from(n?e.querySelectorAll("tr"):e.querySelectorAll("tbody tr")),a=[];return o.forEach((l,s)=>{typeof a[s]=="undefined"&&(a[s]=[]);let d=Array.from(l.childNodes),i=0;for(;i<r;)for(let c=0,u=d.length;c<u;c++){for(;typeof a[s][i]!="undefined";)i++;let m=d[c],p=m.colSpan,f=m.rowSpan;for(let g=0;g<f;g++)for(let E=0;E<p;E++)typeof a[s+g]=="undefined"&&(a[s+g]=[]),a[s+g][i+E]=t&&g>0?null:m;i+=p}}),a}var at={cellList:Nn,col:ot,rowCol:rt,colSpan:Ln,rowSpan:An};function it(e,n=!1){let o=new DOMParser().parseFromString('<html><head><meta charset="utf-8"></head><body>'+e+"</body></html>","text/html").querySelector("body");return o?n?o.innerHTML:o.childNodes:null}function Hn(e,n){Array.from(it(e)).forEach(t=>n.appendChild(t))}function we(e,n){if(!n||!n.ownerDocument||!e)return 4;var t=n.ownerDocument.createRange();try{t.selectNode(n)}catch(u){t.selectNodeContents(n)}let r=e.compareBoundaryPoints(Range.START_TO_START,t),o=e.compareBoundaryPoints(Range.END_TO_END,t),a=e.compareBoundaryPoints(Range.START_TO_END,t),l=e.compareBoundaryPoints(Range.END_TO_START,t),s=a===-1,d=l===1,i=r!==1,c=o!==-1;return s||d?-1:i&&c?3:!i&&!c?2:!i&&c?0:i&&!c?1:4}function st(e,n,t=!0){return t?[0,1,3].indexOf(we(e,n))!==-1:we(e,n)===3}function Mn(e){let n=[],t=e.startContainer,r=e.endContainer,o=!1;for(let a=0,l=e.commonAncestorContainer.childNodes.length;a<l&&!e.commonAncestorContainer.childNodes.item(a).contains(r);a++)o&&n.push(e.commonAncestorContainer.childNodes.item(a)),e.commonAncestorContainer.childNodes.item(a).contains(t)&&(o=!0);return n}function kn(e){let n=e.commonAncestorContainer,t=e.startContainer,r=e.startOffset,o=e.endContainer,a=e.endOffset;e.startContainer.childNodes.length&&e.startContainer.childNodes[e.startOffset]&&(t=e.startContainer.childNodes[e.startOffset],r=0),o.nodeType!==Node.TEXT_NODE&&(o=e.endContainer.childNodes[e.endOffset],a=0);let l=!1,s=!1,d=[];if(e.collapsed)return d.push({node:t,startOffset:r,endOffset:a,isVoid:D(t),partial:!1,collapsed:!0}),d;let i=function(c){var u,m;if(!s&&!!n.contains(c))if(c===t?l=!0:c===o&&(s=!0),l&&!c.childNodes.length)if(c===t){let p=r!==0;r===0&&o===t&&o.nodeType===Node.TEXT_NODE&&(p=a!==((u=o.textContent)==null?void 0:u.length)),d.push({node:c,startOffset:r,endOffset:o===t?a:(m=t.textContent)==null?void 0:m.length,isVoid:D(c),partial:p,collapsed:e.collapsed})}else c===o&&c!==t&&o.nodeType===Node.TEXT_NODE&&a!==0?d.push({node:c,startOffset:0,endOffset:a,isVoid:D(c),partial:a<o.textContent.length}):c!==o&&d.push({node:c,isVoid:D(c),partial:!1});else c.childNodes.length&&Array.from(c.childNodes).forEach(p=>i(p))};return i(n),d}function In(e,n){if(n.length===0)return;let t=e.parentNode;!t||(n.forEach(r=>{t.insertBefore(r,e)}),t.removeChild(e))}function lt(e){if(e.length!==0)for(let n=e.length-1;n>=0;n--){let t=e[n];if(!t||t.nodeType!==Node.TEXT_NODE)continue;let r=t.previousSibling;t&&r&&r.nodeType===Node.TEXT_NODE&&(r.textContent+=t.textContent||"",t.parentNode.removeChild(t))}}function On(e){if(!e)return;let n=[],t=r=>{for(var o=0;o<r.childNodes.length;o++){var a=r.childNodes[o];a.nodeType!==Node.TEXT_NODE&&a.childNodes?t(a):n.push(a)}};Array.from(e.childNodes).forEach(r=>{r.nodeType===Node.TEXT_NODE?n.push(r):r.childNodes&&t(r)}),lt(n)}function Rn(e,n){var t;!e||((t=e.parentElement)==null||t.insertBefore(n,e),n.appendChild(e))}function Te(e,n=void 0){if(!e)return;let t=e.parentNode;if(!(!t||e===n)){for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}}function Dn(e,n,t,r){let o=[];if(e.length===0)return;let a=(d,i)=>typeof i=="string"?d.tagName.toLowerCase()===i:i.indexOf(d.tagName.toLowerCase())!==-1,l=(d,i)=>!d||st(d,i,!1),s=typeof n=="string"?n:n.join(",");e.forEach(d=>{d.nodeType!==3&&(Array.prototype.forEach.call(d.children,i=>{i.querySelectorAll(s).forEach(c=>{a(c,n)&&l(r,c)&&o.push(c)}),a(i,n)&&l(r,i)&&o.push(i)}),a(d,n)&&l(r,d)&&o.push(d))}),o.forEach(d=>Te(d,t))}function dt(e,n){if(e===n)return!0;let t=Object.keys(e),r=Object.keys(n);if(t.sort(),r.sort(),t.join("_")!==r.join("_"))return!1;let o=Object.values(e),a=Object.values(n);return o.sort(),a.sort(),o.join("_")===a.join("_")}function Pn(e,n){var o,a,l,s,d,i;if(!e||e.nodeType===3)return;let t=e.querySelectorAll(n),r=t.length;if(!(!t||r===0)){for(let c=r-1;c>=0;c--){let u=t[c],m=u.previousElementSibling;if(!u.hasChildNodes()&&u.textContent===""){(o=u.parentNode)==null||o.removeChild(u);continue}m&&m.nodeName.toLowerCase()===n&&(m.nodeType===3?(m.textContent+=u.textContent||"",(a=u.parentNode)==null||a.removeChild(u)):dt(W(m),W(u))&&(ct(m,u),(l=u.parentNode)==null||l.removeChild(u)))}if(t=e.querySelectorAll(n+" > "+n),r=t.length,!(!t||r===0)){for(let c=r-1;c>=0;c--)if(t[c].parentElement&&((s=t[c].parentElement)==null?void 0:s.nodeName.toLowerCase())===n&&dt(W(t[c].parentElement),W(t[c]))){for(let u=0,m=t[c].childNodes.length;u<m;u++)(d=t[c].parentElement)==null||d.insertBefore(t[c].childNodes[u],t[c]);(i=t[c].parentNode)==null||i.removeChild(t[c])}}}}function W(e,n){let t={};return!e||!e.style?t:((e.getAttribute("style")||"").split(";").forEach(o=>{if(!o.trim())return;let a=o.indexOf(":");if(a===-1)return;let l=[o.substring(0,a).trim(),(o.substring(a+1)||"").trim()];t[l[0]]=l[1],l[0]==="background"&&l[1].indexOf("url(")===0&&(t[l[0]]=e.style.background)}),n?t[n]||"":t)}function Vn(e,n,t){let r="";(e.getAttribute("style")||"").split(";").forEach(a=>{if(!a.trim())return;let l=a.split(":"),s=l[0].trim();s!==n&&(r+=s+":"+l[1].trim()+";")}),t&&(r+=n+":"+t+";"),r?e.setAttribute("style",r):e.removeAttribute("style")}function Bn(e,n,t){let r=[];Array.from(e.querySelectorAll("*")).forEach(o=>{if(o.nodeType===3)return;let a="";if((o.getAttribute("style")||"").split(";").forEach(s=>{if(!s.trim())return;let d=s.split(":"),i=d[0].trim(),c=d[1].trim();i!==n&&t!==c&&(a+=i+":"+c+";")}),a===""&&o.nodeName.toLowerCase()==="span"){r.push(o);return}o.setAttribute("style",a)}),r.length!==0&&r.forEach(o=>{Te(o)})}function qn(e,n){if(e===n||!e.contains(n))return;let t=null;for(let r=n.parentNode;e!=r;r=t){let o=document.createElement(r.nodeName);for(;n.nextSibling;)o.appendChild(n.nextSibling);t=r.parentNode,t.insertBefore(o,r.nextSibling),t.insertBefore(n,o)}}function Fn(e){let n=!0;return e.forEach(t=>{!_(t)&&!Se(t)&&(n=!1)}),n}function _n(e){let n=!0;return e.forEach(t=>{_(t)||(n=!1)}),n}function Zn(e){return _(e)||Se(e)}function _(e){return e&&e.nodeType===Node.TEXT_NODE||D(e)}function Gn(e){return e&&e.nodeType===Node.TEXT_NODE}function D(e){return e&&["EMBED","COL","BASE","AREA","IMG","BR","HR","LINK","META","PARAM","SOURCE","TRACK","WBR"].indexOf(e.nodeName)!==-1}function Se(e){return e&&["STRONG","U","EM","I","STRIKE","SUB","SUP","SPAN"].indexOf(e.nodeName)!==-1}function Un(e){let n=e;for(;n&&n.childNodes&&!(!n.childNodes||n.childNodes.length===0);)n=n.childNodes[0];return n}function zn(e){let n=e;for(;n&&n.childNodes&&!(!n.childNodes||n.childNodes.length===0||n.childNodes.length===1&&D(n.childNodes[0]));)n=n.childNodes[n.childNodes.length-1];return n}function ct(e,n){!e||!n||n.childNodes.length===0||_(e)||Array.from(n.childNodes).forEach(t=>e.appendChild(t))}function Kn(e,n,t){if(!e||!n||!t||t.childNodes.length===0||_(e))return;let r=re(n);if(r!==-1)for(let o=t.childNodes.length-1;o>=0;o--)t.childNodes[o]&&e.insertBefore(t.childNodes[o],e.childNodes[r])}function jn(e,n){if(!e||!n)return;let t=re(n);if(t!==-1)if(t===n.parentNode.childNodes.length-1)for(let r=0,o=e.length;r<o;r++)n.parentNode.appendChild(e[r]);else{let r=n.parentNode.childNodes[t+1];e.forEach(o=>n.parentNode.insertBefore(o,r))}}function re(e){if(!e.parentNode||!e.parentNode.childNodes)return-1;for(let n=0,t=e.parentNode.childNodes.length;n<t;n++)if(e.parentNode.childNodes[n]===e)return n;return-1}function Wn(e,n){let t=e;if(t!==n){if(t.previousSibling)t=t.previousSibling;else if(t.parentNode&&t.parentNode===n)t=n;else if(t.parentNode)for(t=t.parentNode;t!==n&&!t.previousSibling;)t=t.parentNode}return t}function Xn(e,n){let t=[];for(;e&&e!==n;)t.push(e),e=e.parentNode;return t}function Qn(e,n,t){if(!e)return null;if(n){if(n&&X(e,n))return e}else return e.parentNode?e.parentNode:null;let r=e;for(;!X(r,n)&&(!t||r!==t);){if(!r.parentNode)return null;r=r.parentNode}return X(r,n)?r:null}function Yn(e,n){let t=e;if(t!==n){if(t.nextSibling)t=t.nextSibling;else if(t.parentNode&&t.parentNode===n)t=n;else if(t.parentNode)for(t=t.parentNode;t!==n&&!t.nextSibling&&t.parentNode;)t=t.parentNode}return t}function Jn(e){let n=P();return(!n||n.rangeCount===0)&&(e.focus(),n=P()),n||(pt(e),n=P()),n&&n.rangeCount>0?n.getRangeAt(0):!1}function ut(){let e=P();return e&&e.rangeCount>0?e.getRangeAt(0):!1}function P(){return window.getSelection()}function $n(e,n=0){let t=P();t.removeAllRanges();let r=document.createRange();e.nodeType===Node.TEXT_NODE&&(e.textContent||"").length<n+1?(r.setEnd(e,e.textContent.length),r.collapse(!1)):e.nodeType!==Node.TEXT_NODE&&e.childNodes.length<n+1?(r.setEnd(e.parentNode,Math.min(re(e)+1,e.parentNode.childNodes.length)),r.collapse(!1)):(r.setStart(e,n),r.collapse(!0)),t.addRange(r)}function pt(e,n=-1,t=-1){let r=P();if(!r)return;let o=ut();if(r.removeAllRanges(),!(!e&&!o.endContainer)){if(e.parentNode||(e=o.endContainer),n===-1&&e.nodeType===3&&(n=e.textContent.length-1),n===-1&&e.nodeType!==3&&(n=e.childNodes.length-1),e.nodeType===3?r.collapse(e,Math.min(Math.max(n,t,0),e.textContent.length)):X(e,"br")?r.collapse(e):r.collapse(e,Math.min(Math.max(n,t,0),e.childNodes.length)),n===-1&&(r.selectAllChildren(e),r.collapseToEnd()),!r.rangeCount){o=document.createRange(),o.setStart(e,Math.min(Math.max(n,0),e.textContent.length)),o.setEnd(e,Math.min(Math.max(n,t,0),e.textContent.length)),window.getSelection().addRange(o),r=window.getSelection();return}return o=r.getRangeAt(0),n===-1?r.collapseToEnd():(n===0?o.setStart(e,n):o.setStart(e,Math.min(e.childNodes.length?e.childNodes.length:e.textContent.length,n)),t<n&&(t=n),o.setEnd(e,Math.min(e.childNodes.length?e.childNodes.length:e.textContent.length,t))),r}}function er(e,n){let t=-1;return!e||!e.nodeName?t:typeof n=="string"?e&&e.nodeName&&e.nodeName.toString()===n.toUpperCase()?0:-1:n.indexOf(e.nodeName.toString())}function X(e,n){return typeof n=="string"?e&&e.nodeName&&e.nodeName.toString()===n.toUpperCase():e&&n.indexOf(e.nodeName.toString())!==-1}var tr={domFragment:it,appendString2Node:Hn,rangeCompareNode:we,rangeContainsNode:st,selectDeepNodesInRange:kn,nodeReplaceWith:In,nodeTextMerge:lt,nodeTextMergeAll:On,wrapNode:Rn,unwrapNode:Te,unwrapNodes:Dn,mergeTags:Pn,nodeAttrStyle:W,nodeReplaceAttrStyle:Vn,nodeChildRemoveAttrStyle:Bn,nodeIsVoid:D,nodeIsText:Gn,nodeIsTextOrVoid:_,selectNodesBetweenRange:Mn,nodeIsTextInlineOrVoid:Zn,nodesAreTextOrVoid:_n,getSelection:P,getRange:ut,getRangeFocus:Jn,resetSelection:pt,nodeIsInlineFormat:Se,nodesAreTextInlineOrVoid:Fn,nodeNext:Yn,nodeChildFirst:Un,nodeChildLast:zn,nodePrev:Wn,nodeNameCompare:X,nodeNameCompareIndex:er,nodeParentUntil:Xn,nodeParent:Qn,nodeChildInsertBefore:Kn,nodeChildInsertInto:ct,nodePosition:re,nodesInsertAfter:jn,setCaretAt:$n,nodeBreak:qn,table:at},Q=tr;var mt={bold:"bold",italic:"italic",underline:"underline",blockquote:"blockquote",paragraph:"paragraph",Normal:"Normal","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Code:"Code","text color":"text color","background color":"background color","SET TEXT COLOR":"SET COLOR","SET BACKGROUND COLOR":"SET COLOR",fullscreen:"fullscreen","exit fullscreen":"exit fullscreen",table:"table",align:"align","align left":"align left","align center":"align center","align right":"align right","align justify":"align justify","horizontal line":"horizontal line","view source":"view source",strikethrough:"strikethrough",superscript:"superscript",subscript:"subscript",indent:"indent",outdent:"outdent",format:"format","remove format":"remove format",link:"link",url:"URL",text:"TEXT","link target":"TARGET",remove:"REMOVE",insert:"INSERT",update:"UPDATE","open in new tab":" (open in new tab)",list:"list","ordered list":"ordered list","unordered list":"unordered list","remove list":"remove list",image:"image",uploading:"uploading","upload failed":"upload failed","drop or click to upload image":"drop or click to upload image","please select the appropriate file types:":"please select the appropriate file types:","max allowed size per file should be ":"max allowed size per file should be ","max allowed size of all files in total should be ":"max allowed size of all files in total should be ","UPLOADING...":"UPLOADING...","START OVER":"START OVER"};var gt={bold:"\u7C97\u4F53",italic:"\u659C\u4F53",underline:"\u4E0B\u5212\u7EBF",blockquote:"\u5F15\u7528",paragraph:"\u6BB5\u843D",Normal:"\u6B63\u5E38","Heading 1":"\u6807\u9898 1","Heading 2":"\u6807\u9898 2","Heading 3":"\u6807\u9898 3","Heading 4":"\u6807\u9898 4","Heading 5":"\u6807\u9898 5","Heading 6":"\u6807\u9898 6",Code:"\u4EE3\u7801","text color":"\u6587\u5B57\u989C\u8272","background color":"\u80CC\u666F\u989C\u8272","SET TEXT COLOR":"\u8BBE\u7F6E\u6587\u5B57\u989C\u8272","SET BACKGROUND COLOR":"\u8BBE\u7F6E\u80CC\u666F\u989C\u8272",fullscreen:"\u5168\u5C4F","exit fullscreen":"\u9000\u51FA\u5168\u5C4F",table:"\u8868\u683C",align:"\u5BF9\u9F50","align left":"\u9760\u5DE6","align center":"\u7F6E\u4E2D","align right":"\u9760\u53F3","align justify":"\u5DE6\u53F3\u5BF9\u9F50","horizontal line":"\u6C34\u5E73\u7EBF","view source":"\u67E5\u770B\u6E90\u4EE3\u7801",strikethrough:"\u5220\u9664\u7EBF",superscript:"\u4E0A\u6807",subscript:"\u4E0B\u6807",indent:"\u7F29\u8FDB",outdent:"\u51CF\u5C0F\u7F29\u8FDB",format:"\u683C\u5F0F","remove format":"\u5220\u9664\u683C\u5F0F",link:"\u94FE\u63A5",url:"\u7F51\u5740",text:"\u6587\u672C","link target":"\u94FE\u63A5\u76EE\u6807",remove:"\u5220\u9664",insert:"\u63D2\u5165",update:"\u66F4\u65B0","open in new tab":"\uFF08\u5728\u65B0\u6807\u7B7E\u4E2D\u6253\u5F00\uFF09",list:"\u5217\u8868","ordered list":"\u6570\u5B57\u5217\u8868","unordered list":"\u65E0\u5E8F\u5217\u8868","remove list":"\u5220\u9664\u5217\u8868",image:"\u56FE\u7247",uploading:"\u4E0A\u4F20\u4E2D","upload failed":"\u4E0A\u4F20\u5931\u8D25","drop or click to upload image":"\u62D6\u653E\u6216\u6D4F\u89C8\u6587\u4EF6\u4E0A\u4F20","please select the appropriate file types:":"\u8BF7\u9009\u62E9\u9002\u5F53\u7684\u6587\u4EF6\u7C7B\u578B\uFF1A","max allowed size per file should be ":"\u5355\u4E2A\u6587\u4EF6\u5141\u8BB8\u7684\u6700\u5927\u5927\u5C0F\u5E94\u8BE5\u662F ","max allowed size of all files in total should be ":"\u603B\u6587\u4EF6\u7684\u6700\u5927\u5141\u8BB8\u5927\u5C0F\u5E94\u4E3A ","UPLOADING...":"\u4E0A\u4F20\u4E2D...","START OVER":"\u91CD\u65B0\u5F00\u59CB"};var ft={bold:"\u7C97\u9AD4",italic:"\u659C\u9AD4",underline:"\u4E0B\u5283\u7DDA",blockquote:"\u5F15\u7528",paragraph:"\u6BB5\u843D",Normal:"\u6B63\u5E38","Heading 1":"\u6A19\u984C 1","Heading 2":"\u6A19\u984C 2","Heading 3":"\u6A19\u984C 3","Heading 4":"\u6A19\u984C 4","Heading 5":"\u6A19\u984C 5","Heading 6":"\u6A19\u984C 6",Code:"\u4EE3\u78BC","text color":"\u6587\u5B57\u984F\u8272","background color":"\u80CC\u666F\u984F\u8272","SET TEXT COLOR":"\u8A2D\u7F6E\u6587\u5B57\u984F\u8272","SET BACKGROUND COLOR":"\u8A2D\u7F6E\u80CC\u666F\u984F\u8272",fullscreen:"\u5168\u5C4F","exit fullscreen":"\u9000\u51FA\u5168\u5C4F",table:"\u8868\u683C",align:"\u5C0D\u9F4A","align left":"\u9760\u5DE6","align center":"\u7F6E\u4E2D","align right":"\u9760\u53F3","align justify":"\u5DE6\u53F3\u5C0D\u9F4A","horizontal line":"\u6C34\u5E73\u7DDA","view source":"\u67E5\u770B\u6E90\u4EE3\u78BC",strikethrough:"\u522A\u9664\u7DDA",superscript:"\u4E0A\u6A19",subscript:"\u4E0B\u6A19",indent:"\u7E2E\u9032",outdent:"\u6E1B\u5C0F\u7E2E\u9032",format:"\u683C\u5F0F","remove format":"\u522A\u9664\u683C\u5F0F",link:"\u93C8\u63A5",url:"\u7DB2\u5740",text:"\u6587\u672C","link target":"\u93C8\u63A5\u76EE\u6A19",remove:"\u522A\u9664",insert:"\u63D2\u5165",update:"\u66F4\u65B0","open in new tab":"\uFF08\u5728\u65B0\u6A19\u7C64\u4E2D\u6253\u958B\uFF09",list:"\u5217\u8868","ordered list":"\u6578\u5B57\u5217\u8868","unordered list":"\u7121\u5E8F\u5217\u8868","remove list":"\u522A\u9664\u5217\u8868",image:"\u5716\u7247",uploading:"\u4E0A\u50B3\u4E2D","upload failed":"\u4E0A\u50B3\u5931\u6557","drop or click to upload image":"\u62D6\u653E\u6216\u700F\u89BD\u6587\u4EF6\u4E0A\u50B3","please select the appropriate file types:":"\u8ACB\u9078\u64C7\u9069\u7576\u7684\u6587\u4EF6\u985E\u578B\uFF1A","max allowed size per file should be ":"\u55AE\u500B\u6587\u4EF6\u5141\u8A31\u7684\u6700\u5927\u5927\u5C0F\u61C9\u8A72\u662F ","max allowed size of all files in total should be ":"\u7E3D\u6587\u4EF6\u7684\u6700\u5927\u5141\u8A31\u5927\u5C0F\u61C9\u70BA ","UPLOADING...":"\u4E0A\u50B3\u4E2D...","START OVER":"\u91CD\u65B0\u958B\u59CB"};var oe={en:mt,zhCN:gt,zhTW:ft};var nr=(e,n,t)=>"#"+[e,n,t].map(r=>{if(r==="")return"00";let o=parseInt(r,10).toString(16);return o.length===1?"0"+o:o}).join(""),Y=e=>{if(e.indexOf("rgb(")===-1)return e;let n=e.replace("rgb(","").replace(")","").split(",");return nr(n[0],n[1],n[2])};function ht(e){let n=t=>{var o,a;let r=t==="color"?["color",C.svgList.text_color,((o=e.feature)==null?void 0:o.color)||"",e.ln("text color"),e.ln("SET COLOR"),"#000000"]:["background",C.svgList.background_color,((a=e.feature)==null?void 0:a.background)||"",e.ln("background color"),e.ln("SET BACKGROUND COLOR"),"#ffffff"];return'<div class="se-ToolbarItem se-dropdown"><div class="se-dropdown-trigger"><button class="se-button"  data-command="'+r[0]+'" data-tips="'+r[3]+'" id="btn-dropdown-menu-'+r[0]+'" aria-haspopup="true" aria-controls="dropdown-menu-'+r[0]+'"><span></span><span class="se-icon">'+r[1]+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-'+r[0]+'" role="menu"><div class="se-dropdown-content control"><div class="padding"><table><tbody><tr><td><div style="background-color: rgb(0, 0, 0);"></div></td><td><div style="background-color: rgb(68, 68, 68);"></div></td><td><div style="background-color: rgb(102, 102, 102);"></div></td><td><div style="background-color: rgb(153, 153, 153);"></div></td><td><div style="background-color: rgb(204, 204, 204);"></div></td><td><div style="background-color: rgb(238, 238, 238);"></div></td><td><div style="background-color: rgb(243, 243, 243);"></div></td><td><div style="background-color: rgb(255, 255, 255);"></div></td></tr><tr><td><div style="background-color: rgb(255, 0, 0);"></div></td><td><div style="background-color: rgb(255, 153, 0);"></div></td><td><div style="background-color: rgb(255, 255, 0);"></div></td><td><div style="background-color: rgb(0, 255, 0);"></div></td><td><div style="background-color: rgb(0, 255, 255);"></div></td><td><div style="background-color: rgb(0, 0, 255);"></div></td><td><div style="background-color: rgb(153, 0, 255);"></div></td><td><div style="background-color: rgb(255, 0, 255);"></div></td></tr><tr><td><div style="background-color: rgb(244, 204, 204);"></div></td><td><div style="background-color: rgb(252, 229, 205);"></div></td><td><div style="background-color: rgb(255, 242, 204);"></div></td><td><div style="background-color: rgb(217, 234, 211);"></div></td><td><div style="background-color: rgb(208, 224, 227);"></div></td><td><div style="background-color: rgb(207, 226, 243);"></div></td><td><div style="background-color: rgb(217, 210, 233);"></div></td><td><div style="background-color: rgb(234, 209, 220);"></div></td></tr><tr><td><div style="background-color: rgb(234, 153, 153);"></div></td><td><div style="background-color: rgb(249, 203, 156);"></div></td><td><div style="background-color: rgb(255, 229, 153);"></div></td><td><div style="background-color: rgb(182, 215, 168);"></div></td><td><div style="background-color: rgb(162, 196, 201);"></div></td><td><div style="background-color: rgb(159, 197, 232);"></div></td><td><div style="background-color: rgb(180, 167, 214);"></div></td><td><div style="background-color: rgb(213, 166, 189);"></div></td></tr><tr><td><div style="background-color: rgb(224, 102, 102);"></div></td><td><div style="background-color: rgb(246, 178, 107);"></div></td><td><div style="background-color: rgb(255, 217, 102);"></div></td><td><div style="background-color: rgb(147, 196, 125);"></div></td><td><div style="background-color: rgb(118, 165, 175);"></div></td><td><div style="background-color: rgb(111, 168, 220);"></div></td><td><div style="background-color: rgb(142, 124, 195);"></div></td><td><div style="background-color: rgb(194, 123, 160);"></div></td></tr><tr><td><div style="background-color: rgb(204, 0, 0);"></div></td><td><div style="background-color: rgb(230, 145, 56);"></div></td><td><div style="background-color: rgb(241, 194, 50);"></div></td><td><div style="background-color: rgb(106, 168, 79);"></div></td><td><div style="background-color: rgb(69, 129, 142);"></div></td><td><div style="background-color: rgb(61, 133, 198);"></div></td><td><div style="background-color: rgb(103, 78, 167);"></div></td><td><div style="background-color: rgb(166, 77, 121);"></div></td></tr><tr><td><div style="background-color: rgb(153, 0, 0);"></div></td><td><div style="background-color: rgb(180, 95, 6);"></div></td><td><div style="background-color: rgb(191, 144, 0);"></div></td><td><div style="background-color: rgb(56, 118, 29);"></div></td><td><div style="background-color: rgb(19, 79, 92);"></div></td><td><div style="background-color: rgb(11, 83, 148);"></div></td><td><div style="background-color: rgb(53, 28, 117);"></div></td><td><div style="background-color: rgb(116, 27, 71);"></div></td></tr><tr><td><div style="background-color: rgb(102, 0, 0);"></div></td><td><div style="background-color: rgb(120, 63, 4);"></div></td><td><div style="background-color: rgb(127, 96, 0);"></div></td><td><div style="background-color: rgb(39, 78, 19);"></div></td><td><div style="background-color: rgb(12, 52, 61);"></div></td><td><div style="background-color: rgb(7, 55, 99);"></div></td><td><div style="background-color: rgb(32, 18, 77);"></div></td><td><div style="background-color: rgb(76, 17, 48);"></div></td></tr></tbody></table><div><input class="Hex" type="color" value="'+(Y(r[2])||r[5])+'"><button class="se-button">'+r[4]+"</button></div></div></div></div></div>"};return{color:{command:"color",svg:C.svgList.text_color,tips:e.ln("text color"),dropdowncontent:n("color"),onRender:(t,r)=>{var a,l;let o=r.querySelector(".se-dropdown-menu");(a=r.querySelector(".se-dropdown-trigger > button"))==null||a.addEventListener("click",()=>{var s,d,i,c,u;o.classList.contains("is-active")||(t.handleFeature(),r.querySelector("input").value=Y(((d=(s=t.feature)==null?void 0:s.node)==null?void 0:d.style.color)||((u=(c=(i=t.feature)==null?void 0:i.node)==null?void 0:c.parentElement)==null?void 0:u.style.color)||""))}),r.querySelectorAll("td > div").forEach(s=>{s.addEventListener("click",d=>{r.querySelector("input").value=Y(d.currentTarget.style.backgroundColor)})}),(l=r.querySelector(".se-dropdown-content button"))==null||l.addEventListener("click",s=>{var d,i;return s.preventDefault(),s.stopPropagation(),(d=t.toolbar)==null||d.hideDropdown(),t.command("color",[(i=r.querySelector("input"))==null?void 0:i.value]),!1})}},backgroundcolor:{command:"backgroundcolor",svg:C.svgList.background_color,tips:"background color",dropdowncontent:n("background"),onRender:(t,r)=>{var a,l;let o=r.querySelector(".se-dropdown-menu");(a=r.querySelector(".se-dropdown-trigger > button"))==null||a.addEventListener("click",()=>{var s,d,i,c,u;o.classList.contains("is-active")||(t.handleFeature(),r.querySelector("input").value=Y(((d=(s=t.feature)==null?void 0:s.node)==null?void 0:d.style.backgroundColor)||((u=(c=(i=t.feature)==null?void 0:i.node)==null?void 0:c.parentElement)==null?void 0:u.style.backgroundColor)||""))}),r.querySelectorAll("td > div").forEach(s=>{s.addEventListener("click",d=>{r.querySelector("input").value=Y(d.currentTarget.style.backgroundColor)})}),(l=r.querySelector(".se-dropdown-content button"))==null||l.addEventListener("click",s=>{var d,i;return s.preventDefault(),s.stopPropagation(),(d=t.toolbar)==null||d.hideDropdown(),t.command("backgroundcolor",[(i=r.querySelector("input"))==null?void 0:i.value]),!1})}}}}function bt(e){return{blockquote:{command:"blockquote",svg:C.svgList.blockquote,tips:"blockquote"}}}function Et(e){let n={paragraph:{command:"p",svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem" data-command="p" data-featureformat="P" data-tips="paragraph"><span class="se-icon">'+C.svgList.p+"</span></span>"},blockquote:{command:"blockquote",svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem" data-command="blockquote" data-featureformat="BLOCKQUOTE" data-tips="blockquote"><span class="se-icon">'+C.svgList.blockquote+"</span></span>"},code:{command:"code",svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem" data-command="code" data-featureformat="CODE" data-tips="code"><span class="se-icon">'+C.svgList.code+"</span></span>"},format:{command:"format",svg:C.svgList.p,tips:"format",dropdowncontent:'<div class="se-ToolbarItem se-dropdown" data-tips="'+e.ln("paragraph")+'"><div class="se-dropdown-trigger"><button class="se-button"  data-command="paragraph" data-tips="paragraph" id="btn-dropdown-menu-paragraph" aria-haspopup="true" aria-controls="dropdown-menu-paragraph"><span></span><span class="se-icon" aria-hidden="true">'+C.svgList.p+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-paragraph" role="menu"><div class="se-dropdown-content horizontal"  aria-hidden="true"><span class="se-button se-ToolbarItem" data-command="p" data-featureformat="P" data-tips="Normal"><span class="se-icon">'+C.svgList.p+'</span></span><span class="se-button se-ToolbarItem" data-command="h1" data-featureformat="H1" data-tips="Heading 1"><span class="se-icon">'+C.svgList.h1+'</span></span><span class="se-button se-ToolbarItem" data-command="h2" data-featureformat="H2" data-tips="Heading 2"><span class="se-icon">'+C.svgList.h2+'</span></span><span class="se-button se-ToolbarItem" data-command="h3" data-featureformat="H3" data-tips="Heading 3"><span class="se-icon">'+C.svgList.h3+'</span></span><span class="se-button se-ToolbarItem" data-command="h4" data-featureformat="H4" data-tips="Heading 4"><span class="se-icon">'+C.svgList.h4+'</span></span><span class="se-button se-ToolbarItem" data-command="h5" data-featureformat="H5" data-tips="Heading 5"><span class="se-icon">'+C.svgList.h5+'</span></span><span class="se-button se-ToolbarItem" data-command="h6" data-featureformat="H6" data-tips="Heading 6"><span class="se-icon">'+C.svgList.h6+'</span></span><span class="se-button se-ToolbarItem" data-command="blockquote" data-featureformat="BLOCKQUOTE" data-tips="blockquote"><span class="se-icon">'+C.svgList.blockquote+'</span></span><span class="se-button se-ToolbarItem" data-command="code" data-featureformat="CODE" data-tips="Code"><span class="se-icon">'+C.svgList.code+"</span></span></div></div></div>",onRender:(t,r)=>{r.querySelectorAll(".se-button").forEach(o=>{o.addEventListener("click",a=>{let l=o.getAttribute("data-command");t.command(l,[])})})}}};for(let t=1;t<7;t++)n["h"+t]={command:"h"+t,svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem" data-command="h'+t+'" data-featureformat="H'+t+'" data-tips="Heading '+t+'"><span class="se-icon">'+C.svgList["h"+t]+"</span></span>"};return n}function vt(e){return{fullscreen:{command:"fullscreen",svg:C.svgList.fullscreen,tips:"fullscreen",onRender:(n,t)=>{t.setAttribute("data-value","1"),t.addEventListener("click",r=>{n.command("fullscreen",[t.getAttribute("data-value")])}),n.event.register([{event:"onFullscreenChange",target:[],callback:()=>{if(t.getAttribute("data-value")===""?(t.querySelector("span.se-icon").innerHTML=C.svgList.fullscreen,t.setAttribute("data-value","1"),t.setAttribute("data-tips","exit fullscreen"),t.classList.remove("is-featured")):(t.querySelector("span.se-icon").innerHTML=C.svgList.fullscreen_close,t.setAttribute("data-value",""),t.setAttribute("data-tips","fullscreen"),t.classList.add("is-featured")),e.refToolbar){let o=e.refToolbar.querySelector(".tips");o&&(o.style.display="none",o.style.top="")}}}])}}}}var yt=[{event:"onFeatureChange",target:[],callback:function(e){e.refToolbar.querySelectorAll('.se-ToolbarItem[data-tips="align left"],.se-ToolbarItem[data-tips="align right"],.se-ToolbarItem[data-tips="align center"],.se-ToolbarItem[data-tips="align justify"]').forEach(n=>{n.classList.remove("is-featured"),n.getAttribute("data-value")===e.feature.align&&n.classList.add("is-featured")}),e.refToolbar.querySelectorAll('.se-ToolbarItem[data-tips="align"] .se-button[data-command]').forEach(n=>{n.classList.remove("is-featured"),n.getAttribute("data-value")===e.feature.align&&n.classList.add("is-featured")})}}];function Ct(e){let n={align:{command:"align",svg:C.svgList.align_left,tips:"align",dropdowncontent:'<div class="se-dropdown se-ToolbarItem" data-tips="align"><div class="se-dropdown-trigger"><button class="se-button" aria-haspopup="true" aria-controls="dropdown-menu-align"><span></span><span class="se-icon">'+C.svgList.align_left+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-align" role="menu"><div class="se-dropdown-content horizontal"><span class="se-button se-ToolbarItem" data-command="align" data-value="left" data-tips="align left"><span class="se-icon">'+C.svgList.align_left+'</span></span><span class="se-button se-ToolbarItem" data-command="align" data-value="center" data-tips="align center"><span class="se-icon">'+C.svgList.align_center+'</span></span><span class="se-button se-ToolbarItem" data-command="align" data-value="right" data-tips="align right"><span class="se-icon">'+C.svgList.align_right+'</span></span><span class="se-button ToolbarItem" data-command="align" data-value="justify" data-tips="align justify"><span class="se-icon">'+C.svgList.align_justify+"</span></span></div></div></div>",onRender:(t,r)=>{r.querySelectorAll(".se-button[data-command]").forEach(o=>{o.addEventListener("click",a=>(a.preventDefault(),a.stopPropagation(),t.command("align",[o.getAttribute("data-value")]),!1))}),t.event.register(yt)}}};return["align_right","align_left","align_center","align_justify"].forEach(t=>{let r=t.split("_");n[t]={command:t,svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem" data-command="'+t+'" data-value="'+r[1]+'" data-tips="'+t.replace("_"," ")+'"><span class="se-icon">'+C.svgList[t]+"</span></span>",onRender:(o,a)=>{a.addEventListener("click",l=>(l.preventDefault(),l.stopPropagation(),o.command("align",[r[1]]),!1)),o.event.register(yt)}}}),n}function rr(e,n){n.querySelector(".se-dropdown-content").innerHTML='<div class="padding"><table class="ToolbarTable"><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><div class="title"></div></div>';let t=n.querySelector("table"),r=(s,d,i)=>{let c=0,u=0;t.querySelectorAll("tr").forEach(m=>{c++,m.querySelectorAll("td").forEach(p=>{u++,p.classList.remove("active"),d>=c&&i>=u&&p.classList.add("active"),p===s.currentTarget&&(n.querySelector(".title").innerHTML=c+" x "+u)}),u=0})},o=()=>{t.querySelectorAll("td").forEach(s=>{s.classList.remove("active"),n.querySelector(".title").innerHTML="&nbsp;"})},a=0,l=0;t.querySelectorAll("tr").forEach(s=>{a++,s.querySelectorAll("td").forEach(d=>{l++;let i=a,c=l;d.addEventListener("mouseover",u=>{r(u,i,c)}),d.addEventListener("mouseout",o),d.addEventListener("click",()=>{var u;(u=e.toolbar)==null||u.hideDropdown(),e.command("table",[i+","+c])})}),l=0})}function or(e,n){var E,h,b,v,y;let t=e.dom.nodeParent((E=e.feature)==null?void 0:E.node,"TD")||e.dom.nodeParent((h=e.feature)==null?void 0:h.node,"TH"),r=(b=e.feature)==null?void 0:b.path.includes("TD"),o=e.feature.pathNode[(v=e.feature)==null?void 0:v.path.indexOf("TABLE")],a=e.dom.nodeParent((y=e.feature)==null?void 0:y.node,"TR"),l=o.querySelectorAll("tbody tr"),s=o.querySelectorAll("th").length>0,d=e.dom.nodePosition(t),i=e.dom.nodePosition(a),c=parseInt(t.getAttribute("rowspan")||"1",10),m=parseInt(t.getAttribute("colspan")||"1",10)>1||c>1,p=t.parentElement.childNodes.length>d+1,f=r&&l.length>i+1,g=f||p?e.dom.table.cellList(o,!1):[];if(p){let w=g[i],T=w.indexOf(t);e.dom.table.rowSpan(t)!==e.dom.table.rowSpan(w[T+1])&&(p=!1)}if(f){let w=g[i],T=g[i+1],S=w.indexOf(t);e.dom.table.colSpan(w[S])!==e.dom.table.colSpan(T[S])&&(f=!1)}n.querySelector(".se-dropdown-content").innerHTML='<button class="se-button se-dropdown-item hover borderbottom" data-command="table_style" >'+e.ln("TABLE STYLE")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="cell_style">'+e.ln("CELL STYLE")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="insert_header" style="'+(s?"display: none;":"")+'">'+e.ln("INSERT HEADER")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="delete_header" style="'+(r?"display: none;":"")+'">'+e.ln("DELETE HEADER")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="insert_row_above" style="'+(r?"":"display: none;")+'">'+e.ln("INSERT ROW ABOVE")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="insert_row_below" style="'+(r?"":"display: none;")+'">'+e.ln("INSERT ROW BELOW")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="insert_column_left">'+e.ln("INSERT COLUMN LEFT")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="insert_column_right">'+e.ln("INSERT COLUMN RIGHT")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="delete_row" style="'+(r?"":"display: none;")+'">'+e.ln("DELETE ROW")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="delete_column">'+e.ln("DELETE COLUMN")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="merge_down" style="'+(f?"":"display: none;")+'">'+e.ln("MERGE DOWN")+'</button><button class="se-button se-dropdown-item hover borderbottom" data-command="merge_right" style="'+(p?"":"display: none;")+'">'+e.ln("MERGE RIGHT")+'</button><button class="se-button se-dropdown-item hover" data-command="unmerge" style="'+(m?"":"display: none;")+'">'+e.ln("UNMERGE")+"</button>",n.querySelectorAll(".se-dropdown-item").forEach(w=>{w.addEventListener("click",T=>{var x;T.preventDefault(),T.stopPropagation();let S=w.getAttribute("data-command")||"";if(S==="table_style"){let A=o.hasAttribute("style")?o.getAttribute("style"):e.getCfg("table.default.table.style");return n.querySelector(".se-dropdown-content").innerHTML='<div class="padding"><div class="se-dropdown-item"><input type="text" name="style"><label>'+e.ln("TABLE STYLE")+'</label></div><div style="text-align: right;margin-right:5px"><button class="se-button apply">'+e.ln("Apply")+"</button></div></div>",n.querySelector(".se-dropdown-content input[name=style]").value=A,n.querySelector(".se-dropdown-content .se-button.apply").addEventListener("click",I=>{var J;return I.preventDefault(),I.stopPropagation(),e.restoreSelection(e.getCache("currentSelection")),e.command("table",["table_style",n.querySelector(".se-dropdown-content input[name=style]").value]),(J=e.toolbar)==null||J.hideDropdown(),!1}),!1}if(S==="cell_style"){let A=t.hasAttribute("style")?t.getAttribute("style"):e.getCfg(r?"table.default.cell.style":"table.default.header.cell.style"),I='<div class="padding"><div class="se-dropdown-item"><input type="text" name="style"><label>'+e.ln("CELL STYLE")+'</label></div><div style="text-align:right;display:flex"><button disabled style="    border: none;background: #fff;">'+e.ln("Apply To")+"</button>";return r?I+='<button class="se-button apply" data-value="all">'+e.ln("All")+'</button><button class="se-button apply" data-value="row">'+e.ln("Row")+'</button><button class="se-button apply" data-value="cell">'+e.ln("Cell")+"</button></div></div>":I+='<button class="se-button apply" data-value="row">'+e.ln("Row")+'</button><button class="se-button apply" data-value="cell">'+e.ln("Cell")+"</button></div></div>",n.querySelector(".se-dropdown-content").innerHTML=I,n.querySelector(".se-dropdown-content input[name=style]").value=A,Array.from(n.querySelectorAll(".se-dropdown-content .se-button.apply")).forEach(J=>J.addEventListener("click",se=>{var He;return se.preventDefault(),se.stopPropagation(),e.restoreSelection(e.getCache("currentSelection")),e.command("table",["cell_style",n.querySelector(".se-dropdown-content input[name=style]").value,se.target.getAttribute("data-value")||""]),(He=e.toolbar)==null||He.hideDropdown(),!1})),!1}return e.restoreSelection(e.getCache("currentSelection")),e.command("table",[S]),(x=e.toolbar)==null||x.hideDropdown(),!1})})}function wt(e){return{table:{command:"table",svg:C.svgList.table,tips:e.ln("table"),dropdowncontent:'<div class="se-dropdown se-ToolbarItem" data-tips="'+e.ln("table")+'"><div class="se-dropdown-trigger"><button class="se-button" aria-haspopup="true" aria-controls="dropdown-menu-table"><span></span><span class="se-icon">'+C.svgList.table+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-table" role="menu"><div class="se-dropdown-content se-control"><div class="title"></div></div></div></div>',onRender:(n,t)=>{let r=t.querySelector(".se-dropdown-menu");t.querySelector(".se-dropdown-trigger > button").addEventListener("click",()=>{var o;if(!r.classList.contains("is-active")){e.setCache("currentSelection",n.selection),n.handleFeature();let a=(o=n.feature)==null?void 0:o.path;a.includes("TD")||a.includes("TH")?or(n,t):rr(n,t)}})}}}}function Tt(e){return{hr:{command:"hr",svg:C.svgList.hr,tips:"horizontal line"}}}function St(e){return{source:{command:"source",svg:C.svgList.view_source,tips:"view source",onRender:(n,t)=>{t.addEventListener("click",()=>{var o;((o=n.toolbar)==null?void 0:o.hasShadow())?n.toolbar.disableShadow():n.toolbar.enableShadow(["source","fullscreen"]);let r=t.getAttribute("data-command");n.command(r,[])})}}}}var ar=[{event:"onFeatureChange",target:[],callback:function(e){e.refToolbar.querySelectorAll('.se-ToolbarItem[data-tips="text"] .se-button[data-command]').forEach(n=>{n.classList.remove("is-featured");let t=n.getAttribute("data-command");e.feature[t]&&n.classList.add("is-featured")})}}];function xt(e){let n={text:{command:"text",svg:C.svgList.text,tips:"text",dropdowncontent:'<div class="se-dropdown se-ToolbarItem" data-tips="text"><div class="se-dropdown-trigger"><button class="se-button" aria-haspopup="true" aria-controls="dropdown-menu-align"><span></span><span class="se-icon">'+C.svgList.text+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-align" role="menu"><div class="se-dropdown-content horizontal"><span class="se-button se-ToolbarItem" data-command="bold" data-tips="bold"><span class="se-icon">'+C.svgList.b+'</span></span><span class="se-button se-ToolbarItem" data-command="italic" data-tips="italic"><span class="se-icon">'+C.svgList.i+'</span></span><span class="se-button se-ToolbarItem" data-command="underline" data-tips="underline"><span class="se-icon">'+C.svgList.u+'</span></span><span class="se-button se-ToolbarItem" data-command="strikethrough" data-tips="strikethrough"><span class="se-icon">'+C.svgList.strikethrough+'</span></span><span class="se-button se-ToolbarItem" data-command="superscript" data-tips="superscript"><span class="se-icon">'+C.svgList.superscript+'</span></span><span class="se-button se-ToolbarItem" data-command="subscript" data-tips="subscript"><span class="se-icon">'+C.svgList.subscript+"</span></span></div></div></div>",onRender:(r,o)=>{o.querySelectorAll(".se-button[data-command]").forEach(a=>{a.addEventListener("click",l=>(l.preventDefault(),l.stopPropagation(),r.command(a.getAttribute("data-command")),!1))}),r.event.register(ar)}}},t={b:"bold",i:"italic",u:"underline",strikethrough:"strikethrough",subscript:"subscript",superscript:"superscript"};return Object.keys(t).forEach(r=>{let o=t[r];n[o]={command:o,svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem" data-command="'+o+'" data-tips="'+o+'"><span class="se-icon">'+C.svgList[r]+"</span></span>",onRender:(a,l)=>{l.addEventListener("click",s=>(s.preventDefault(),s.stopPropagation(),a.command(l.getAttribute("data-command")),!1))}}}),n}function Lt(e){return{undo:{command:"undo",svg:C.svgList.undo,tips:"undo"}}}function At(e){return{redo:{command:"redo",svg:C.svgList.redo,tips:"redo"}}}function Nt(e){return{indent:{command:"indent",svg:C.svgList.indent,tips:"indent"},outdent:{command:"outdent",svg:C.svgList.outdent,tips:"outdent"}}}function Ht(e){return{remove_format:{command:"remove_format",svg:C.svgList.remove_format,tips:"remove format"}}}function Mt(e){return{link:{command:"link",svg:C.svgList.link,tips:"link",dropdowncontent:'<div class="se-dropdown se-ToolbarItem" data-tips="'+e.ln("link")+'"><div class="se-dropdown-trigger"><button class="se-button" aria-haspopup="true" aria-controls="dropdown-menu-link"><span></span><span class="se-icon">'+C.svgList.link+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-link" role="menu"><div class="se-dropdown-content control"><div class="padding"><div class="se-dropdown-item"><input type="text" name="url"><label>'+e.ln("url")+'</label></div><div class="se-dropdown-item"><input type="text" name="text"><label>'+e.ln("text")+'</label></div><div class="se-dropdown-item"><input type="text" name="target"><label>'+e.ln("link target")+' <u style="cursor:pointer">'+e.ln("open in new tab")+'</u></label></div><div style="text-align: right;margin-right:5px"><button class="se-button alert">'+e.ln("remove")+'</button><button class="se-button insert">'+e.ln("insert")+"</button></div></div></div></div></div>",onRender:(n,t)=>{var i,c;let r=t.querySelector(".se-dropdown-content .se-button.alert"),o=t.querySelector(".se-dropdown-content .se-button.insert"),a=t.querySelector(".se-dropdown-content input[name=url]"),l=t.querySelector(".se-dropdown-content input[name=text]"),s=t.querySelector(".se-dropdown-content input[name=target]");e.setCache("currentSelection",n.selection),(i=t.querySelector("u"))==null||i.addEventListener("click",()=>{t.querySelector("input[name=target]").value="_blank"}),o.addEventListener("click",u=>{var m;return u.preventDefault(),u.stopPropagation(),(m=n.toolbar)==null||m.hideDropdown(),n.restoreSelection(e.getCache("currentSelection")),n.command("link",[o.innerHTML===e.ln("insert")?"insert":"update",a.value,l.value,s.value]),!1}),r.addEventListener("click",u=>{var m;return u.preventDefault(),u.stopPropagation(),(m=n.toolbar)==null||m.hideDropdown(),n.command("link",["remove"]),!1});let d=t.querySelector(".se-dropdown-menu");(c=t.querySelector(".se-dropdown-trigger > button"))==null||c.addEventListener("click",()=>{var u,m,p,f,g;d.classList.contains("is-active")||(e.setCache("currentSelection",n.selection),((u=n.feature)==null?void 0:u.a.node)?(o.innerHTML=e.ln("update"),a.value=((m=n.feature)==null?void 0:m.a.href)||"",s.value=((p=n.feature)==null?void 0:p.a.target)||"",l.value=((g=(f=n.feature)==null?void 0:f.a.node)==null?void 0:g.textContent)||"",r.style.display=""):(a.value="",s.value="",l.value="",o.innerHTML=e.ln("insert"),r.style.display="none"))})}}}}function kt(e){return{remove_link:{command:"remove_link",svg:C.svgList.remove_link,tips:"remove link"}}}var It=[{event:"onFeatureChange",target:[],callback:function(e){e.refToolbar.querySelectorAll('.se-ToolbarItem[data-command="ol"],.se-ToolbarItem[data-command="ul"]').forEach(n=>{var r;n.classList.remove("is-featured");let t=n.getAttribute("data-command");((r=e.feature)==null?void 0:r.path.includes(t.toUpperCase()))&&n.classList.add("is-featured")})}}];function Ot(e){return{ol:{command:"ol",svg:C.svgList.ol,tips:"ordered list",onRender:(n,t)=>{t.addEventListener("click",r=>{let o=t.getAttribute("data-command");n.command(o,[])}),n.event.register(It)}},ul:{command:"ul",svg:C.svgList.ul,tips:"unordered list",onRender:(n,t)=>{t.addEventListener("click",r=>{let o=t.getAttribute("data-command");n.command(o,[])}),n.event.register(It)}}}}function Rt(e){let n={command:"",svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem seperator"><span class="se-icon"><span></span>'};return{"|":n,seperator:n}}function Dt(e){return{nextline:{command:"",svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem nextline"><span class="se-icon"><span></span>'}}}function Pt(e){return{spacer:{command:"",svg:"",tips:"",dropdowncontent:'<span class="se-button se-ToolbarItem spacer"><span class="se-icon"><span></span>'}}}function ir(e){return Object.assign({},Lt(e),At(e),ht(e),bt(e),Et(e),vt(e),Ct(e),wt(e),Tt(e),St(e),xt(e),Nt(e),Ht(e),Mt(e),kt(e),Ot(e),Rt(e),Dt(e),Pt(e))}var ae=class{constructor(n){this.refToolbar=document.createElement("div");this.refShadow=document.createElement("div");this.refTips=document.createElement("div");this.pluginItemList={};this.renderButton=n=>!n.command||!n.svg?"":'<span class="se-button se-ToolbarItem" data-command="'+n.command+'" data-tips="'+this.editor.ln(n.tips||"")+'"><span class="se-icon">'+n.svg+"</span></span>";this.hideDropdownListener=n=>{if(!this.refToolbar){document.removeEventListener("click",this.hideDropdownListener);return}let t=n.target,r=!1;do if(t&&t.classList.contains("se-dropdown-content")){r=!0;break}while(t=t.parentElement);!r&&!this.refToolbar.querySelector(".se-ToolbarItem.is-active .se-dropdown-content .se-button.close-dropdown")&&this.hideDropdown()};this.editor=n,this.prepareUI(),this.registerEvents()}prepareUI(){var n;(n=this.editor.refEditor.querySelector(".SubEditorToolbar"))==null||n.remove(),this.refToolbar=this.editor.refEditor.insertBefore(document.createElement("div"),this.editor.refContent.parentElement),this.refToolbar.classList.add("SubEditorToolbar"),this.refShadow.classList.add("se-Shadow"),this.refToolbar.appendChild(this.refShadow),this.refTips.classList.add("se-tips"),this.refToolbar.appendChild(this.refTips)}registerPluginItem(n){let t=typeof n=="function"?n(this.editor):n;this.pluginItemList=Object.assign(this.pluginItemList,t)}addItem(n){let t,r=ir(this.editor);if(typeof n=="string")if(typeof ae.presetItemList[n]=="function")t=ae.presetItemList[n](this.editor);else if(typeof this.pluginItemList[n]!="undefined")t=this.pluginItemList[n];else if(typeof r[n]!="undefined")t=r[n];else return;else typeof n=="function"&&(t=n(this.editor));if(!t||typeof t=="string"||typeof t.command=="undefined")return;let o=document.createElement("div");t.dropdowncontent?t.dropdowncontent&&(o.innerHTML=t.dropdowncontent):o.innerHTML=this.renderButton(t);let a=o.firstChild;this.refToolbar.insertBefore(a,this.refShadow),t.onRender?t.onRender(this.editor,a):a.addEventListener("click",l=>{let s=a.getAttribute("data-command");this.editor.command(s,[])}),o.remove()}initEventTips(n){n.addEventListener("mouseenter",t=>{t.stopPropagation();let r=t.target,o=this.editor.ln(r.getAttribute("data-tips")||"");if(o==="")return;this.refTips.style.display="block",this.refTips.innerHTML=o;let a=this.refToolbar.getBoundingClientRect(),l=r.getBoundingClientRect();this.refTips.style.left=Math.max(0,l.left-a.left+r.clientWidth/2-this.refTips.clientWidth/2)+"px",this.refTips.style.top=l.top-a.top-this.refTips.clientHeight+"px",l.top<l.height&&(this.refTips.style.top=l.height+"px")}),n.addEventListener("mouseleave",t=>{t.stopPropagation(),this.refTips.style.display="none",this.refTips.style.top=""})}initItems(n){n.forEach(t=>this.addItem(t)),this.refToolbar.querySelectorAll("[data-tips]").forEach(t=>this.initEventTips(t))}insertCloseButton(n){this.removeCloseButton(n),this.editor.dom.appendString2Node('<button class="se-button close-dropdown"><span class="se-icon">'+C.svgList.close+"</span></button>",n.querySelector(".se-dropdown-content")),n.querySelector(".se-dropdown-content .se-button.close-dropdown").addEventListener("click",t=>(t.preventDefault(),t.stopPropagation(),this.hideDropdown(),!1))}removeCloseButton(n){let t=n.querySelector(".se-dropdown-content .se-button.close-dropdown");t&&t.remove()}registerEvents(){this.refToolbar.addEventListener("click",n=>{let t=n.target;if(t.classList.contains("se-button")&&t.parentElement.classList.contains("se-dropdown-trigger")){n.preventDefault(),n.stopPropagation();let r=t.parentElement.parentElement,o=r.classList.contains("is-active");return this.hideDropdown(),o?r.classList.remove("is-active"):(r.classList.add("is-active"),this.adjustContentPosition(r.querySelector(".se-dropdown-content")),r.querySelectorAll(".se-dropdown-content [data-tips]").forEach(a=>this.initEventTips(a))),!1}return!0}),typeof this.editor.docListener.click=="undefined"&&(this.editor.docListener.click=[]),this.editor.docListener.click.push(this.hideDropdownListener),document.removeEventListener("click",this.hideDropdownListener),document.addEventListener("click",this.hideDropdownListener),this.editor.event.register([{event:"onFeatureChange",target:[],callback:()=>{this.refToolbar.querySelectorAll("[data-command]").forEach(n=>{var r;let t=n.getAttribute("data-command")||"_";t!=="_"&&(n.classList.remove("is-featured"),n.getAttribute("data-featureformat")?((r=this.editor.feature)==null?void 0:r.formatEL)===n.getAttribute("data-featureformat")&&n.classList.add("is-featured"):typeof this.editor.feature[t]!="undefined"&&this.editor.feature[t]&&n.classList.add("is-featured"))})}}])}adjustContentPosition(n){n.removeAttribute("style"),setTimeout(()=>{let t=n.getBoundingClientRect();if(!t.width)return;let r=t.width/2-18;t.x-r<0&&(r=t.x),n.setAttribute("style","transform:translateX(-"+r+"px)")},1)}hideDropdown(){this.refToolbar.querySelectorAll(".se-ToolbarItem.is-active").forEach(n=>n.classList.remove("is-active"))}hasShadow(){return this.refToolbar.classList.contains("EnableShadow")}enableShadow(n){this.disableShadow(),this.refToolbar.classList.add("EnableShadow"),this.refToolbar.querySelectorAll(".se-ToolbarItem").forEach(t=>{let r=t.getAttribute("data-command")||"",o=n.indexOf(r)!==-1;o||t.querySelectorAll("[data-command]").forEach(a=>{!o&&n.indexOf(a.getAttribute("data-command")||"")!==-1&&(o=!0)}),o&&t.classList.add("AboveShadow")})}disableShadow(){this.refToolbar.classList.remove("EnableShadow"),this.refToolbar.querySelectorAll(".AboveShadow").forEach(n=>n.classList.remove("AboveShadow"))}},Z=ae;Z.presetItemList={};var B=q(ge());var Vt=[{event:"onCommand",target:["fullscreen"],callback:(e,n,t)=>(t?(e.refEditor.setAttribute("data-backupstyle",e.refEditor.getAttribute("style")||""),e.refEditor.setAttribute("style","position:fixed;z-index:100500;height:100%;width:100%;top:0;left:0;")):e.refEditor.setAttribute("style",e.refEditor.getAttribute("data-backupstyle")||""),e.event.trigger("onFullscreenChange","",[e,t]),!1)}];var Bt=[{event:"onCommand",target:["hr"],callback:(e,n,t)=>{var d,i,c,u,m;let{range:r}=e.getSelectionRange(),o=document.createElement("hr");if(r.endContainer.parentElement.nodeName==="CODE"){let p=r.endContainer.parentElement;p.parentElement.nodeName==="PRE"&&(p=p.parentElement),e.dom.nodesInsertAfter([o],p),e.triggerChange();return}r.deleteContents(),r.insertNode(o),o.parentElement.childNodes.length>1&&o===o.parentElement.childNodes[o.parentElement.childNodes.length-2]&&((d=o.nextSibling)==null?void 0:d.nodeType)===Node.TEXT_NODE&&((i=o.nextSibling)==null?void 0:i.textContent)===""&&o.nextSibling.remove();let s=(p=>{let f=[];for(f.push(p);e.dom.nodeIsTextInlineOrVoid(p)&&p!==e.refContent&&["DIV","TD","TH","LI"].indexOf(p.nodeName)===-1;)p=p.parentNode,f.push(p);return f})(o).find(p=>p.nodeName==="P");if(s){((c=o.parentElement)==null?void 0:c.nodeName)!=="P"&&e.dom.nodeBreak(s,o);let p=Array.from(o.parentElement.querySelectorAll("hr")),f=p.length-1;for(p[f].nextSibling||(e.dom.nodesInsertAfter([p[f]],o.parentElement),f--);f>=0;f--){let g=document.createElement("p"),E=p[f].nextSibling,h=[];for(;E;)h.push(E),E=E.nextSibling;h.forEach(b=>g.appendChild(b)),e.dom.nodesInsertAfter([p[f],g],o.parentElement)}}if(r.setEndAfter(o),r.collapse(!1),e.refContent.lastChild===o)if(((m=(u=e.refContent.lastElementChild)==null?void 0:u.previousElementSibling)==null?void 0:m.nodeName)==="P"){let p=document.createElement("p");p.appendChild(document.createElement("br")),e.refContent.appendChild(p),r.setEndBefore(p.childNodes[0]),r.collapse(!1)}else e.refContent.appendChild(document.createElement("br")),r.setEndAfter(e.refContent.lastChild),r.collapse(!1);e.triggerChange()}}];var qt=[{event:"onCommand",target:["color","backgroundcolor"],callback:(e,n,t)=>{let r=n==="color"?"color":"background-color",{range:o}=e.getSelectionRange(),a=e.dom.selectDeepNodesInRange(o);if(a[0].collapsed&&a[0].node.parentElement){if(a[0].node===e.refContent){let l=document.createElement("span");l.setAttribute("style",r+":"+t),l.appendChild(document.createElement("br")),e.refContent.appendChild(l),o.selectNode(l),o.collapse(!0)}else if(e.dom.nodeIsTextOrVoid(a[0].node)&&(a[0].node.parentElement===e.refContent||a[0].node.parentElement.nodeName==="DIV"||a[0].node.parentElement.childNodes.length>1)){let l=document.createElement("span");l.setAttribute("style",r+":"+t),e.dom.wrapNode(a[0].node,l),e.dom.setCaretAt(a[0].node,a[0].startOffset)}else e.dom.nodeIsTextOrVoid(a[0].node)?e.dom.nodeReplaceAttrStyle(a[0].node.parentElement,r,t):e.dom.nodeReplaceAttrStyle(a[0].node,r,t);e.triggerChange();return}a.forEach(l=>{var s,d;if(l.isVoid){l===a[a.length-1]&&e.dom.setCaretAt(l.node,1);return}if(l.partial){let i=l.node.textContent.substring(l.startOffset,l.endOffset),c=document.createElement("span");c.appendChild(document.createTextNode(i)),c.setAttribute("style",r+":"+t),a.length===1?(o.deleteContents(),o.insertNode(c),e.dom.setCaretAt(c.childNodes[0],(s=c.childNodes[0].textContent)==null?void 0:s.length)):l===a[0]?(e.dom.nodesInsertAfter([c],l.node),l.node.textContent=l.node.textContent.substring(0,l.startOffset)):((d=l.node.parentElement)==null||d.insertBefore(c,l.node),l.node.textContent=l.node.textContent.substring(l.endOffset),e.dom.setCaretAt(a[a.length-1].node,a[a.length-1].endOffset))}else e.dom.nodeReplaceAttrStyle(l.node.parentElement,r,t),l===a[a.length-1]&&e.dom.setCaretAt(o.endContainer,o.endOffset)}),e.dom.mergeTags(o.commonAncestorContainer,"span"),e.triggerChange()}}];var Ft=[{event:"onCommand",target:["source"],callback:(e,n,t)=>{if((e.refContent.style.display==="none"?"source":"editor")==="editor"){e.refContent.style.display="none";let o=document.createElement("textarea");o.classList.add("SubEditorSource"),o.value=e.refContent.innerHTML,o.addEventListener("input",()=>o.style.height=o.scrollHeight+"px"),e.refContent.parentElement.appendChild(o)}else{e.refContent.style.display="";let o=e.refEditor.querySelector(".SubEditorSource");e.changeValue(o.value),o.remove()}}}];var _t=[{event:"onCommand",target:["align"],callback:(e,n,t)=>{let r="text-align",{range:o}=e.getSelectionRange(),a=e.dom.selectDeepNodesInRange(o);if(a[0].collapsed&&a[0].node.parentElement){if(a[0].node===e.refContent){let s=document.createElement("p");s.setAttribute("style",r+":"+t),s.appendChild(document.createElement("br")),e.refContent.appendChild(s),o.selectNode(s),o.collapse(!1)}else if(a[0].node.nodeType===Node.TEXT_NODE&&a[0].node.parentElement===e.refContent){let s=document.createElement("p");s.setAttribute("style",r+":"+t),e.dom.wrapNode(a[0].node,s),e.dom.setCaretAt(a[0].node,a[0].startOffset)}else e.dom.nodeReplaceAttrStyle(a[0].node.parentElement,r,t);e.triggerChange();return}let l=null;a.forEach(s=>{s.node.parentElement===e.refContent?l===null||l!==s.node.previousSibling?(l=document.createElement("p"),l.setAttribute("style",r+":"+t),e.dom.wrapNode(s.node,l)):l.appendChild(s.node):e.dom.nodeReplaceAttrStyle(s.node.parentElement,r,t)}),a[a.length-1].isVoid?e.dom.setCaretAt(a[a.length-1].node,1):e.dom.setCaretAt(o.endContainer,o.endOffset),e.triggerChange()}}];var Zt={bold:"strong",italic:"em",underline:"u",strikethrough:"strike",subscript:"sub",superscript:"sup"},Gt=Object.values(Zt);Gt.push("i");var sr=e=>Gt.indexOf(e.toLowerCase())!==-1,xe=(e,n)=>{do{if(e.nodeName.toLowerCase()===n||n==="em"&&e.nodeName==="I")return e;e=e.parentElement}while(e&&sr(e.nodeName));return!1},Ut=[{event:"onCommand",target:["bold","italic","underline","strikethrough","subscript","superscript"],callback:(e,n)=>{let t=Zt[n],{range:r}=e.getSelectionRange(),o=r.endContainer,a=r.endOffset,l=e.dom.selectDeepNodesInRange(r),s=l.find(u=>u.node.nodeType===Node.TEXT_NODE),d=!s||!xe(s.node,t),i=u=>{let m=document.createElement(t),p=xe(u.node,t);d&&!p?e.dom.wrapNode(u.node,m):!d&&p&&e.dom.unwrapNode(p,e.refContent)};o=l[l.length-1].node,a=l[l.length-1].endOffset;let c=()=>{e.dom.setCaretAt(o,a),e.triggerChange()};if(l[0].collapsed){if(l[0].node===e.refContent){let u=document.createElement(t);e.refContent.appendChild(u),u.appendChild(document.createElement("br")),r.selectNode(u),r.collapse(!0),e.triggerChange();return}return l[0].node.nodeType===Node.TEXT_NODE&&l[0].node.parentElement&&i(l[0]),e.dom.mergeTags(r.commonAncestorContainer,t),c()}l.forEach(u=>{var p,f;if(u.isVoid)return;if(!u.partial){i(u);return}let m=xe(u.node,t);if(d&&!m){let g=u.startOffset!==void 0&&u.startOffset>-1?u.node.textContent.substring(u.startOffset,u.endOffset):u.node.textContent,E=document.createElement(t);E.appendChild(document.createTextNode(g)),l.length===1?(r.deleteContents(),r.insertNode(E),e.dom.setCaretAt(E.childNodes[0],(p=E.childNodes[0].textContent)==null?void 0:p.length)):u===l[0]?(e.dom.nodesInsertAfter([E],u.node),u.node.textContent=u.node.textContent.substring(0,u.startOffset)):u===l[l.length-1]&&((f=u.node.parentElement)==null||f.insertBefore(E,u.node),u.node.textContent=u.node.textContent.substring(u.endOffset))}else!d&&m&&e.dom.unwrapNode(m,e.refContent)}),e.dom.mergeTags(r.commonAncestorContainer,t),c()}}];var H=q(Ce()),ie={isBoldHotkey:(0,H.isKeyHotkey)("mod+b"),isItalicHotkey:(0,H.isKeyHotkey)("mod+i"),isUnderlinedHotkey:(0,H.isKeyHotkey)("mod+u"),isCodeHotkey:(0,H.isKeyHotkey)("mod+`"),isSaveHotKey:(0,H.isKeyHotkey)("mod+s"),isUndoHotKey:(0,H.isKeyHotkey)("mod+z"),isRedoHotKey:(0,H.isKeyHotkey)("mod+y"),isCopyHotKey:(0,H.isKeyHotkey)("mod+c"),isPasteHotKey:(0,H.isKeyHotkey)("mod+v"),isBackspace:(0,H.isKeyHotkey)("backspace"),isArrowLeft:(0,H.isKeyHotkey)("arrowleft"),isEnter:(0,H.isKeyHotkey)("enter"),isTab:(0,H.isKeyHotkey)("tab")};var zt=[{event:"onCommand",target:["undo"],callback:(e,n,t)=>{e.handleChange(e.history.Undo())}},{event:"onKeyDown",target:["mod+z"],callback:(e,n)=>{if(!!ie.isUndoHotKey(n))return n.preventDefault(),n.stopPropagation(),e.handleChange(e.history.Undo()),!1}}];var Kt=[{event:"onCommand",target:["redo"],callback:(e,n,t)=>{e.handleChange(e.history.Redo())}},{event:"onKeyDown",target:["mod+y","cmd+shift+z"],callback:(e,n)=>{if(!!ie.isRedoHotKey(n))return n.preventDefault(),n.stopPropagation(),e.handleChange(e.history.Redo()),!1}}];var jt=[{event:"onCommand",target:["indent","outdent"],callback:(e,n,t)=>{let r="padding-left",o=n==="indent"?parseInt(""+e.getCfg("indent.size"),10)||40:0-(parseInt(""+e.getCfg("indent.size"),10)||40),a=(m,p)=>{let f=(parseInt(e.dom.nodeAttrStyle(m,r),10)||0)+p;f<0&&n!=="indent"||(f===0?m.style.paddingLeft="":m.style.paddingLeft=f+"px")},l=m=>{let p=[];for(p.push(m);e.dom.nodeIsTextInlineOrVoid(m);)m=m.parentNode,p.push(m);return p},{range:s}=e.getSelectionRange(),d=e.dom.selectDeepNodesInRange(s);if(d[0].collapsed){let m=l(d[0].node);if(d[0].node===e.refContent){let p=document.createElement("p");a(p,o),p.appendChild(document.createElement("br")),e.refContent.appendChild(p),e.dom.setCaretAt(p,0)}else if(e.dom.nodesAreTextInlineOrVoid(Array.from(m[0].childNodes)))if(m[m.length-1]!==e.refContent)a(m[m.length-1],o);else{let p=document.createElement("p");a(p,o),Array.from(m[m.length-1].childNodes).forEach(f=>p.appendChild(f)),m[m.length-1].appendChild(p),e.dom.setCaretAt(d[0].node,d[0].startOffset)}else if(m[m.length-1]===e.refContent){let p=document.createElement("p");a(m[m.length-1],o),e.dom.wrapNode(m[m.length-2],p),e.dom.setCaretAt(d[0].node,d[0].startOffset)}else a(m[m.length-1],o);e.triggerChange();return}let i=null,c=[],u=[];d.length>3?(u=e.dom.selectNodesBetweenRange(s),u.unshift(d[0].node),u.push(d[d.length-1].node)):d.forEach(m=>u.push(m.node)),u.forEach(m=>{for(var p=0,f=c.length;p<f;p++)if(c[p].contains(m))return;let g=l(m);g[g.length-1]===e.refContent?i===null||i!==m.previousSibling?(i=document.createElement("p"),a(i,o),e.dom.wrapNode(g[g.length-2],i)):i.appendChild(g[g.length-2]):a(g[g.length-1],o)}),d[d.length-1].isVoid?e.dom.setCaretAt(d[d.length-1].node,1):e.dom.setCaretAt(s.endContainer,s.endOffset),e.triggerChange()}}];var lr=e=>e.nodeType===3?e:Array.from(e.childNodes).filter(t=>t.nodeType===3).filter(t=>t.textContent.trim()).map(t=>t)[0]||null,M=(e,n=null)=>{if(e[e.length-1].nodeType===Node.TEXT_NODE)return document.createTextNode(n||e[e.length-1].textContent);let t=document.createElement(e[e.length-1].nodeName);for(let r=e.length-2;r>=0;r--)e[r].nodeType===Node.TEXT_NODE?t.appendChild(document.createTextNode(n||e[e.length-1].textContent)):t.appendChild(document.createElement(e[r].nodeName));return t},G=(e,n)=>{let t=document.createElement(n);return Array.from(e.childNodes).forEach(r=>t.appendChild(r)),e.replaceWith(t),t},V=(e,n)=>{let t=[];do t.push(e),e=e.parentNode;while(n.dom.nodeIsTextInlineOrVoid(e)&&e.nodeName!=="SPAN");return t},Wt=(e,n)=>{let t=[],r=[],o=["TD","P","DIV","LI","CODE"],a=e;for(;a&&o.indexOf(a.nodeName)===-1;)t.push(a.nodeName),r.push(a),a=a.parentElement;let l="wrap";if(t.indexOf(n)!==-1)l="unwrap",a=r[t.indexOf(n)];else if(t.indexOf(n)===-1){for(var s=0,d=t.length;s<d;s++)if(["H1","H2","H3","H4","H5","H6"].indexOf(t[s])!==-1){l="replace",a=r[s];break}}return{action:l,node:l==="wrap"?null:a}},Xt=[{event:"onKeyDown",target:["enter"],callback:(e,n)=>{var l,s,d;if(!((l=e.feature)==null?void 0:l.path.includes("BLOCKQUOTE")))return;let{range:t}=e.getSelectionRange();t.deleteContents(),t.collapse(!1);let r=e.dom.selectDeepNodesInRange(t),o=r[0].node.textContent.substring(r[0].startOffset),a=(s=r[0].node.textContent)==null?void 0:s.substring(0,r[0].startOffset);o?(e.dom.nodesInsertAfter([document.createElement("br"),document.createTextNode(o)],r[0].node),e.dom.setCaretAt(r[0].node.nextSibling.nextSibling,0)):(e.dom.nodesInsertAfter([document.createElement("br")],r[0].node),t.selectNode(r[0].node.nextSibling),t.collapse(!1)),a?r[0].node.textContent=a:(d=r[0].node.parentElement)==null||d.removeChild(r[0].node),n.preventDefault(),n.stopPropagation(),e.triggerChange()}},{event:"onCommand",target:["blockquote"],callback:e=>{var l,s,d;let{range:n}=e.getSelectionRange(),t=e.dom.selectDeepNodesInRange(n);if(t[0].collapsed){if(t[0].node===e.refContent){let m=document.createElement("blockquote");m.appendChild(document.createElement("br")),e.refContent.appendChild(m);let p=document.createElement("P");p.appendChild(document.createElement("BR")),e.refContent.appendChild(p),e.dom.setCaretAt(m,0);return}let i=V(t[0].node,e),c=i[i.length-1].parentElement;if(t[0].collapsed&&["P","CODE","BLOCKQUOTE","H1","H2","H3","H4","H5","H6","DIV"].indexOf(c.nodeName)!==-1&&e.dom.nodeIsText(t[0].node)&&((l=t[0].node.textContent)==null?void 0:l.length)===t[0].endOffset&&c.lastChild===i[i.length-1]){let m=document.createElement("blockquote");if(m.appendChild(document.createElement("br")),c===e.refContent?c.appendChild(m):c.nodeName==="CODE"&&((s=c.parentElement)==null?void 0:s.nodeName)==="PRE"?c.parentElement.parentElement.appendChild(m):c.parentElement.appendChild(m),m===e.refContent.lastChild)if(m.previousElementSibling&&m.previousElementSibling.nodeName==="P"){let p=document.createElement("p");p.appendChild(document.createElement("br")),e.refContent.appendChild(p)}else e.refContent.appendChild(document.createElement("br"));e.dom.setCaretAt(m.firstChild,0),e.triggerChange();return}if(i[i.length-1].nodeType===Node.TEXT_NODE&&c.childNodes.length===1&&i[0].childNodes.length<=1){if(c.nodeName==="BLOCKQUOTE")return;let m=document.createElement("blockquote");if(c===e.refContent?(c.insertBefore(m,i[i.length-1]),m.appendChild(document.createTextNode(i[i.length-1].textContent||""))):c.nodeName==="CODE"&&((d=c.parentElement)==null?void 0:d.nodeName)==="PRE"?(m.appendChild(i[i.length-1]),c.parentElement.replaceWith(m)):(m.appendChild(i[i.length-1]),c.replaceWith(m)),m===e.refContent.lastChild)if(m.previousElementSibling&&m.previousElementSibling.nodeName==="P"){let p=document.createElement("p");p.appendChild(document.createElement("br")),e.refContent.appendChild(p)}else e.refContent.appendChild(document.createElement("br"));e.triggerChange();return}}let r=null,o=null,a=i=>["P","CODE","H1","H2","H3","H4","H5","H6"].includes(i);t.forEach(i=>{var p,f;let c=V(i.node,e);if(c[c.length-1].parentElement.nodeName==="BLOCKQUOTE")return;let u=c[c.length-1].parentElement.nodeName==="CODE"&&c[c.length-1].parentElement.parentElement.nodeName==="PRE";if(!i.collapsed&&i.partial){let g=i.node.textContent.substring(i.startOffset,i.endOffset),E=i.node.textContent.substring(0,i.startOffset),h=i.node.textContent.substring(i.endOffset);if(r=document.createElement("blockquote"),r.appendChild(document.createTextNode(g)),h)if(a(c[c.length-1].parentElement.nodeName))if(u){let b=document.createElement("PRE");b.appendChild(document.createElement("CODE")),b.firstChild.appendChild(M(c,h)),e.dom.nodesInsertAfter([r,b],c[c.length-1].parentElement.parentElement)}else{let b=document.createElement(c[c.length-1].parentElement.nodeName);b.appendChild(M(c,h)),e.dom.nodesInsertAfter([r,b],c[c.length-1].parentElement)}else e.dom.nodesInsertAfter([r,M(c,h)],c[c.length-1]);else u?e.dom.nodesInsertAfter([r],c[c.length-1].parentElement.parentElement):e.dom.nodesInsertAfter([r],a(c[c.length-1].parentElement.nodeName)?c[c.length-1].parentElement:c[c.length-1]);E?c[0].textContent=E:c[c.length-1].parentElement.removeChild(c[c.length-1]),e.dom.setCaretAt(r.firstChild,(p=r.firstChild.textContent)==null?void 0:p.length);return}let m=c[c.length-1].parentElement;if(c[0].textContent===""&&m.childNodes.length===0){m.remove();return}if(r&&o&&o===m)r.appendChild(c[c.length-1]);else{if(r=document.createElement("blockquote"),o=m,u){if(m.firstChild!==c[c.length-1]){let g=document.createElement("PRE");for(g.appendChild(document.createElement("CODE")),g.firstChild.appendChild(c[c.length-1].previousSibling);c[c.length-1].previousSibling;)g.firstChild.insertBefore(c[c.length-1].previousSibling,g.firstChild.firstChild);m.parentElement.parentElement.insertBefore(g,m.parentElement)}m.parentElement.parentElement.insertBefore(r,m.parentElement)}else if(a(m.nodeName)){if(m.firstChild!==c[c.length-1]){let g=document.createElement(m.nodeName);for(g.appendChild(c[c.length-1].previousSibling);c[c.length-1].previousSibling;)g.insertBefore(c[c.length-1].previousSibling,g.firstChild);m.parentElement.insertBefore(g,m)}m.parentElement.insertBefore(r,m)}else m.insertBefore(r,c[c.length-1]);r==null||r.appendChild(c[c.length-1])}if(m.childNodes.length===0&&(u?(f=m.parentElement)==null||f.remove():m.remove()),i===t[t.length-1]&&(e.dom.setCaretAt(i.node,i.endOffset),r&&r===e.refContent.lastChild))if(r.parentElement.nodeName==="P"){let g=document.createElement("p");g.appendChild(document.createElement("br")),e.refContent.appendChild(g)}else e.refContent.appendChild(document.createElement("br"))}),e.triggerChange()}},{event:"onKeyDown",target:["backspace"],callback:(e,n)=>{if(!e.feature.path.includes("CODE"))return;let{range:t}=e.getSelectionRange();if(!t.collapsed||t.startOffset!==0&&!(t.startOffset===1&&(t.startContainer.textContent===" "||t.startContainer.textContent===`
`)))return;let r=e.feature.pathNode[e.feature.path.indexOf("PRE")]||e.feature.pathNode[e.feature.path.indexOf("CODE")],o=r.previousSibling;if((t.startContainer.textContent===""||t.startContainer.textContent===`
`)&&r.remove(),o){t.selectNode(o);let a=e.dom.selectDeepNodesInRange(t);e.dom.setCaretAt(a[a.length-1].node,a[a.length-1].node.textContent.length)}n.preventDefault(),n.stopPropagation(),e.triggerChange()}},{event:"onKeyDown",target:["enter"],callback:(e,n)=>{var o,a,l;if(!((o=e.feature)==null?void 0:o.path.includes("CODE")))return;let{range:t}=e.getSelectionRange();t.deleteContents(),t.collapse(!1);let r=e.dom.selectDeepNodesInRange(t);r[0].node.textContent=((a=r[0].node.textContent)==null?void 0:a.substring(0,r[0].startOffset))+`
`+((l=r[0].node.textContent)==null?void 0:l.substring(r[0].startOffset)),e.dom.setCaretAt(r[0].node,r[0].startOffset+1),n.preventDefault(),n.stopPropagation(),e.triggerChange()}},{event:"onCommand",target:["code"],callback:e=>{var a;let{range:n}=e.getSelectionRange(),t=e.dom.selectDeepNodesInRange(n);if(t[0].collapsed){if(t[0].node===e.refContent){let i=document.createElement("pre");i.appendChild(document.createElement("code")),i.firstChild.appendChild(document.createTextNode(`
`)),e.refContent.appendChild(i);let c=document.createElement("P");c.appendChild(document.createElement("BR")),e.refContent.appendChild(c),e.dom.setCaretAt(i,0);return}let l=V(t[0].node,e),s=l[l.length-1].parentElement;if(["P","CODE","BLOCKQUOTE","H1","H2","H3","H4","H5","H6","DIV"].indexOf(s.nodeName)!==-1&&e.dom.nodeIsText(t[0].node)&&((a=t[0].node.textContent)==null?void 0:a.length)===t[0].endOffset&&s.lastChild===l[l.length-1]){let i=document.createElement("pre");if(i.appendChild(document.createElement("code")),i.childNodes[0].appendChild(document.createTextNode(`
`)),s.nodeName==="CODE"&&s.parentElement.nodeName==="PRE"?s.parentElement.parentElement.appendChild(i):s===e.refContent?s.appendChild(i):s.parentElement.appendChild(i),e.dom.setCaretAt(i.childNodes[0].childNodes[0],0),i===e.refContent.lastChild)if(i.previousElementSibling&&i.previousElementSibling.nodeName==="P"){let c=document.createElement("p");c.appendChild(document.createElement("br")),e.refContent.appendChild(c)}else e.refContent.appendChild(document.createElement("br"));e.triggerChange();return}if(l[l.length-1].nodeType===Node.TEXT_NODE&&s.childNodes.length===1&&l[0].childNodes.length<=1){if(s.nodeName==="CODE")return;let i=document.createElement("pre");if(i.appendChild(document.createElement("code")),s===e.refContent?(s.insertBefore(i,l[l.length-1]),i.childNodes[0].appendChild(document.createTextNode(l[l.length-1].textContent||""))):(i.childNodes[0].appendChild(l[l.length-1]),s.replaceWith(i)),i===e.refContent.lastChild)if(i.previousElementSibling&&i.previousElementSibling.nodeName==="P"){let c=document.createElement("p");c.appendChild(document.createElement("br")),e.refContent.appendChild(c)}else e.refContent.appendChild(document.createElement("br"));e.triggerChange();return}}let r=null,o=l=>["P","BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(l);t.forEach(l=>{var u,m,p,f,g,E;if(l.isVoid)return;let s=V(l.node,e);if(s[s.length-1].parentElement.nodeName==="CODE")return;if(!l.collapsed&&l.partial){let h=l.node.textContent.substring(l.startOffset,l.endOffset),b=l.node.textContent.substring(0,l.startOffset),v=l.node.textContent.substring(l.endOffset);if(r=document.createElement("pre"),r.appendChild(document.createElement("code")),(u=r.querySelector("code"))==null||u.appendChild(document.createTextNode(h)),v)if(o(s[s.length-1].parentElement.nodeName)){let y=document.createElement(s[s.length-1].parentElement.nodeName);y.appendChild(M(s,v)),e.dom.nodesInsertAfter([document.createElement("br"),r,y],s[s.length-1].parentElement)}else e.dom.nodesInsertAfter([document.createElement("br"),r,M(s,v)],s[s.length-1]);else e.dom.nodesInsertAfter([document.createElement("br"),r],o(s[s.length-1].parentElement.nodeName)?s[s.length-1].parentElement:s[s.length-1]);b?s[0].textContent=b:s[s.length-1].parentElement.removeChild(s[s.length-1]),e.dom.setCaretAt((m=r.firstChild)==null?void 0:m.firstChild,(f=(p=r.firstChild)==null?void 0:p.firstChild.textContent)==null?void 0:f.length);return}if(s.length>1)for(var d=1,i=s.length;d<i;d++)e.dom.unwrapNode(s[d]);let c=s[0].parentElement;if(s[0].textContent===""&&c.childNodes.length===0){c.remove();return}if(r&&r===s[0].previousSibling)r.firstChild.appendChild(s[0]),c.childNodes.length===0&&c.remove();else{if(r=document.createElement("pre"),r.appendChild(document.createElement("code")),(g=r.firstChild)==null||g.appendChild(document.createTextNode(s[0].textContent||"")),o(c.nodeName)){if(c.firstChild!==s[0]){let h=document.createElement(c.nodeName);for(h.appendChild(s[0].previousSibling);s[0].previousSibling;)h.insertBefore(s[0].previousSibling,h.firstChild);c.parentElement.insertBefore(h,c)}c.parentElement.insertBefore(r,c)}else c.insertBefore(r,s[0]);if(c.childNodes.length===1?c.remove():c.removeChild(s[0]),l===t[t.length-1]&&(e.dom.setCaretAt((E=r.firstChild)==null?void 0:E.firstChild,l.endOffset),r===e.refContent.lastChild))if(r.parentElement.nodeName==="P"){let h=document.createElement("p");h.appendChild(document.createElement("br")),e.refContent.appendChild(h)}else e.refContent.appendChild(document.createElement("br"))}}),e.triggerChange()}},{event:"onCommand",target:["p"],callback:e=>{var l;let{range:n}=e.getSelectionRange(),t=e.dom.selectDeepNodesInRange(n),r=n.endContainer,o=n.endOffset;if(t.length===1){let s=t[0];if(t[0].node===e.refContent&&t[0].collapsed){let c=document.createElement("P");c.appendChild(document.createElement("BR")),e.refContent.appendChild(c),e.dom.setCaretAt(c,0);return}let d=V(t[0].node,e),i=t[0].collapsed&&["P","CODE","BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].indexOf(d[d.length-1].parentElement.nodeName)!==-1&&e.dom.nodeIsText(t[0].node)&&((l=t[0].node.textContent)==null?void 0:l.length)===t[0].endOffset&&d[d.length-1].parentElement.lastChild===d[d.length-1];if(s.node.nodeName==="HR"||i){let c=document.createElement("p");c.appendChild(document.createElement("br")),d[d.length-1].parentElement.nodeName==="CODE"&&d[d.length-1].parentElement.parentElement.nodeName==="PRE"?d[d.length-1].parentElement.parentElement.parentElement.appendChild(c):d[d.length-1].parentElement===e.refContent?d[d.length-1].parentElement.appendChild(c):d[d.length-1].parentElement.parentElement.appendChild(c),e.dom.setCaretAt(c.childNodes[0],0),e.triggerChange();return}if(s.collapsed||s.isVoid)d[d.length-1].parentElement===e.refContent?e.dom.wrapNode(d[d.length-1],document.createElement("p")):d[d.length-1].parentElement.nodeName==="CODE"?(d[d.length-1].parentElement.parentElement.nodeName==="PRE"&&e.dom.unwrapNode(d[d.length-1].parentElement.parentElement),t[0].node=G(d[d.length-1].parentElement,"P")):["H1","H2","H3","H4","H5","H6"].indexOf(d[d.length-1].parentElement.nodeName)!==-1?t[0].node=G(d[d.length-1].parentElement,"P"):e.dom.wrapNode(d[d.length-1],document.createElement("p")),e.dom.setCaretAt(r,o);else{let c=s.node.textContent.substring(s.startOffset,s.endOffset),u=s.node.textContent.substring(0,s.startOffset),m=s.node.textContent.substring(s.endOffset);s.node.textContent=u;let p=document.createElement("p");if(p.appendChild(M(d,c)),d[d.length-1].parentElement.nodeName==="CODE"){let g=document.createElement(d[d.length-1].parentElement.nodeName);g.appendChild(M(d,m)),d[d.length-1].parentElement.parentElement.nodeName==="PRE"?(e.dom.nodesInsertAfter([p,g],d[d.length-1].parentElement.parentElement),e.dom.wrapNode(g,document.createElement("PRE"))):e.dom.nodesInsertAfter([p,g],d[d.length-1].parentElement)}else if(["P","H1","H2","H3","H4","H5","H6"].indexOf(d[d.length-1].parentElement.nodeName)!==-1){let g=document.createElement(d[d.length-1].parentElement.nodeName);g.appendChild(M(d,m)),e.dom.nodesInsertAfter([p,g],d[d.length-1].parentElement)}else e.dom.nodesInsertAfter([p,M(d,m)],d[d.length-1]);u||d[d.length-1].parentElement.removeChild(d[d.length-1]);let f=lr(p);e.dom.setCaretAt(f,(f.textContent||"").length)}e.triggerChange();return}let a=null;t.forEach((s,d)=>{if(s.node.nodeName==="HR")return;let i=V(s.node,e);if(i[i.length-1].parentElement.nodeName!=="P"){if(!s.collapsed&&s.partial){let c=s.node.textContent.substring(s.startOffset,s.endOffset),u=s.node.textContent.substring(0,s.startOffset),m=s.node.textContent.substring(s.endOffset);if(a=document.createElement("p"),a.appendChild(document.createTextNode(c)),i[i.length-1].parentElement.nodeName==="CODE"&&i[i.length-1].parentElement.parentElement.nodeName==="PRE"){if(m){let p=document.createElement("pre");p.appendChild(document.createElement("code")),p.querySelector("code").appendChild(M(i,m)),e.dom.nodesInsertAfter([a,p],i[i.length-1].parentElement.parentElement)}else e.dom.nodesInsertAfter([a],i[i.length-1].parentElement.parentElement);u?i[0].textContent=u:i[i.length-1].parentElement.parentElement.removeChild(i[i.length-1].parentElement)}else if(["H1","H2","H3","H4","H5","H6","CODE"].indexOf(i[i.length-1].parentElement.nodeName)!==-1){if(m){let p=document.createElement(i[i.length-1].parentElement.nodeName);p.appendChild(M(i,m)),e.dom.nodesInsertAfter([a,p],i[i.length-1].parentElement)}else e.dom.nodesInsertAfter([a],i[i.length-1].parentElement);u?i[0].textContent=u:i[i.length-1].parentElement.parentElement.removeChild(i[i.length-1].parentElement)}else m?e.dom.nodesInsertAfter([a,M(i,m)],i[i.length-1]):e.dom.nodesInsertAfter([a],i[i.length-1]),u?i[0].textContent=u:i[i.length-1].parentElement.removeChild(i[i.length-1]);return}["H1","H2","H3","H4","H5","H6"].indexOf(i[i.length-1].parentElement.nodeName)!==-1?t[d].node=G(i[i.length-1].parentElement,"P"):i[i.length-1].parentElement.nodeName==="CODE"?(i[i.length-1].parentElement.parentElement.nodeName==="PRE"&&e.dom.unwrapNode(i[i.length-1].parentElement.parentElement),t[d].node=G(i[i.length-1].parentElement,"P")):a&&a===i[i.length-1].previousSibling?a==null||a.appendChild(i[i.length-1]):(a=document.createElement("P"),e.dom.wrapNode(i[i.length-1],a))}}),e.triggerChange()}},{event:"onCommand",target:["h1","h2","h3","h4","h5","h6"],callback:(e,n)=>{let{range:t}=e.getSelectionRange(),r=e.dom.selectDeepNodesInRange(t),o=n.toUpperCase(),a=t.endContainer,l=t.endOffset,s=r.find(i=>i.node.nodeType===Node.TEXT_NODE),d=Wt(s==null?void 0:s.node,o);if(r[0].node===e.refContent&&r[0].collapsed){let i=document.createElement(n);i.appendChild(document.createElement("br")),e.refContent.appendChild(i);let c=document.createElement("P");c.appendChild(document.createElement("BR")),e.refContent.appendChild(c),e.dom.setCaretAt(i,0);return}r.forEach((i,c)=>{let u=V(i.node,e),m=Wt(i.node,o);if(d.action==="unwrap"&&m.action!=="wrap"){e.dom.unwrapNode(m.node,e.refContent);return}if(!i.isVoid)if(m.action==="wrap"){let p=u[u.length-1].parentElement,f=document.createElement(o);if(p.nodeName==="P"){if(i.collapsed&&p.childNodes.length===1){r[c].node=G(p,o);return}let g=document.createElement("P"),E=u[u.length-1],h=Array.from(E.parentElement.childNodes),b=h.indexOf(E);for(let v=b+1,y=h.length;v<y;v++)g.appendChild(h[v]);if(!i.collapsed&&i.partial){a=document.createTextNode(i.node.textContent.substring(i.startOffset,i.endOffset)),l=(a.textContent||"").length,f.appendChild(a);let v=i.node.textContent.substring(0,i.startOffset)||"",y=i.node.textContent.substring(i.endOffset)||"";v!==""?i.node.textContent=v:i.node.parentNode.removeChild(i.node),y!==""&&(g.childNodes.length>0?g.insertBefore(document.createTextNode(y),g.childNodes[0]):g.appendChild(document.createTextNode(y)))}else f.appendChild(u[u.length-1]);if(e.dom.nodesInsertAfter([f,g],p),p.innerHTML===""&&p.remove(),g.childNodes.length===0&&g.remove(),i===r[r.length-1]&&f===e.refContent.childNodes[e.refContent.childNodes.length-1]){let v=document.createElement("P");v.appendChild(document.createElement("BR")),e.refContent.appendChild(v)}}else{if(!i.collapsed&&i.partial){a=document.createTextNode(i.node.textContent.substring(i.startOffset,i.endOffset)),l=(a.textContent||"").length,f.appendChild(a);let g=i.node.textContent.substring(0,i.startOffset)||"",E=i.node.textContent.substring(i.endOffset)||"";e.dom.nodesInsertAfter([f],i.node),g!==""?i.node.textContent=g:i.node.parentNode.removeChild(i.node),E!==""&&e.dom.nodesInsertAfter([document.createTextNode(E)],f)}else e.dom.wrapNode(u[u.length-1],f);i===r[r.length-1]&&f===e.refContent.childNodes[e.refContent.childNodes.length-1]&&e.refContent.appendChild(document.createElement("BR"))}}else m.action==="replace"&&(r[c].node=G(m.node,o))}),a?e.dom.setCaretAt(a,l):r[r.length-1].isVoid&&e.dom.setCaretAt(r[r.length-1].node,1),e.triggerChange()}}];var Qt=[{event:"onCommand",target:["remove_format"],callback:e=>{let{range:n}=e.getSelectionRange();e.dom.selectDeepNodesInRange(n).forEach(r=>{let o=r.node.nodeType===Node.TEXT_NODE?r.node.parentElement:r.node;for(;["DIV","TD","LI"].indexOf(o.nodeName)===-1;)if(["H1","H2","H3","H4","H5","H6","CODE","B","STRONG","I","EM","U","PRE","BLOCKQUOTE","A","STRIKE","SUB","SUP","SPAN"].indexOf(o.nodeName)!==-1){let a=o;o=o.parentElement,e.dom.unwrapNode(a)}else o.style.color&&(o.style.color=""),o.style.backgroundColor&&(o.style.backgroundColor=""),o=o.parentElement;o.style.color&&(o.style.color=""),o.style.backgroundColor&&(o.style.backgroundColor="")}),e.triggerChange()}}];var Yt=[{event:"onCommand",target:["link"],callback:(e,n,t,r,o,a)=>{var d,i,c;let{range:l}=e.getSelectionRange();if(t==="remove"&&((d=e.feature)==null?void 0:d.a.node)){e.dom.unwrapNode((i=e.feature)==null?void 0:i.a.node),e.triggerChange();return}else if(t==="update"&&((c=e.feature)==null?void 0:c.a.node)){let u=e.feature.a.node,m=l.endOffset;u.href=r||"",u.target=a||"",u.textContent=o||"",e.dom.setCaretAt(u.firstChild,Math.min(m,o.length)),e.triggerChange();return}l.deleteContents(),l.collapse(!1);let s=document.createElement("a");if(s.href=r||"",s.target=a||"",s.textContent=o||"",l.endContainer.parentElement.nodeName==="CODE"){let u=l.endContainer.parentElement;u.parentElement.nodeName==="PRE"&&(u=u.parentElement),e.dom.nodesInsertAfter([s],u)}else l.insertNode(s);e.dom.setCaretAt(s.firstChild,s.textContent.length),e.triggerChange()}},{event:"onCommand",target:["remove_link"],callback:e=>{var a,l,s,d,i;let{selection:n}=e.getSelectionRange(),t=(l=(a=e.feature)==null?void 0:a.a.node)==null?void 0:l.childNodes[0],r=(n==null?void 0:n.focusOffset)||0,o=n==null?void 0:n.focusNode;((s=e.feature)==null?void 0:s.a.node)&&(e.dom.unwrapNode((d=e.feature)==null?void 0:d.a.node),((i=t==null?void 0:t.previousSibling)==null?void 0:i.nodeType)===Node.TEXT_NODE&&(o===t&&(o=t.previousSibling,r=o.textContent.length+r),t.previousSibling.textContent+=t.textContent||"",t.remove()),o&&e.dom.setCaretAt(o,r),e.triggerChange())}}];function dr(e,n){var r;let t=e.length;if(t!==0)for(let o=t-1;o>=0;o--){let a=e[o],l=a.previousSibling;l&&l.nodeName.toLowerCase()===n&&(l.textContent+=a.textContent||"",(r=a.parentNode)==null||r.removeChild(a))}}function Jt(e){var c,u;if(!e.trim())return e;let t=new DOMParser().parseFromString('<html><head><meta charset="utf-8"></head><body>'+e+"</body></html>","text/html"),r=t.querySelectorAll("*"),o=r.length;for(let m=1;m<o;m++){let p=r[m];cr(p)}let a=t.querySelector("body");a.normalize();let l=t.querySelectorAll("body span");o=l.length;for(let m=o-1;m>=0;m--){let p=l[m],f=p.previousSibling,g=p.getAttribute("style");f&&(f.nodeType===3&&!g||f.nodeName==="SPAN"&&g===f.getAttribute("style"))&&(f.textContent+=p.textContent||"",(c=p.parentNode)==null||c.removeChild(p))}let s=t.querySelectorAll("body b");for(let m=s.length-1;m>=0;m--){let p=s[m],f=document.createElement("strong");f.innerHTML=p.innerHTML,p.replaceWith(f)}s=t.querySelectorAll("body i");for(let m=s.length-1;m>=0;m--){let p=s[m],f=document.createElement("em");f.innerHTML=p.innerHTML,p.replaceWith(f)}["strong","em","u","strike","sub","sup","strong","em","u","strike","sub","sup"].forEach(m=>{dr(Array.from(t.querySelectorAll("body "+m)),m)});let i=t.querySelectorAll("body > meta, body > title, body > style");for(let m=i.length-1;m>=0;m--)i[m]&&((u=i[m].parentNode)==null||u.removeChild(i[m]));return a.innerHTML}function cr(e){let n="",t=e.nodeName.toLowerCase(),r=e.getAttribute("style");if(e.removeAttribute("class"),!r)return;if(["tr","td","th","tbody","tfoot"].indexOf(t)!==-1){e.removeAttribute("style");return}let o=e.getAttribute("align");o&&(o=o.trim().toLowerCase(),o!=="start"&&(r="text-align:"+o+";"+r),e.removeAttribute("align")),r.split(";").forEach(l=>{if(!l.trim())return;let s=l.split(":");if(s.length===1)return;let d=s[0].trim().toLowerCase(),i=s[1].trim();if(["inherit","auto","none","0px"].indexOf(i)===-1)switch(d){case"width":case"height":case"padding-left":parseFloat(i)!==0&&(n+=d+": "+i+";");break;case"color":n+=d+": "+i+";";break;case"text-align":o=i.toLowerCase(),o!=="start"&&(n+=d+": "+o+";");break;case"border":i.indexOf("0px")!==-1&&(n+=d+": "+i+";");break;case"background":i&&i.indexOf("url(")===0&&(n+=d+": "+e.style.background+";");break;case"background-color":i&&i.indexOf("transparent")===-1&&i.toLowerCase()!=="#fff"&&i.toLowerCase()!=="#ffffff"&&(n+=d+": "+i+";");break;default:break}}),n?e.setAttribute("style",n):e.removeAttribute("style")}var $t=[{event:"onPaste",target:[],callback:(e,n)=>{var o,a,l,s,d,i;if(n.preventDefault(),n.stopPropagation(),!n.clipboardData)return;let t=Jt(n.clipboardData.getData("text/html")||n.clipboardData.getData("text/plain")),{range:r}=e.getSelectionRange();if(r.deleteContents(),(o=e.feature)==null?void 0:o.path.includes("CODE")){if(r.endContainer.nodeType===Node.TEXT_NODE){let c=r.endOffset,u=c+t.length;r.endContainer.textContent=((a=r.endContainer.textContent)==null?void 0:a.substring(0,c))+t+((l=r.endContainer.textContent)==null?void 0:l.substring(c)),e.dom.setCaretAt(r.endContainer,u)}}else{let c=document.createElement("div");if(c.innerHTML=t,r.endContainer.nodeType===Node.TEXT_NODE){let u=document.createTextNode(r.endContainer.textContent.substring(r.endOffset));r.endContainer.textContent=r.endContainer.textContent.substring(0,r.endOffset),e.dom.nodesInsertAfter([...Array.from(c.childNodes),u],r.endContainer),e.dom.setCaretAt(u,0)}else r.insertNode(c),c.nextSibling?e.dom.setCaretAt(c.nextSibling,0):e.dom.setCaretAt(c.lastChild,((s=c.lastChild)==null?void 0:s.childNodes.length)||((i=(d=c.lastChild)==null?void 0:d.textContent)==null?void 0:i.length)),e.dom.unwrapNode(c)}e.triggerChange()}},{event:"onKeyUp",target:["ctrl+v","cmd+v"],callback:(e,n)=>(n.preventDefault(),n.stopPropagation(),!1)}];var ur=(e,n)=>{let t=[];do t.push(e),e=e.parentNode;while(n.dom.nodeIsTextInlineOrVoid(e));return t},en=[{event:"onKeyDown",target:["enter"],callback:e=>{if(!e.feature.path.includes("LI"))return;let{range:n}=e.getSelectionRange(),t=e.dom.selectDeepNodesInRange(n);if(t.length===0)return;let r=t[0].node,o=e.dom.nodeParent(r,"LI"),a=o==null?void 0:o.parentElement;!o||o.textContent!==""||e.dom.nodeParent(o.parentElement,"LI")||setTimeout(()=>{let l=a.nextElementSibling;if(l.nodeName==="DIV"&&l.textContent===""){if(a.previousElementSibling&&a.previousElementSibling.nodeName==="P"){let s=document.createElement("P");s.appendChild(document.createElement("BR")),l.replaceWith(s),e.dom.setCaretAt(s.firstChild,0)}else{let s=document.createElement("br");l.replaceWith(s),e.dom.setCaretAt(s,0)}e.triggerChange();return}},1)}},{event:"onKeyDown",target:["backspace"],callback:(e,n)=>{var i;if(!e.feature.path.includes("LI"))return;let{range:t}=e.getSelectionRange();if(t.startOffset!==0)return;let r=e.dom.selectDeepNodesInRange(t);if(r.length===0)return;let o=r[0].node,a=e.dom.nodeParent(o,"LI");if(!a||((i=a.textContent)==null?void 0:i.indexOf(o.textContent))!==0||a!==a.parentElement.firstElementChild)return;let l=e.dom.nodeParent(a.parentElement,"LI");if(!l)return;n.preventDefault(),n.stopPropagation();let s=a.parentElement,d=[];Array.from(a.parentElement.childNodes).forEach(c=>{c.textContent!==""&&d.push(c)}),e.dom.nodesInsertAfter(d,l),s.remove()}},{event:"onKeyDown",target:["tab"],callback:(e,n)=>{var d;if(!e.feature.path.includes("LI"))return;let{range:t}=e.getSelectionRange();if(t.startOffset!==0)return;let r=e.dom.selectDeepNodesInRange(t);if(r.length===0)return;let o=r[0].node,a=e.dom.nodeParent(o,"LI");if(!a||((d=a.textContent)==null?void 0:d.indexOf(o.textContent))!==0||a===a.parentElement.firstElementChild)return;n.preventDefault(),n.stopPropagation();let l=document.createElement("LI");Array.from(a.childNodes).forEach(i=>l.appendChild(i));let s=document.createElement("UL");s.appendChild(l),a.previousElementSibling.appendChild(s),r.forEach(i=>{if(i.node===o)return;let c=e.dom.nodeParent(i.node,"LI");s.appendChild(c)}),a.parentElement.removeChild(a),t.selectNode(s.firstElementChild),t.collapse(!0)}},{event:"onCommand",target:["list","ol","ul"],callback:(e,n,t)=>{var m,p,f,g;if((m=e.feature)==null?void 0:m.path.includes("CODE"))return;(n==="ol"||n==="ul")&&(t=n);let{range:r}=e.getSelectionRange(),o=t==="ol"?"UL":"OL",a=r.endContainer,l=r.endOffset,s=e.dom.selectDeepNodesInRange(r);r.collapse(!1);let d=()=>e.dom.setCaretAt(a,l);if(s.length===0)return;if(s[0].node===e.refContent&&e.refContent.textContent===""){e.refContent.appendChild(document.createElement(t)),(p=e.refContent.firstChild)==null||p.appendChild(document.createElement("li")),r.selectNode(e.refContent.firstChild.firstChild),r.collapse(!0),e.handleFeature(),e.triggerChange();return}let i=s[0].node,c=e.dom.nodeParentUntil(i,e.refContent);if(c.find(E=>E.nodeName==="CODE"))return;if(((g=(f=c.find(E=>E.nodeName==="LI"))==null?void 0:f.parentElement)==null?void 0:g.nodeName)===o){s.forEach(E=>{var b;let h=(b=e.dom.nodeParent(E.node,"LI",e.refContent))==null?void 0:b.parentElement;if(h&&h.nodeName!==t){let v=document.createElement(t);Array.from(h.childNodes).forEach(y=>v.appendChild(y)),h.parentElement.insertBefore(v,h),h.parentElement.removeChild(h)}}),d(),e.handleFeature(),e.triggerChange();return}if(s.find(E=>e.dom.nodeParentUntil(E.node,e.refContent).find(h=>h.nodeName==="LI"))){let E=[];s.forEach(h=>{let b=e.dom.nodeParent(h.node,"LI",e.refContent);E.push(b==null?void 0:b.parentElement),b&&(b!==b.parentElement.lastChild&&(b==null||b.appendChild(document.createElement("br"))),e.dom.unwrapNode(b,e.refContent))}),E.forEach(h=>{if(h.querySelectorAll("li").length===0){e.dom.unwrapNode(h,e.refContent);return}let b=null;for(let v=h.childNodes.length-1;v>=0;v--)h.childNodes[v].nodeName!=="LI"?(e.dom.nodesInsertAfter([h.childNodes[v]],h),b=null):b?b.insertBefore(h.childNodes[v],b.childNodes[0]):(b=document.createElement(h.nodeName),b.appendChild(h.childNodes[v]),e.dom.nodesInsertAfter([b],h));h.querySelectorAll("li").length===0&&e.dom.unwrapNode(h,e.refContent)}),d(),e.handleFeature(),e.triggerChange();return}let u=null;s.forEach(E=>{var v;let h=ur(E.node,e),b=h[h.length-1];(!u||b.previousElementSibling!==u)&&(u=document.createElement(t),b===e.refContent?e.refContent.appendChild(u):(v=b.parentElement)==null||v.insertBefore(u,b)),e.dom.wrapNode(b,document.createElement("li")),u==null||u.appendChild(b.parentElement)}),e.dom.setCaretAt(u.lastChild.lastChild,0),e.handleFeature(),e.triggerChange()}}];function pr(e,n){if(!e.feature.node)return;let t=e.dom.nodeParent(e.feature.node,"TABLE");!t||t.setAttribute("style",n)}function mr(e,n,t){var o;if(!e.feature.node)return;let r=e.dom.nodeParent(e.feature.node,"TD")||e.dom.nodeParent(e.feature.node,"TH");!r||(t==="cell"?r.setAttribute("style",n):t==="row"?Array.from((o=r.parentElement)==null?void 0:o.querySelectorAll(r.nodeName)).forEach(a=>a.setAttribute("style",n)):t==="all"&&Array.from(e.dom.nodeParent(r,"TBODY").querySelectorAll("TD")).forEach(a=>a.setAttribute("style",n)))}function gr(e,n){if(!e.feature.node)return;let t=e.dom.nodeParent(e.feature.node,"TD")||e.dom.nodeParent(e.feature.node,"TH");if(!t)return;let r={},o=e.dom.nodeParent(t,"TABLE"),a=o.querySelector("TBODY"),l=e.dom.nodePosition(t),s=e.getCfg("table.default.header.cell.style"),d=e.getCfg("table.default.cell.style"),i=e.dom.table.cellList(o,!0),c=e.dom.table.cellList(o,!0,!0),u=(p,f=!0)=>{let g=Array.from(o.querySelectorAll("TR")).indexOf(p);return f?c[g]:i[g]},m=p=>u(p.parentElement).indexOf(p);r.insert_header=()=>{let p=Array.from(e.dom.nodeParent(t,"TR").querySelectorAll("td"));if(o.querySelector("thead"))return;let g=document.createElement("thead");g.appendChild(document.createElement("tr"));for(let E=0,h=p.length;E<h;E++){let b=document.createElement("th");p[E].colSpan>1&&b.setAttribute("colspan",p[E].colSpan.toString()),s&&b.setAttribute("style",s),b.appendChild(document.createElement("br")),g.childNodes[0].appendChild(b)}o.insertBefore(g,o.querySelector("tbody"))},r.delete_header=()=>{let p=e.dom.nodeParent(t,"THEAD");p&&(e.dom.setCaretAt(a.querySelectorAll("td")[l],0),p.parentNode.removeChild(p))},r.delete_row=()=>{let p=e.dom.nodeParent(t,"TR");if(!p)return;let f=e.dom.nodePosition(p),g=0,E=Array.from(p.parentElement.childNodes);f+1<E.length?g=f+1:f>0&&(g=f-1),E.length>1&&E[g]&&e.dom.setCaretAt(E[g].childNodes[Math.min(l,E[g].childNodes.length-1)],0);let h=null;u(p,!1).forEach(b=>{let v=e.dom.table.rowSpan(b);if(h!==b){if(h=b,!p.contains(b)){1<v&&(v===2?b.removeAttribute("rowspan"):b.setAttribute("rowspan",(v-1).toString()));return}if(v>1&&p.nextElementSibling){let y=u(p.nextElementSibling,!1),w=y.indexOf(b);if(w!==-1){let T=y.find((S,x)=>x<w&&S!==null&&p.nextElementSibling.contains(S));T?e.dom.nodesInsertAfter([b],T):p.nextElementSibling.insertBefore(b,p.nextElementSibling.childNodes[0]),1<v&&(v===2?b.removeAttribute("rowspan"):b.setAttribute("rowspan",(v-1).toString()))}}}}),p.parentNode.removeChild(p),a.querySelectorAll("td").length===0&&o.remove()},r.delete_column=()=>{let p=e.dom.nodeParent(t,"TR");if(!p||!o||!p.childElementCount||l===-1)return;if(p.childNodes.length===1){o.remove();return}t.nextElementSibling?e.dom.setCaretAt(t.nextElementSibling,0):t.previousElementSibling&&e.dom.setCaretAt(t.previousElementSibling,0);let f=m(t),g=e.dom.table.colSpan(t),E=Array.from(o.querySelectorAll("tr")),h=c,b=[];for(var v=0;v<g;v++)b.push(f+v);E.forEach((y,w)=>{if(y===p)y.removeChild(y.childNodes[l]);else{let x=h[w],A=null;for(var T=0,S=b.length;T<S;T++){if(A===x[b[T]]||!x[b[T]])continue;A=x[b[T]];let I=e.dom.table.colSpan(A);I===1?(y.removeChild(A),A=null):I-1==1?A.removeAttribute("colspan"):A.setAttribute("colspan",(I-1).toString())}}}),(a==null?void 0:a.querySelectorAll("td").length)===0&&o.remove()},r.insert_row_above=()=>{let p=e.dom.nodeParent(t,"TR"),f=p.querySelectorAll("td");if(!p||!a||!f.length)return;let g=document.createElement("tr");for(let E=0,h=p.childElementCount;E<h;E++){let b=p.childNodes[E].cloneNode(!1);d&&b.setAttribute("style",d),b.appendChild(document.createElement("br")),g.appendChild(b)}a.insertBefore(g,p)},r.insert_row_below=()=>{let p=e.dom.nodeParent(t,"TR"),f=document.createElement("tr");for(let g=0,E=p.childElementCount;g<E;g++){let h=p.childNodes[g].cloneNode(!1);d&&h.setAttribute("style",d),h.appendChild(document.createElement("br")),f.appendChild(h)}e.dom.nodesInsertAfter([f],p)},r.insert_column_left=()=>{let p=c,f=m(t),g=Array.from(o.querySelectorAll("tr")),E=g.indexOf(t.parentElement),h=f;if(p[E][h]===null)for(let v=E;v>=0&&(h--,p[E][h]===null);v--);let b=e.dom.table.colSpan(t)===1&&h===f;g.forEach((v,y)=>{let w=p[y],T=w[h];if(!T)return;if(b&&h>0&&w[h-1]===T){let A=e.dom.table.colSpan(T)+1;T.setAttribute("colspan",A.toString());return}let S=document.createElement(T.nodeName);d&&S.setAttribute("style",d),S.appendChild(document.createElement("br"));let x=e.dom.table.rowSpan(T);x>1&&S.setAttribute("rowspan",x.toString()),v.insertBefore(S,T)})},r.insert_column_right=()=>{let p=c,f=m(t),g=Array.from(o.querySelectorAll("tr")),E=g.indexOf(t.parentElement),h=f;if(p[E][h]===null)for(let v=E;v>=0&&(h--,p[E][h]===null);v--);for(;p[E].length>h+1&&p[E][h+1]===p[E][h];)h++;let b=e.dom.table.colSpan(t)===1&&h===f;g.forEach((v,y)=>{let w=p[y],T=w[h];if(!T)return;if(b&&h+1<w.length&&w[h+1]===T){let A=e.dom.table.colSpan(T)+1;T.setAttribute("colspan",A.toString());return}let S=document.createElement(T.nodeName);d&&S.setAttribute("style",d),S.appendChild(document.createElement("br"));let x=e.dom.table.rowSpan(T);x>1&&S.setAttribute("rowspan",x.toString()),e.dom.nodesInsertAfter([S],T)})},r.merge_down=()=>{let p=e.dom.nodeParent(t,"TR"),f=a.querySelectorAll("tr"),g=e.dom.nodePosition(p),E=parseInt(t.getAttribute("rowspan")||"1",10);if(f.length<=g+E)return;let h=u(f[g]),b=u(f[g+E]),v=h.indexOf(t);if(e.dom.table.colSpan(h[v])===e.dom.table.colSpan(b[v]))if(e.dom.nodeChildInsertInto(t,b[v]),f[g+E].removeChild(b[v]),f[g+E].childElementCount===0&&f[g+E].remove(),p.childNodes.length===1)t.removeAttribute("rowspan");else{let y=parseInt(t.getAttribute("rowspan")||"1",10)+1;t.setAttribute("rowspan",y.toString())}},r.merge_right_header=()=>{let p=e.dom.nodeParent(t,"TR"),f=e.dom.nodePosition(t);if(p.childElementCount<=f+1)return;let g,E=p.querySelectorAll("th");if(E.length>f+1&&E[f+1]&&(g=E[f+1]),g){e.dom.nodeChildInsertInto(t,g);let h=parseInt(t.getAttribute("colspan")||"1",10)+1;t.setAttribute("colspan",h.toString()),g.parentNode.removeChild(g)}},r.merge_right=()=>{if(t.nodeName==="TH")return r.merge_right_header();let p=e.dom.nodeParent(t,"TR"),f=a.querySelectorAll("tr"),g=e.dom.nodePosition(t),E=e.dom.nodePosition(p),h=parseInt(t.getAttribute("rowspan")||"1",10);if(p.childNodes.length<=g+1)return;let b=h;for(var v=E;v<E+h&&f[v];v++){let w=f[v].querySelectorAll("td"),T=v===E?g+1:g;if(w[T]){let S=parseInt(w[T].getAttribute("rowspan")||"1",10);if(e.dom.nodeChildInsertInto(t,w[T]),f[v].removeChild(w[T]),b-=S,b<=0){for(;b<0;){let x=document.createElement("td");x.appendChild(document.createElement("br")),f[v].childElementCount>g?f[v].insertBefore(x,f[v].childNodes[g]):f[v].appendChild(x),b++}f[v].childElementCount===0&&f[v].parentNode.removeChild(f[v]);break}}}h>1&&p.childNodes.length===1&&t.removeAttribute("rowspan");let y=parseInt(t.getAttribute("colspan")||"1",10)+1;t.setAttribute("colspan",y.toString())},r.unmerge_header=()=>{let p=e.dom.nodePosition(t),f=parseInt(t.getAttribute("colspan")||"1",10);if(f!==1){for(let g=p+1;g<p+f;g++){let E=document.createElement(t.nodeName);d&&E.setAttribute("style",d),E.appendChild(document.createElement("br")),e.dom.nodesInsertAfter([E],t)}t.removeAttribute("colspan")}},r.unmerge=()=>{if(t.nodeName==="TH")return r.unmerge_header();let p=e.dom.nodeParent(t,"TR"),f=a.querySelectorAll("tr"),g=e.dom.nodePosition(t),E=e.dom.nodePosition(p),h=parseInt(t.getAttribute("rowspan")||"1",10),b=parseInt(t.getAttribute("colspan")||"1",10);if(!(h===1&&b===1)){for(let v=E;v<E+h;v++){let y=f[v],w=y.querySelectorAll(t.nodeName);if(v>E){let T=document.createElement(t.nodeName);d&&T.setAttribute("style",d),T.appendChild(document.createElement("br")),y.insertBefore(T,w[g]),w=y.querySelectorAll(t.nodeName)}for(let T=g+1;T<g+b;T++){let S=document.createElement(t.nodeName);d&&S.setAttribute("style",d),S.appendChild(document.createElement("br")),v===E?e.dom.nodesInsertAfter([S],w[g]):w[g].parentElement.insertBefore(S,w[g])}}t.removeAttribute("rowspan"),t.removeAttribute("colspan")}},typeof r[n]=="function"&&r[n](),e.triggerChange()}var tn=[{event:"registerLanguage",target:[],callback:()=>{let e={};return e.en={table:"table","TABLE STYLE":"TABLE STYLE",Apply:"Apply","CELL STYLE":"CELL STYLE","Apply To":"Apply To",All:"All",Cell:"Cell",Row:"Row","INSERT HEADER":"INSERT HEADER","DELETE HEADER":"DELETE HEADER","INSERT ROW ABOVE":"INSERT ROW ABOVE","INSERT ROW BELOW":"INSERT ROW BELOW","INSERT COLUMN LEFT":"INSERT COLUMN LEFT","INSERT COLUMN RIGHT":"INSERT COLUMN RIGHT","DELETE ROW":"DELETE ROW","DELETE COLUMN":"DELETE COLUMN","MERGE DOWN":"MERGE DOWN","MERGE RIGHT":"MERGE RIGHT",UNMERGE:"UNMERGE"},e}},{event:"onKeyDown",target:["tab"],callback:(e,n)=>{if(!e.feature.path.includes("TD")&&!e.feature.path.includes("TH")&&!e.feature.path.includes("TABLE"))return;let t=e.dom.nodeParent(e.feature.node,"TD")||e.dom.nodeParent(e.feature.node,"TH");if(!t)return;let r=e.feature.pathNode[e.feature.path.indexOf("TABLE")];if(!r)return;let o=Array.from(r.querySelectorAll("TH,TD")),a=o.indexOf(t);a!==-1&&(n.preventDefault(),n.stopPropagation(),a===o.length-1?(e.refContent.lastElementChild===r&&e.refContent.appendChild(document.createElement("br")),e.dom.setCaretAt(r.nextSibling,0)):e.dom.setCaretAt(o[a+1],0))}},{event:"onCommand",target:["table"],callback:(e,n,t,r,o)=>{var v;let a=t.split(",");if(a.length===1){t==="table_style"?pr(e,r):t==="cell_style"?mr(e,r,o):gr(e,t);return}let l=[],s=[],d=[],i=parseInt(a[0],10),c=parseInt(a[1],10);for(let y=0;y<c;y++)s.push("<th>header "+(y+1)+"</th>");l.push("<tr>"+s.join("")+"</tr>");for(let y=0;y<i;y++){let w=[];for(let T=0;T<c;T++)w.push("<td><br></td>");d.push("<tr>"+w.join("")+"</tr>")}let u=document.createElement("table");u.innerHTML="<thead>"+l.join("")+"</thead><tbody>"+d.join("")+"</tbody>";let m=e.feature.path.findIndex(y=>["BLOCKQUOTE","PRE","CODE","OL","UL","TABLE"].indexOf(y)!==-1);if(m!==-1)e.dom.nodesInsertAfter([document.createElement("br"),u],e.feature.path.length>m+1&&e.feature.path[m]==="CODE"&&e.feature.path[m+1]==="PRE"?e.feature.pathNode[m+1]:e.feature.pathNode[m]);else{let{range:y}=e.getSelectionRange();y.deleteContents(),y.insertNode(u)}let p=e.getCfg("table.default.table.style"),f=e.getCfg("table.default.header.cell.style"),g=e.getCfg("table.default.cell.style");p&&u.setAttribute("style",p),f&&Array.from(u.querySelectorAll("TH")).forEach(y=>y.setAttribute("style",f)),g&&Array.from(u.querySelectorAll("TBODY TD")).forEach(y=>y.setAttribute("style",g));let b=(y=>{let w=[];for(w.push(y);e.dom.nodeIsTextInlineOrVoid(y)&&y!==e.refContent&&["DIV","TD","TH","LI"].indexOf(y.nodeName)===-1;)y=y.parentNode,w.push(y);return w})(u).find(y=>y.nodeName==="P");if(b&&u.parentElement){((v=u.parentElement)==null?void 0:v.nodeName)==="P"&&e.dom.nodeBreak(b,u);let y=document.createElement("p");if(u.parentElement.lastChild===u)e.dom.nodesInsertAfter([u],u.parentElement);else{for(let w=Array.from(u.parentElement.childNodes).indexOf(u)+1,T=u.parentElement.childNodes.length;w<T;w++)y.appendChild(u.parentElement.childNodes[w]);e.dom.nodesInsertAfter([u,y],u.parentElement)}}e.refContent.lastChild===u&&e.refContent.appendChild(document.createElement("br")),e.dom.setCaretAt(u.querySelector("tbody td"),0),e.triggerChange()}}];var Le=e=>{let n={"image.features":["url","upload","library"],"image.accept.types":"image/jpeg, image/jpg, image/png, image/apng, image/gif, image/webp","image.library.fetch":null,"image.library.per.page":20,"image.library.allow.paging":!0,"image.library.allow.search":!0,"image.upload.url":"","image.upload.max.size":0,"image.upload.max.size.per.file":0,"image.upload.accept.files":0,"image.upload.handler":null,"image.url.rewrite.handler":t=>t.replace("http://","//").replace("https://","//")};return Object.keys(n).forEach(t=>{n[t]=e.getCfg(t)}),n},Ae=(e,n)=>{let t=Le(e);if(typeof t["image.library.fetch"]!="function")return;n.classList.remove("horizontal"),n.innerHTML='<div class="padding"><div class="FileTileImageGrid ImageLibrary"></div></div>',e.setCache("image.library.current.keyword","");let r=(a,l)=>{(e.getCache("image.library.current.keyword")||"")!==l&&(a=1),e.setCache("image.library.current.page",a),e.setCache("image.library.current.keyword",l),t["image.library.fetch"](a,t["image.library.per.page"],l,(d,i)=>{var f;let c=t["image.library.per.page"]?Math.ceil(d/t["image.library.per.page"]):1,u=n.querySelector(".FileTileImageGrid");if(u.innerHTML="",i.forEach(g=>{let E=g.tileFunc?g.tileFunc():fr(g);u.appendChild(E),E.addEventListener("click",h=>(h.preventDefault(),h.stopPropagation(),e.command("image",["library",g]),e.toolbar.hideDropdown(),!1))}),(f=e.toolbar)==null||f.adjustContentPosition(n),u.parentElement.querySelector(".FileTileImageGridFooter")&&u.parentElement.removeChild(u.parentElement.querySelector(".FileTileImageGridFooter")),!t["image.library.allow.paging"]&&!t["image.library.allow.search"])return;let m=document.createElement("div");m.setAttribute("class","FileTileImageGridFooter");let p=document.createElement("nav");if(p.setAttribute("class","FileTileImageGridPagination"),m.appendChild(p),u.parentElement.appendChild(m),t["image.library.allow.paging"]){let g=document.createElement("a");g.setAttribute("class","previous se-button"),p.appendChild(g),g.innerHTML='<span class="se-icon">'+C.svgList.previous+"</span>";let E=document.createElement("span");p.appendChild(E);let h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("class","current"),h.value=a.toString(),E.appendChild(h);let b=document.createElement("span");b.setAttribute("class","total"),b.innerHTML="/ "+c,E.appendChild(b);let v=document.createElement("a");v.setAttribute("class","next se-button"),p.appendChild(v),v.innerHTML='<span class="se-icon">'+C.svgList.next+"</span>",g.addEventListener("click",y=>{y.stopPropagation(),y.preventDefault();let w=p.querySelector("input.keyword").value||"";return w!==l?r(1,w):a>1&&r(a-1,w),!1}),v.addEventListener("click",y=>{y.stopPropagation(),y.preventDefault();let w=p.querySelector("input.keyword").value||"";return w!==l?r(1,w):a<c&&r(a+1,w),!1}),h.addEventListener("keydown",y=>{if(y.key!=="Enter")return;y.preventDefault(),y.stopPropagation();let w=parseInt(p.querySelector("input.current").value,10),T=p.querySelector("input.keyword").value||"";return T!==l?r(1,T):w!=a&&w>0&&w<=c&&r(w,T),!1}),h.addEventListener("blur",()=>{let y=parseInt(p.querySelector("input.current").value,10),w=p.querySelector("input.keyword").value||"";w!==l?r(1,w):y!=a&&y>0&&y<=c&&r(y,w)})}if(t["image.library.allow.search"]){let g=document.createElement("input");g.setAttribute("type","text"),g.setAttribute("class","keyword"),g.setAttribute("keyword",e.ln("keyword")),g.value=l,p.appendChild(g);let E=document.createElement("a");E.setAttribute("class","search se-button"),p.appendChild(E),E.innerHTML='<span class="se-icon">'+C.svgList.search+"</span>",E.addEventListener("click",h=>{h.stopPropagation(),h.preventDefault();let b=g.value||"";return b!==l&&r(1,b),!1})}})},o=e.getCache("image.library.current.page");r(o&&typeof o=="string"?parseInt(o,10):o||1,e.getCache("image.library.current.keyword")||""),e.toolbar.adjustContentPosition(n),e.toolbar.insertCloseButton(n.parentElement.parentElement)},nn=e=>e.indexOf("image/")!==-1,fr=e=>{let n=document.createElement("button");return nn(e.type)?n.innerHTML='<figure><figure><img src="'+(e.thumb||e.url)+'" alt="'+e.name+'"></figure></figure><span class="caption">'+e.name+"</span>":n.innerHTML='<figure><figure><span class="text">'+e.name+'</span></figure></figure><span class="caption">'+e.name+"</span>",n},hr=(e,n,t,r,o)=>{let a=e.getCfg("image.upload.url")||"",l=e.getCfg("image.upload.handler"),s=e.getCfg("image.url.rewrite.handler");if(!a)return;var d=new XMLHttpRequest;d.open("POST",a);let i=new FormData;i.append("file",t),d.upload.addEventListener("progress",c=>{let u=Math.min(100,Math.floor(c.loaded/c.total*1e4)/100);r.querySelector(".text").innerHTML=e.ln("uploading")+" "+u+"%"}),d.addEventListener("error",()=>{d.abort()}),d.onreadystatechange=function(){if(d.readyState===4){if(d.status===0){r.classList.add("failed"),r.querySelector(".text").innerHTML=e.ln("upload failed"),e.cachedList["image.upload.result.list"][n]={status:"failed"},o(!1);return}l(t,d.responseText,(c,u,m,p=void 0)=>{r.classList.add("completed");let f=typeof s=="function"?s(c):c,g=typeof s=="function"?s(u):u;if(e.cachedList["image.upload.result.list"][n]={status:"completed",name:t.name,type:t.type,url:f,thumb:g,obj:m,elFunc:p},nn(t.type)){let E=document.createElement("img");E.setAttribute("src",g),r.setAttribute("data-thumb",g),r.querySelector("figure figure").innerHTML=E.outerHTML}else r.querySelector(".text").innerHTML=t.type==="text/plain"?"TXT":t.type.substring(t.type.indexOf("/")+1).toUpperCase();r.setAttribute("data-url",f),o(!0)})}},d.send(i)},rn=(e,n)=>{var p;n.classList.remove("horizontal");let t=e.getCfg("image.accept.types")||"",r=e.getCfg("image.upload.accept.files")||0,o=e.getCfg("image.upload.max.size")||0,a=e.getCfg("image.upload.max.size.per.file")||0;n.innerHTML="",e.dom.appendString2Node('<div class="padding"><div class="uploadcontainer"><strong>'+e.ln("drop or click to upload image")+'</strong><input type="file" name="file" '+(r>0?"multiple":"")+"></div></div>",n),(p=e.toolbar)==null||p.adjustContentPosition(n),e.toolbar.insertCloseButton(n.parentElement.parentElement);let l=n.querySelector('input[type="file"]'),s=l.parentElement;t&&l.setAttribute("accept",t),e.cachedList["image.upload.result.list"]=[];let d,i,c,u,m=f=>{if(s.style.display="none",n.querySelector(".FileTileImageGridContainer"))i=n.querySelector(".FileTileImageGridContainer"),d=n.querySelector(".FileTileImageGrid"),c=n.querySelector(".upload_again"),u=n.querySelector(".insert");else{d=document.createElement("div"),d.classList.add("FileTileImageGrid"),i=document.createElement("div"),i.classList.add("FileTileImageGridContainer"),i.appendChild(d),s.parentElement.appendChild(i);let b=document.createElement("div");s.parentElement.querySelector(".FileTileImageGridFooter")&&s.parentElement.removeChild(s.parentElement.querySelector(".FileTileImageGridFooter")),b.classList.add("FileTileImageGridFooter"),s.parentElement.appendChild(b),u=document.createElement("button"),u.innerHTML=e.ln("UPLOADING..."),u.setAttribute("disabled","disabled"),u.setAttribute("class","button insert"),b.appendChild(u),c=document.createElement("button"),c.innerHTML=e.ln("START OVER"),c.setAttribute("class","se-button upload_again"),c.style.display="none",u.parentElement.insertBefore(c,u),c.addEventListener("click",v=>(v.preventDefault(),v.stopPropagation(),rn(e,n),!1)),u.addEventListener("click",v=>(v.preventDefault(),v.stopPropagation(),e.command("image",["upload"]),e.toolbar.hideDropdown(),!1))}let g=d.querySelectorAll("button").length,E=g,h=0;if(o>0||a>0){let b=!1,v=!1,y=0;if(Array.from(f).forEach(w=>{a>0&&w.size/1048576>a&&(v=!0),y+=w.size,o>0&&y/1048576>o&&(b=!0)}),b||v){s.style.display="",i.remove(),s.parentElement.querySelector(".FileTileImageGridFooter")&&s.parentElement.removeChild(s.parentElement.querySelector(".FileTileImageGridFooter"));let w=s.querySelector("strong"),T=w.innerHTML,S="";b&&(S="<small>"+e.ln("max allowed size of all files in total should be ")+" "+o+"MB. </small>"),v&&(S+="<small>"+e.ln("max allowed size per file should be ")+" "+a+"MB. </small>"),w.innerHTML=S,setTimeout(()=>{w.innerHTML=T},5e3);return}}if(Array.from(f).forEach(b=>{if(t.indexOf(b.type)===-1&&t.indexOf(b.type.substring(0,b.type.indexOf(""))+"/*")===-1||r>0&&g+1>r)return;g++;let v=document.createElement("button");e.dom.appendString2Node('<figure><figure><span class="text">uploading 0%</span></figure></figure><span class="caption">'+b.name+"</span>",v),v.addEventListener("click",y=>(y.preventDefault(),y.stopPropagation(),!1)),d.appendChild(v),e.cachedList["image.upload.result.list"].push({}),hr(e,g-1,b,v,y=>{var w;if(E++,y||h++,E>=g){if((w=n.querySelector(".FileTileImageGrid button.upload"))==null||w.remove(),h>0&&E===h)c.style.display="",u.style.display="none";else if(u.removeAttribute("disabled"),u.innerHTML=e.ln("insert"),r===0||g<r){let T=document.createElement("button");T.setAttribute("class","upload"),T.innerHTML=C.svgList.plus,d.appendChild(T);let S=document.createElement("input");S.setAttribute("type","file"),(r===0||r-g>1)&&S.setAttribute("multiple",""),T.appendChild(S),T.addEventListener("drop",x=>{x.preventDefault(),x.stopPropagation(),!(!x.dataTransfer.files||!x.dataTransfer.files.length)&&m(x.dataTransfer.files)}),S.addEventListener("change",x=>{x.preventDefault(),x.stopPropagation();let A=x.target;if(A._mockfiles!=="undefined"){m(A._mockfiles);return}!A.files||A.files.length===0||m(A.files)})}}}),e.toolbar.adjustContentPosition(n)}),g===0){s.style.display="",i.remove(),s.parentElement.querySelector(".FileTileImageGridFooter")&&s.parentElement.removeChild(s.parentElement.querySelector(".FileTileImageGridFooter"));let b=s.querySelector("strong"),v=b.innerHTML;b.innerHTML="<small>"+e.ln("please select the appropriate file types:")+" "+t+"</small>",setTimeout(()=>{b.innerHTML=v},5e3)}};s.addEventListener("drop",f=>{f.preventDefault(),f.stopPropagation(),!(!f.dataTransfer.files||!f.dataTransfer.files.length)&&m(f.dataTransfer.files)}),l.addEventListener("change",f=>{f.preventDefault(),f.stopPropagation();let g=f.target;if(g._mockfiles!=="undefined"){m(g._mockfiles);return}!g.files||g.files.length===0||m(g.files)})},on=(e,n)=>{var t;n.classList.remove("horizontal"),n.innerHTML="",e.dom.appendString2Node('<div class="padding"><div class="se-dropdown-item"><input type="text" name="url"><label>'+e.ln("image url")+'</label></div><div style="text-align: right;margin-right:5px"><button class="se-button insert">'+e.ln("insert")+"</button></div></div>",n),e.toolbar.insertCloseButton(n.parentElement.parentElement),(t=e.toolbar)==null||t.adjustContentPosition(n),n.querySelector("button.insert").addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();let o=n.querySelector("input").value||"";return o&&(e.command("image",["url",o]),e.toolbar.hideDropdown()),!1})},an=[{event:"registerSvg",target:[],callback:()=>({test:C.svgList.b})},{event:"registerCss",target:[],callback:()=>({})},{event:"registerLanguage",target:[],callback:()=>{let e={};return e.en={image:"image",uploading:"uploading","upload failed":"upload failed","drop or click to upload image":"drop or click to upload image",insert:"insert","please select the appropriate file types:":"please select the appropriate file types:","max allowed size per file should be ":"max allowed size per file should be ","max allowed size of all files in total should be ":"max allowed size of all files in total should be ","UPLOADING...":"UPLOADING...","START OVER":"START OVER"},e}},{event:"registerToolbarItem",target:[],callback:e=>({library:{command:"library",svg:C.svgList.image_library,tips:e.ln("image library"),dropdowncontent:'<div class="se-dropdown se-ToolbarItem" data-tips="'+e.ln("image library")+'"><div class="se-dropdown-trigger"><button class="se-button" aria-haspopup="true" aria-controls="dropdown-menu-image"><span></span><span class="se-icon">'+C.svgList.image_library+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-image" role="menu"><div class="se-dropdown-content se-control"></div></div></div>',onRender:(n,t)=>{var o;let r=t.querySelector(".se-dropdown-menu");(o=t.querySelector(".se-dropdown-trigger > button"))==null||o.addEventListener("click",()=>{if(!r.classList.contains("is-active")){e.setCache("currentSelection",n.selection),n.handleFeature();let a=Le(e),l=t.querySelector(".se-dropdown-content");if(!l.querySelector(".ImageLibrary")){if(typeof a["image.library.fetch"]!="function")return;Ae(n,l)}}})}}})},{event:"registerToolbarItem",target:[],callback:e=>({image:{command:"image",svg:C.svgList.image,tips:e.ln("image"),dropdowncontent:'<div class="se-dropdown se-ToolbarItem" data-tips="'+e.ln("image")+'"><div class="se-dropdown-trigger"><button class="se-button" aria-haspopup="true" aria-controls="dropdown-menu-image"><span></span><span class="se-icon">'+C.svgList.image+'</span></button></div><div class="se-dropdown-menu" id="dropdown-menu-image" role="menu"><div class="se-dropdown-content se-control"></div></div></div>',onRender:(n,t)=>{var o;let r=t.querySelector(".se-dropdown-menu");(o=t.querySelector(".se-dropdown-trigger > button"))==null||o.addEventListener("click",()=>{if(!r.classList.contains("is-active")){e.setCache("currentSelection",n.selection),n.handleFeature();let a=Le(e),l=a["image.features"]||[],s=t.querySelector(".se-dropdown-content");if(l.length===1&&l[0]==="library"){if(!s.querySelector(".ImageLibrary")){if(typeof a["image.library.fetch"]!="function")return;Ae(n,s)}}else l.length===0||l.length===1&&l[0]==="url"?on(n,s):(s.classList.add("horizontal"),s.innerHTML="",l.forEach(d=>{switch(d){case"url":e.dom.appendString2Node('<span class="se-button se-ToolbarItem" data-command="'+d+'" data-value="'+d+'" data-tips="image '+d+'"><span class="se-icon">'+C.svgList.link+"</span></span>",s),s.querySelector('span.se-button[data-value="url"]').addEventListener("click",i=>(on(n,s),i.preventDefault(),i.stopPropagation(),!1));break;case"upload":if(!a["image.upload.url"])return;e.dom.appendString2Node('<span class="se-button se-ToolbarItem" data-command="'+d+'" data-value="'+d+'" data-tips="image '+d+'"><span class="se-icon">'+C.svgList.upload+"</span></span>",s),s.querySelector('span.se-button[data-value="upload"]').addEventListener("click",i=>(rn(n,s),i.preventDefault(),i.stopPropagation(),!1));break;case"library":if(typeof a["image.library.fetch"]!="function")return;e.dom.appendString2Node('<span class="se-button se-ToolbarItem" data-command="'+d+'" data-value="'+d+'" data-tips="image '+d+'"><span class="se-icon">'+C.svgList.image_library+"</span></span>",s),s.querySelector('span.se-button[data-value="library"]').addEventListener("click",i=>(Ae(n,s),i.preventDefault(),i.stopPropagation(),!1));break}}))}})}}})},{event:"onCommand",target:["image"],callback:(e,n,t,r)=>{var s,d;let{range:o}=e.getSelectionRange(),a=[];if(t==="upload"){let i=[];e.cachedList["image.upload.result.list"].forEach(c=>{if(c.status!=="failed"){if(typeof c.elFunc=="function"){i.push(c.elFunc());return}if(c.type.indexOf("image/")!==-1){let u=document.createElement("img");u.setAttribute("data-action",t),u.setAttribute("src",c.url),u.setAttribute("style","max-width:100%"),i.push(u)}else{let u=document.createElement("a");u.setAttribute("data-action",t),u.setAttribute("href",c.url),u.setAttribute("target","_blank"),u.innerHTML=c.name,i.push(u)}}}),a=[];for(let c=0,u=i.length;c<u;c++)a.push(i[c]),c<u-1&&a.push(document.createElement("br"))}else if(t==="library"){if(typeof r.elFunc=="function")a.push(r.elFunc());else if(r.type&&r.url)if(r.type.indexOf("image/")!==-1){let i=document.createElement("img");i.setAttribute("data-action",t),i.setAttribute("src",r.url),i.setAttribute("style","max-width:100%"),a.push(i)}else{let i=document.createElement("a");i.setAttribute("data-action",t),i.setAttribute("href",r.url),i.setAttribute("target","_blank"),i.innerHTML=r.name||r.url,a.push(i)}}else if(t==="url"){let i=document.createElement("img");i.setAttribute("data-action",t),i.setAttribute("src",r),i.setAttribute("style","max-width:100%"),a.push(i)}if(o.endContainer.parentElement.nodeName==="CODE"){let i=o.endContainer.parentElement;i.parentElement.nodeName==="PRE"&&(i=i.parentElement),e.dom.nodesInsertAfter(a,i)}else{o.deleteContents(),a.reverse(),a.forEach(i=>o.insertNode(i)),o.setEndAfter(a[a.length-1]);for(var l=a.length-1;l>=0;l--)["TABLE","UL","OL"].indexOf(a[l].parentElement.nodeName)!==-1&&e.dom.nodesInsertAfter([a[l]],a[l].parentElement)}if(e.refContent.lastChild===a[0])if(((d=(s=e.refContent.lastElementChild)==null?void 0:s.previousElementSibling)==null?void 0:d.nodeName)==="P"){let i=document.createElement("p");i.appendChild(document.createElement("br")),e.refContent.appendChild(i),o.setEndBefore(i.childNodes[0])}else e.refContent.appendChild(document.createElement("br")),o.setEndAfter(e.refContent.lastChild);o.collapse(!1),e.triggerChange()}}];var br={fullscreen:Vt,hr:Bt,color:qt,source:Ft,align:_t,text:Ut,undo:zt,redo:Kt,indent:jt,format:Xt,remove_format:Qt,link:Yt,paste:$t,list:en,table:tn,image:an},Ne=br;"use strict";var L=class{constructor(n,t){this.cfgList={};this.cachedList={};this.lang="en";this.autoGrow=!1;this.height=0;this.cacheTextareaStyle="";this.debounceChange=()=>{};this.onChange=()=>{};this.event=new ne(this);this.feature=null;this.dom=Q;this.docListener={};this.callbackList={};var o;L.initSvg(t.svgList||{}),L.initLang(t.langList||{}),typeof n._SubEditor!="undefined"&&n._SubEditor.destroy(),t.lang&&(this.lang=t.lang),t.ln&&(this.lnFunc=t.ln),t.cfgList&&(this.cfgList=t.cfgList),t.instance&&t.instance(this),this.refEl=n,this.refEl._SubEditor=this,this.refEditor=document.createElement("div"),this.refContent=document.createElement("div"),this.refFooter=document.createElement("div");let r=document.createElement("div");r.classList.add("SubEditorContentContainer"),r.appendChild(this.refContent),this.refEditor.appendChild(r),this.refEditor.appendChild(this.refFooter),n.tagName==="TEXTAREA"?(this.refTextarea=n,(o=this.refTextarea.parentNode)==null||o.insertBefore(this.refEditor,this.refTextarea)):(this.refTextarea=document.createElement("textarea"),n.appendChild(this.refEditor),n.appendChild(this.refTextarea)),this.refEditor.classList.add("SubEditor"),this.refContent.classList.add("SubEditorContent"),this.refFooter.classList.add("SubEditorFooter"),this.cacheTextareaStyle=this.refTextarea.getAttribute("style")||"",this.refEditor.style.width=(t.width?t.width:this.refTextarea.clientWidth)+"px",this.height=t.height?t.height:this.refTextarea.clientHeight,this.refEditor.style.height=this.height+"px",this.refTextarea.style.display="none",this.refTextarea.classList.add("SubEditorTextarea"),t.value&&(this.refTextarea.value=t.value),this.refContent.innerHTML=this.refTextarea.value,this.refContent.setAttribute("contenteditable","true"),this.history=new Xe(this.refContent),this.history.Next(),t.onChange&&(this.onChange=t.onChange),this.toolbar=new Z(this),this.refToolbar=this.refEditor.querySelector(".SubEditorToolbar"),this.initPlugins(t.pluginList||[]),this.initEvents(),this.event.trigger("registerCss","",[]),L.initCss(t.css||"",t.skipCss===!0),this.event.trigger("registerSvg","",[]),this.event.trigger("registerLanguage","",[]),this.event.trigger("registerToolbarItem","",[]),this.initToolbarItems(t.toolbarList||[]),typeof t.autoGrow!="undefined"&&this.setAutoGrow(t.autoGrow),this.fixStylePosition(),this.event.trigger("registerUI","",[])}value(){let n=this.refEditor.querySelector(".SubEditorSource");return n?n.value:this.refContent.style.display!=="none"?this.refContent.innerHTML:this.refTextarea.value}ln(n){return this.lnFunc?this.lnFunc(n)||n:typeof L.langList[this.lang]!="undefined"&&typeof L.langList[this.lang][n]!="undefined"?L.langList[this.lang][n]:n}registerCallback(n,t){this.callbackList[n]=t}getCallback(n,t=void 0){if(typeof this.callbackList[n]!="undefined")return typeof this.callbackList[n]=="function"?this.callbackList[n](t):this.callbackList[n]}static presetToolbarItem(n,t){Z.presetItemList[n]=t}static presetPlugin(n,t){L.presetPluginList[n]=t}initPlugins(n){n.forEach(t=>{typeof t=="string"?typeof L.presetPluginList[t]!="undefined"?this.event.register(L.presetPluginList[t]):typeof Ne[t]!="undefined"&&this.event.register(Ne[t]):typeof t=="object"&&t.length&&this.event.register(t)})}handleFeature(){let n=Q.getSelection();if(!n||!(n==null?void 0:n.focusNode)||!this.refContent.contains(n.focusNode))return;let t=nt(n.focusNode,this.refContent);this.feature!==t&&(this.feature=t,this.event.trigger("onFeatureChange",this.feature.nodeName,[this,this.feature]))}initEvents(){this.debounceChange=Ie(()=>{this.handleChange(this.history.Next())},300),this.refContent.addEventListener("keyup",n=>{this.event.trigger("onKeyUp",n.target.tagName,[this,n]),this.debounceChange()}),this.refContent.addEventListener("keydown",n=>{this.event.trigger("onKeyDown",n.target.tagName,[this,n])}),this.refContent.addEventListener("click",n=>{this.event.trigger("onClick",n.target.tagName,[this,n])}),this.refContent.addEventListener("mouseup",n=>{this.event.trigger("onMouseUp",n.target.tagName,[this,n])}),this.refContent.addEventListener("blur",n=>{this.event.trigger("onBlur",n.target.tagName,[this,n])}),this.refContent.addEventListener("paste",n=>{this.event.trigger("onPaste",n.target.tagName,[this,n])}),this.docListener.selectionchange=[()=>{let n=Q.getSelection().focusNode,t=n===this.refContent;if(!t&&n&&n!==this.refContent)for(;n&&n.parentElement;){if(n.parentNode===this.refContent){t=!0;break}n=n.parentElement}if(!t){this.selection=void 0;return}let r=B.default.saveSlim(this.refContent);JSON.stringify(this.selection)!==JSON.stringify(r)&&(this.selection=r,this.handleFeature(),this.event.trigger("onSelectionChange","",[this,this.selection]))}],document.addEventListener("selectionchange",this.docListener.selectionchange[0])}resetSelection(){this.selection=B.default.saveSlim(this.refContent)}restoreSelection(n=void 0){B.default.restore(this.refContent,n||this.selection)}getSelectionRange(){this.selection||this.resetSelection();let n=Q.getSelection(),t=n.getRangeAt(0);return{selection:n,range:t.cloneRange()}}setCache(n,t){this.cachedList[n]=t}getCache(n){return typeof this.cachedList[n]=="undefined"?void 0:this.cachedList[n]}setCfg(n,t){this.cfgList[n]=t}getCfg(n){let t=this.ln(n);return t&&t!==n?t:this.cfgList[n]||""}command(n,t=[]){this.selection||(this.selection=B.default.saveSlim(this.refContent)),B.default.restore(this.refContent,this.selection),this.event.trigger("onCommand",n,[this,n,...t])}disableFooter(){this.refFooter.style.display="none",this.fixStylePosition()}enableFooter(n=15){this.refFooter.style.display="block",this.refFooter.style.height=n+"px",this.fixStylePosition()}setAutoGrow(n){this.autoGrow!==n&&(this.autoGrow=n,n?(this.refEditor.classList.add("AutoGrow"),this.refContent.addEventListener("input",this.growFn),this.refEditor.style.height="auto",this.refContent.parentElement.style.height="auto"):(this.refEditor.classList.remove("AutoGrow"),this.refContent.removeEventListener("input",this.growFn),this.refEditor.style.height=this.height+"px"),this.fixStylePosition())}growFn(n){n.target.parentElement.style.height=n.target.clientHeight+"px"}fixStylePosition(){this.autoGrow||(this.refContent.parentElement.style.height=this.refEditor.clientHeight-this.refToolbar.clientHeight-this.refFooter.clientHeight+"px")}initToolbarItems(n){var t;(t=this.toolbar)==null||t.initItems(n)}destroy(){var n;this.refEl.nodeName==="TEXTAREA"?(this.refEl.setAttribute("style",this.cacheTextareaStyle),(n=this.refEl.parentNode)==null||n.removeChild(this.refEditor)):(this.refEl.removeChild(this.refEditor),this.refEl.removeChild(this.refTextarea)),Object.keys(this.docListener).forEach(t=>{this.docListener[t].forEach(r=>{document.removeEventListener(t,r)})}),this.refEl._SubEditor=void 0}static presetLang(n){Object.keys(n).forEach(t=>{L.langList[t]=Object.assign({},oe[t]||{},L.langList[t]||{},n[t])})}static initLang(n){Object.keys(oe).forEach(t=>{L.langList[t]=Object.assign({},oe[t],L.langList[t]||{},n[t]||{})}),Object.keys(n).length>0&&L.presetLang(n)}static presetSvg(n){L.svgList=Object.assign(L.svgList,n)}static initSvg(n){L.svgList=Object.assign({},Me,n)}static presetCss(n=""){L.presetCssString=n}static lastCss(){return L.lastCssString}static initCss(n="",t=!1){let r="",o=document.querySelector("#SubEditorStyle");if(t&&o)return;Object.keys(L.pluginCSS).forEach(s=>r+=L.pluginCSS[s]);let a=ke+`
`+r+`
`+L.presetCssString+`
`+n;L.lastCssString=a;for(let s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].title&&document.styleSheets[s].title==="SubEditorStyle"){a!==o.innerHTML&&(o.innerHTML=a);return}let l=window.document.createElement("style");l.title="SubEditorStyle",l.setAttribute("id","SubEditorStyle"),l.innerHTML=a,document.head.appendChild(l)}changeValue(n){this.refEditor&&(this.refContent.innerHTML=n,this.resetSelection(),this.handleFeature(),this.handleChange(this.history.Next()))}triggerChange(){this.refEditor&&(this.handleFeature(),this.handleChange(this.history.Next()))}handleChange(n){this.event.trigger("onBeforeChange","",[this,n]),this.refTextarea.style.display==="none"&&(this.refTextarea.value=this.refContent.innerHTML),n&&this.onChange&&this.onChange(n)}},C=L;C.svgList={},C.langList={},C.presetPluginList={},C.lastCssString="",C.presetCssString="",C.pluginCSS={};"use strict";typeof window!="undefined"&&(window.SubEditor=C);})();
